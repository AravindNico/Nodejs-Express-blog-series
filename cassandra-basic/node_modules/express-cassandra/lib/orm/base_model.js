'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var util = require('util');
var cql = require('dse-driver');
var async = require('async');
var _ = require('lodash');
var deepDiff = require('deep-diff').diff;
var readlineSync = require('readline-sync');
var objectHash = require('object-hash');
var debug = require('debug')('express-cassandra');

var buildError = require('./apollo_error.js');
var schemer = require('./apollo_schemer');

var TYPE_MAP = require('./cassandra_types');

var checkDBTableName = function checkDBTableName(obj) {
  return typeof obj === 'string' && /^[a-zA-Z]+[a-zA-Z0-9_]*/.test(obj);
};

var BaseModel = function f(instanceValues) {
  instanceValues = instanceValues || {};
  var fieldValues = {};
  var fields = this.constructor._properties.schema.fields;

  var defaultSetter = function f1(propName, newValue) {
    this[propName] = newValue;
  };

  var defaultGetter = function f1(propName) {
    return this[propName];
  };

  this._validators = {};

  for (var fieldsKeys = Object.keys(fields), i = 0, len = fieldsKeys.length; i < len; i++) {
    var propertyName = fieldsKeys[i];
    var field = fields[fieldsKeys[i]];

    this._validators[propertyName] = this.constructor._get_validators(propertyName);

    var setter = defaultSetter.bind(fieldValues, propertyName);
    var getter = defaultGetter.bind(fieldValues, propertyName);

    if (field.virtual && typeof field.virtual.set === 'function') {
      setter = field.virtual.set.bind(fieldValues);
    }

    if (field.virtual && typeof field.virtual.get === 'function') {
      getter = field.virtual.get.bind(fieldValues);
    }

    var descriptor = {
      enumerable: true,
      set: setter,
      get: getter
    };

    Object.defineProperty(this, propertyName, descriptor);
    if (!field.virtual) {
      this[propertyName] = instanceValues[propertyName];
    }
  }
};

BaseModel._properties = {
  name: null,
  schema: null
};

BaseModel._set_properties = function f(properties) {
  var schema = properties.schema;
  var tableName = schema.table_name || properties.name;

  if (!checkDBTableName(tableName)) {
    throw buildError('model.tablecreation.invalidname', tableName);
  }

  var qualifiedTableName = util.format('"%s"."%s"', properties.keyspace, tableName);

  this._properties = properties;
  this._properties.table_name = tableName;
  this._properties.qualified_table_name = qualifiedTableName;
};

BaseModel._validate = function f(validators, value) {
  if (value == null || _.isPlainObject(value) && value.$db_function) return true;

  for (var v = 0; v < validators.length; v++) {
    if (!validators[v].validator(value)) {
      return validators[v].message;
    }
  }
  return true;
};

BaseModel._get_validators = function f(fieldname) {
  var genericValidatorMessageFunc = function genericValidatorMessageFunc(value, propName, fieldtype) {
    return util.format('Invalid Value: "%s" for Field: %s (Type: %s)', value, propName, fieldtype);
  };
  var fieldtype = schemer.get_field_type(this._properties.schema, fieldname);

  var validators = [];
  var typeFieldValidator = TYPE_MAP.generic_type_validator(fieldtype);

  if (typeFieldValidator) validators.push(typeFieldValidator);

  var field = this._properties.schema.fields[fieldname];
  if (typeof field.rule !== 'undefined') {
    if (typeof field.rule === 'function') {
      field.rule = {
        validator: field.rule,
        message: genericValidatorMessageFunc
      };
    } else {
      if (!_.isPlainObject(field.rule) || typeof field.rule.validator === 'undefined') {
        throw new Error('Invalid validator');
      }
      if (!field.rule.message) {
        field.rule.message = genericValidatorMessageFunc;
      } else if (typeof field.rule.message === 'string') {
        field.rule.message = function f1(message, value, propName, fieldType) {
          return util.format(message, value, propName, fieldType);
        }.bind(null, field.rule.message);
      } else if (typeof field.rule.message !== 'function') {
        throw new Error('Invalid validator message');
      }
    }
    validators.push(field.rule);
  }

  return validators;
};

BaseModel._ask_confirmation = function f(message) {
  var permission = 'y';
  if (!this._properties.disableTTYConfirmation) {
    permission = readlineSync.question(message);
  }
  return permission;
};

BaseModel._ensure_connected = function f(callback) {
  if (!this._properties.cql) {
    this._properties.connect(callback);
  } else {
    callback();
  }
};

BaseModel._execute_definition_query = function f(query, params, callback) {
  var _this = this;

  this._ensure_connected(function (err) {
    if (err) {
      callback(err);
      return;
    }
    debug('executing definition query: %s with params: %j', query, params);
    var properties = _this._properties;
    var conn = properties.define_connection;
    conn.execute(query, params, { prepare: false, fetchSize: 0 }, callback);
  });
};

BaseModel._execute_batch = function f(queries, options, callback) {
  var _this2 = this;

  this._ensure_connected(function (err) {
    if (err) {
      callback(err);
      return;
    }
    debug('executing batch queries: %j', queries);
    _this2._properties.cql.batch(queries, options, callback);
  });
};

BaseModel.execute_batch = function f(queries, options, callback) {
  if (arguments.length === 2) {
    callback = options;
    options = { prepare: true };
  }
  this._execute_batch(queries, options, callback);
};

BaseModel.get_cql_client = function f(callback) {
  var _this3 = this;

  this._ensure_connected(function (err) {
    if (err) {
      callback(err);
      return;
    }
    callback(null, _this3._properties.cql);
  });
};

BaseModel._create_table = function f(callback) {
  var _this4 = this;

  var properties = this._properties;
  var tableName = properties.table_name;
  var modelSchema = properties.schema;
  var dropTableOnSchemaChange = properties.dropTableOnSchemaChange;
  var migration = properties.migration;

  // backwards compatible change, dropTableOnSchemaChange will work like migration: 'drop'
  if (!migration) {
    if (dropTableOnSchemaChange) migration = 'drop';else migration = 'safe';
  }
  // always safe migrate if NODE_ENV==='production'
  if (process.env.NODE_ENV === 'production') migration = 'safe';

  // check for existence of table on DB and if it matches this model's schema
  this._get_db_table_schema(function (err, dbSchema) {
    if (err) {
      callback(err);
      return;
    }

    var afterCustomIndex = function afterCustomIndex(err1) {
      if (err1) {
        callback(buildError('model.tablecreation.dbindex', err1));
        return;
      }
      // materialized view creation
      if (modelSchema.materialized_views) {
        async.eachSeries(Object.keys(modelSchema.materialized_views), function (viewName, next) {
          var matViewQuery = _this4._create_materialized_view_query(tableName, viewName, modelSchema.materialized_views[viewName]);
          _this4._execute_definition_query(matViewQuery, [], function (err2, result) {
            if (err2) next(buildError('model.tablecreation.matview', err2));else next(null, result);
          });
        }, callback);
      } else callback();
    };

    var afterDBIndex = function afterDBIndex(err1) {
      if (err1) {
        callback(buildError('model.tablecreation.dbindex', err1));
        return;
      }
      // custom index creation
      if (modelSchema.custom_indexes) {
        async.eachSeries(modelSchema.custom_indexes, function (idx, next) {
          _this4._execute_definition_query(_this4._create_custom_index_query(tableName, idx), [], function (err2, result) {
            if (err2) next(err2);else next(null, result);
          });
        }, afterCustomIndex);
      } else if (modelSchema.custom_index) {
        var customIndexQuery = _this4._create_custom_index_query(tableName, modelSchema.custom_index);
        _this4._execute_definition_query(customIndexQuery, [], function (err2, result) {
          if (err2) afterCustomIndex(buildError('model.tablecreation.dbindex', err2));else afterCustomIndex(null, result);
        });
      } else afterCustomIndex();
    };

    var afterDBCreate = function afterDBCreate(err1) {
      if (err1) {
        callback(buildError('model.tablecreation.dbcreate', err1));
        return;
      }
      // index creation
      if (modelSchema.indexes instanceof Array) {
        async.eachSeries(modelSchema.indexes, function (idx, next) {
          _this4._execute_definition_query(_this4._create_index_query(tableName, idx), [], function (err2, result) {
            if (err2) next(err2);else next(null, result);
          });
        }, afterDBIndex);
      } else afterDBIndex();
    };

    if (dbSchema) {
      (function () {
        var normalizedModelSchema = schemer.normalize_model_schema(modelSchema);
        var normalizedDBSchema = schemer.normalize_model_schema(dbSchema);

        if (_.isEqual(normalizedModelSchema, normalizedDBSchema)) {
          callback();
        } else {
          (function () {
            var dropRecreateTable = function dropRecreateTable() {
              var permission = _this4._ask_confirmation(util.format('Migration: model schema changed for table "%s", drop table & recreate? (data will be lost!) (y/n): ', tableName));
              if (permission.toLowerCase() === 'y') {
                if (normalizedDBSchema.materialized_views) {
                  var mviews = Object.keys(normalizedDBSchema.materialized_views);

                  _this4.drop_mviews(mviews, function (err1) {
                    if (err1) {
                      callback(buildError('model.tablecreation.matview', err1));
                      return;
                    }

                    _this4.drop_table(function (err2) {
                      if (err2) {
                        callback(buildError('model.tablecreation.dbcreate', err2));
                        return;
                      }
                      var createTableQuery = _this4._create_table_query(tableName, modelSchema);
                      _this4._execute_definition_query(createTableQuery, [], afterDBCreate);
                    });
                  });
                } else {
                  _this4.drop_table(function (err1) {
                    if (err1) {
                      callback(buildError('model.tablecreation.dbcreate', err1));
                      return;
                    }
                    var createTableQuery = _this4._create_table_query(tableName, modelSchema);
                    _this4._execute_definition_query(createTableQuery, [], afterDBCreate);
                  });
                }
              } else {
                callback(buildError('model.tablecreation.schemamismatch', tableName));
              }
            };

            var afterDBAlter = function afterDBAlter(err1) {
              if (err1) {
                if (err1.message !== 'break') callback(err1);
                return;
              }
              // it should create/drop indexes/custom_indexes/materialized_views that are added/removed in model schema
              // remove common indexes/custom_indexes/materialized_views from normalizedModelSchema and normalizedDBSchema
              // then drop all remaining indexes/custom_indexes/materialized_views from normalizedDBSchema
              // and add all remaining indexes/custom_indexes/materialized_views from normalizedModelSchema
              var addedIndexes = _.difference(normalizedModelSchema.indexes, normalizedDBSchema.indexes);
              var removedIndexes = _.difference(normalizedDBSchema.indexes, normalizedModelSchema.indexes);
              var removedIndexNames = [];
              removedIndexes.forEach(function (removedIndex) {
                removedIndexNames.push(dbSchema.index_names[removedIndex]);
              });

              var addedCustomIndexes = _.filter(normalizedModelSchema.custom_indexes, function (obj) {
                return !_.find(normalizedDBSchema.custom_indexes, obj);
              });
              var removedCustomIndexes = _.filter(normalizedDBSchema.custom_indexes, function (obj) {
                return !_.find(normalizedModelSchema.custom_indexes, obj);
              });
              removedCustomIndexes.forEach(function (removedIndex) {
                removedIndexNames.push(dbSchema.index_names[objectHash(removedIndex)]);
              });

              var addedMaterializedViews = _.filter(Object.keys(normalizedModelSchema.materialized_views), function (viewName) {
                return !_.find(normalizedDBSchema.materialized_views, normalizedModelSchema.materialized_views[viewName]);
              });
              var removedMaterializedViews = _.filter(Object.keys(normalizedDBSchema.materialized_views), function (viewName) {
                return !_.find(normalizedModelSchema.materialized_views, normalizedDBSchema.materialized_views[viewName]);
              });

              // remove altered materialized views
              if (removedMaterializedViews.length > 0) {
                var permission = _this4._ask_confirmation(util.format('Migration: model schema for table "%s" has removed materialized_views: %j, drop them? (y/n): ', tableName, removedMaterializedViews));
                if (permission.toLowerCase() !== 'y') {
                  callback(buildError('model.tablecreation.schemamismatch', tableName));
                  return;
                }
              }
              if (removedIndexNames.length > 0) {
                var _permission = _this4._ask_confirmation(util.format('Migration: model schema for table "%s" has removed indexes: %j, drop them? (y/n): ', tableName, removedIndexNames));
                if (_permission.toLowerCase() !== 'y') {
                  callback(buildError('model.tablecreation.schemamismatch', tableName));
                  return;
                }
              }

              _this4.drop_mviews(removedMaterializedViews, function (err2) {
                if (err2) {
                  callback(buildError('model.tablecreation.matview', err2));
                  return;
                }

                // remove altered indexes by index name
                _this4.drop_indexes(removedIndexNames, function (err3) {
                  if (err3) {
                    callback(buildError('model.tablecreation.dbindex', err3));
                    return;
                  }

                  // add altered indexes
                  async.eachSeries(addedIndexes, function (idx, next) {
                    _this4._execute_definition_query(_this4._create_index_query(tableName, idx), [], function (err4, result) {
                      if (err4) next(err4);else next(null, result);
                    });
                  }, function (err4) {
                    if (err4) {
                      callback(buildError('model.tablecreation.dbindex', err4));
                      return;
                    }

                    // add altered custom indexes
                    async.eachSeries(addedCustomIndexes, function (idx, next) {
                      var customIndexQuery = _this4._create_custom_index_query(tableName, idx);
                      _this4._execute_definition_query(customIndexQuery, [], function (err5, result) {
                        if (err5) next(err5);else next(null, result);
                      });
                    }, function (err5) {
                      if (err5) {
                        callback(buildError('model.tablecreation.dbindex', err5));
                        return;
                      }

                      // add altered materialized_views
                      async.eachSeries(addedMaterializedViews, function (viewName, next) {
                        var matViewQuery = _this4._create_materialized_view_query(tableName, viewName, modelSchema.materialized_views[viewName]);
                        _this4._execute_definition_query(matViewQuery, [], function (err6, result) {
                          if (err6) next(buildError('model.tablecreation.matview', err6));else next(null, result);
                        });
                      }, callback);
                    });
                  });
                });
              });
            };

            var alterDBTable = function alterDBTable() {
              var differences = deepDiff(normalizedDBSchema.fields, normalizedModelSchema.fields);
              async.eachSeries(differences, function (diff, next) {
                var fieldName = diff.path[0];
                var alterFieldType = function alterFieldType() {
                  var permission = _this4._ask_confirmation(util.format('Migration: model schema for table "%s" has new type for field "%s", ' + 'alter table to update column type? (y/n): ', tableName, fieldName));
                  if (permission.toLowerCase() === 'y') {
                    _this4.alter_table('ALTER', fieldName, diff.rhs, function (err1, result) {
                      if (err1) next(buildError('model.tablecreation.dbalter', err1));else next(null, result);
                    });
                  } else {
                    next(buildError('model.tablecreation.schemamismatch', tableName));
                  }
                };

                var alterAddField = function alterAddField() {
                  var type = '';
                  if (diff.path.length > 1) {
                    if (diff.path[1] === 'type') {
                      type = diff.rhs;
                      if (normalizedModelSchema.fields[fieldName].typeDef) {
                        type += normalizedModelSchema.fields[fieldName].typeDef;
                      }
                    } else {
                      type = normalizedModelSchema.fields[fieldName].type;
                      type += diff.rhs;
                    }
                  } else {
                    type = diff.rhs.type;
                    if (diff.rhs.typeDef) type += diff.rhs.typeDef;
                  }

                  _this4.alter_table('ADD', fieldName, type, function (err1, result) {
                    if (err1) next(buildError('model.tablecreation.dbalter', err1));else next(null, result);
                  });
                };

                var alterRemoveField = function alterRemoveField(nextCallback) {
                  // remove dependent indexes/custom_indexes/materialized_views,
                  // update them in normalizedDBSchema, then alter
                  var dependentIndexes = [];
                  var pullIndexes = [];
                  normalizedDBSchema.indexes.forEach(function (dbIndex) {
                    var indexSplit = dbIndex.split(/[()]/g);
                    var indexFieldName = '';
                    if (indexSplit.length > 1) indexFieldName = indexSplit[1];else indexFieldName = indexSplit[0];
                    if (indexFieldName === fieldName) {
                      dependentIndexes.push(dbSchema.index_names[dbIndex]);
                      pullIndexes.push(dbIndex);
                    }
                  });
                  _.pullAll(normalizedDBSchema.indexes, pullIndexes);

                  var pullCustomIndexes = [];
                  normalizedDBSchema.custom_indexes.forEach(function (dbIndex) {
                    if (dbIndex.on === fieldName) {
                      dependentIndexes.push(dbSchema.index_names[objectHash(dbIndex)]);
                      pullCustomIndexes.push(dbIndex);
                    }
                  });
                  _.pullAll(normalizedDBSchema.custom_indexes, pullCustomIndexes);

                  var dependentViews = [];
                  Object.keys(normalizedDBSchema.materialized_views).forEach(function (dbViewName) {
                    if (normalizedDBSchema.materialized_views[dbViewName].select.indexOf(fieldName) > -1) {
                      dependentViews.push(dbViewName);
                    } else if (normalizedDBSchema.materialized_views[dbViewName].select[0] === '*') {
                      dependentViews.push(dbViewName);
                    } else if (normalizedDBSchema.materialized_views[dbViewName].key.indexOf(fieldName) > -1) {
                      dependentViews.push(dbViewName);
                    } else if (normalizedDBSchema.materialized_views[dbViewName].key[0] instanceof Array && normalizedDBSchema.materialized_views[dbViewName].key[0].indexOf(fieldName) > -1) {
                      dependentViews.push(dbViewName);
                    }
                  });
                  dependentViews.forEach(function (viewName) {
                    delete normalizedDBSchema.materialized_views[viewName];
                  });

                  _this4.drop_mviews(dependentViews, function (err1) {
                    if (err1) {
                      nextCallback(buildError('model.tablecreation.matview', err1));
                      return;
                    }

                    _this4.drop_indexes(dependentIndexes, function (err2) {
                      if (err2) {
                        nextCallback(buildError('model.tablecreation.dbindex', err2));
                        return;
                      }

                      _this4.alter_table('DROP', fieldName, '', function (err3, result) {
                        if (err3) nextCallback(buildError('model.tablecreation.dbalter', err3));else nextCallback(null, result);
                      });
                    });
                  });
                };

                if (diff.kind === 'N') {
                  var permission = _this4._ask_confirmation(util.format('Migration: model schema for table "%s" has added field "%s", alter table to add column? (y/n): ', tableName, fieldName));
                  if (permission.toLowerCase() === 'y') {
                    alterAddField();
                  } else {
                    next(buildError('model.tablecreation.schemamismatch', tableName));
                  }
                } else if (diff.kind === 'D') {
                  var _permission2 = _this4._ask_confirmation(util.format('Migration: model schema for table "%s" has removed field "%s", alter table to drop column? ' + '(column data will be lost & dependent indexes/views will be recreated!) (y/n): ', tableName, fieldName));
                  if (_permission2.toLowerCase() === 'y') {
                    alterRemoveField(next);
                  } else {
                    next(buildError('model.tablecreation.schemamismatch', tableName));
                  }
                } else if (diff.kind === 'E') {
                  // check if the alter field type is possible, otherwise try D and then N
                  if (diff.path[1] === 'type') {
                    if (diff.lhs === 'int' && diff.rhs === 'varint') {
                      // alter field type possible
                      alterFieldType();
                    } else if (normalizedDBSchema.key.indexOf(fieldName) > 0) {
                      // check if field part of clustering key
                      // alter field type impossible
                      var _permission3 = _this4._ask_confirmation(util.format('Migration: model schema for table "%s" has new incompatible type for primary key field "%s", ' + 'proceed to recreate table? (y/n): ', tableName, fieldName));
                      if (_permission3.toLowerCase() === 'y') {
                        dropRecreateTable();
                        next(new Error('break'));
                      } else {
                        next(buildError('model.tablecreation.schemamismatch', tableName));
                      }
                    } else if (['text', 'ascii', 'bigint', 'boolean', 'decimal', 'double', 'float', 'inet', 'int', 'timestamp', 'timeuuid', 'uuid', 'varchar', 'varint'].indexOf(diff.lhs) > -1 && diff.rhs === 'blob') {
                      // alter field type possible
                      alterFieldType();
                    } else if (diff.lhs === 'timeuuid' && diff.rhs === 'uuid') {
                      // alter field type possible
                      alterFieldType();
                    } else if (normalizedDBSchema.key[0].indexOf(fieldName) > -1) {
                      // check if field part of partition key
                      // alter field type impossible
                      var _permission4 = _this4._ask_confirmation(util.format('Migration: model schema for table "%s" has new incompatible type for primary key field "%s", ' + 'proceed to recreate table? (y/n): ', tableName, fieldName));
                      if (_permission4.toLowerCase() === 'y') {
                        dropRecreateTable();
                        next(new Error('break'));
                      } else {
                        next(buildError('model.tablecreation.schemamismatch', tableName));
                      }
                    } else {
                      // alter type impossible
                      var _permission5 = _this4._ask_confirmation(util.format('Migration: model schema for table "%s" has new incompatible type for field "%s", drop column ' + 'and recreate? (column data will be lost & dependent indexes/views will be recreated!) (y/n): ', tableName, fieldName));
                      if (_permission5.toLowerCase() === 'y') {
                        alterRemoveField(function (err1) {
                          if (err1) next(err1);else alterAddField();
                        });
                      } else {
                        next(buildError('model.tablecreation.schemamismatch', tableName));
                      }
                    }
                  } else {
                    // alter type impossible
                    var _permission6 = _this4._ask_confirmation(util.format('Migration: model schema for table "%s" has new incompatible type for field "%s", drop column ' + 'and recreate? (column data will be lost & dependent indexes/views will be recreated!) (y/n): ', tableName, fieldName));
                    if (_permission6.toLowerCase() === 'y') {
                      alterRemoveField(function (err1) {
                        if (err1) next(err1);else alterAddField();
                      });
                    } else {
                      next(buildError('model.tablecreation.schemamismatch', tableName));
                    }
                  }
                } else {
                  next();
                }
              }, afterDBAlter);
            };

            if (migration === 'alter') {
              // check if table can be altered to match schema
              if (_.isEqual(normalizedModelSchema.key, normalizedDBSchema.key) && _.isEqual(normalizedModelSchema.clustering_order, normalizedDBSchema.clustering_order)) {
                alterDBTable();
              } else {
                dropRecreateTable();
              }
            } else if (migration === 'drop') {
              dropRecreateTable();
            } else {
              callback(buildError('model.tablecreation.schemamismatch', tableName));
            }
          })();
        }
      })();
    } else {
      // if not existing, it's created
      var createTableQuery = _this4._create_table_query(tableName, modelSchema);
      _this4._execute_definition_query(createTableQuery, [], afterDBCreate);
    }
  });
};

BaseModel._create_table_query = function f(tableName, schema) {
  var rows = [];
  var fieldType = void 0;
  Object.keys(schema.fields).forEach(function (k) {
    if (schema.fields[k].virtual) {
      return;
    }
    var segment = '';
    fieldType = schemer.get_field_type(schema, k);
    if (schema.fields[k].typeDef) {
      segment = util.format('"%s" %s%s', k, fieldType, schema.fields[k].typeDef);
    } else {
      segment = util.format('"%s" %s', k, fieldType);
    }

    if (schema.fields[k].static) {
      segment += ' STATIC';
    }

    rows.push(segment);
  });

  var partitionKey = schema.key[0];
  var clusteringKey = schema.key.slice(1, schema.key.length);
  var clusteringOrder = [];

  for (var field = 0; field < clusteringKey.length; field++) {
    if (schema.clustering_order && schema.clustering_order[clusteringKey[field]] && schema.clustering_order[clusteringKey[field]].toLowerCase() === 'desc') {
      clusteringOrder.push(util.format('"%s" DESC', clusteringKey[field]));
    } else {
      clusteringOrder.push(util.format('"%s" ASC', clusteringKey[field]));
    }
  }

  var clusteringOrderQuery = '';
  if (clusteringOrder.length > 0) {
    clusteringOrderQuery = util.format(' WITH CLUSTERING ORDER BY (%s)', clusteringOrder.toString());
  }

  if (partitionKey instanceof Array) {
    partitionKey = partitionKey.map(function (v) {
      return util.format('"%s"', v);
    }).join(',');
  } else {
    partitionKey = util.format('"%s"', partitionKey);
  }

  if (clusteringKey.length) {
    clusteringKey = clusteringKey.map(function (v) {
      return util.format('"%s"', v);
    }).join(',');
    clusteringKey = util.format(',%s', clusteringKey);
  } else {
    clusteringKey = '';
  }

  var query = util.format('CREATE TABLE IF NOT EXISTS "%s" (%s , PRIMARY KEY((%s)%s))%s;', tableName, rows.join(' , '), partitionKey, clusteringKey, clusteringOrderQuery);

  return query;
};

BaseModel._create_materialized_view_query = function f(tableName, viewName, viewSchema) {
  var rows = [];

  for (var k = 0; k < viewSchema.select.length; k++) {
    if (viewSchema.select[k] === '*') rows.push(util.format('%s', viewSchema.select[k]));else rows.push(util.format('"%s"', viewSchema.select[k]));
  }

  var partitionKey = viewSchema.key[0];
  var clusteringKey = viewSchema.key.slice(1, viewSchema.key.length);
  var clusteringOrder = [];

  for (var field = 0; field < clusteringKey.length; field++) {
    if (viewSchema.clustering_order && viewSchema.clustering_order[clusteringKey[field]] && viewSchema.clustering_order[clusteringKey[field]].toLowerCase() === 'desc') {
      clusteringOrder.push(util.format('"%s" DESC', clusteringKey[field]));
    } else {
      clusteringOrder.push(util.format('"%s" ASC', clusteringKey[field]));
    }
  }

  var clusteringOrderQuery = '';
  if (clusteringOrder.length > 0) {
    clusteringOrderQuery = util.format(' WITH CLUSTERING ORDER BY (%s)', clusteringOrder.toString());
  }

  if (partitionKey instanceof Array) {
    partitionKey = partitionKey.map(function (v) {
      return util.format('"%s"', v);
    }).join(',');
  } else {
    partitionKey = util.format('"%s"', partitionKey);
  }

  if (clusteringKey.length) {
    clusteringKey = clusteringKey.map(function (v) {
      return util.format('"%s"', v);
    }).join(',');
    clusteringKey = util.format(',%s', clusteringKey);
  } else {
    clusteringKey = '';
  }

  var whereClause = partitionKey.split(',').join(' IS NOT NULL AND ');
  if (clusteringKey) whereClause += clusteringKey.split(',').join(' IS NOT NULL AND ');
  whereClause += ' IS NOT NULL';

  var query = util.format('CREATE MATERIALIZED VIEW IF NOT EXISTS "%s" AS SELECT %s FROM "%s" WHERE %s PRIMARY KEY((%s)%s)%s;', viewName, rows.join(' , '), tableName, whereClause, partitionKey, clusteringKey, clusteringOrderQuery);

  return query;
};

BaseModel._create_index_query = function f(tableName, indexName) {
  var query = void 0;
  var indexExpression = indexName.replace(/["\s]/g, '').split(/[()]/g);
  if (indexExpression.length > 1) {
    indexExpression[0] = indexExpression[0].toLowerCase();
    query = util.format('CREATE INDEX IF NOT EXISTS ON "%s" (%s("%s"));', tableName, indexExpression[0], indexExpression[1]);
  } else {
    query = util.format('CREATE INDEX IF NOT EXISTS ON "%s" ("%s");', tableName, indexExpression[0]);
  }

  return query;
};

BaseModel._create_custom_index_query = function f(tableName, customIndex) {
  var query = util.format('CREATE CUSTOM INDEX IF NOT EXISTS ON "%s" ("%s") USING \'%s\'', tableName, customIndex.on, customIndex.using);

  if (Object.keys(customIndex.options).length > 0) {
    query += ' WITH OPTIONS = {';
    Object.keys(customIndex.options).forEach(function (key) {
      query += util.format("'%s': '%s', ", key, customIndex.options[key]);
    });
    query = query.slice(0, -2);
    query += '}';
  }

  query += ';';

  return query;
};

BaseModel._get_db_table_schema = function f(callback) {
  var self = this;

  var tableName = this._properties.table_name;
  var keyspace = this._properties.keyspace;

  var query = 'SELECT * FROM system_schema.columns WHERE table_name = ? AND keyspace_name = ?;';

  self.execute_query(query, [tableName, keyspace], function (err, resultColumns) {
    if (err) {
      callback(buildError('model.tablecreation.dbschemaquery', err));
      return;
    }

    if (!resultColumns.rows || resultColumns.rows.length === 0) {
      callback(null, null);
      return;
    }

    var dbSchema = { fields: {}, typeMaps: {}, staticMaps: {} };

    for (var r = 0; r < resultColumns.rows.length; r++) {
      var row = resultColumns.rows[r];

      dbSchema.fields[row.column_name] = TYPE_MAP.extract_type(row.type);

      var typeMapDef = TYPE_MAP.extract_typeDef(row.type);
      if (typeMapDef.length > 0) {
        dbSchema.typeMaps[row.column_name] = typeMapDef;
      }

      if (row.kind === 'partition_key') {
        if (!dbSchema.key) dbSchema.key = [[]];
        dbSchema.key[0][row.position] = row.column_name;
      } else if (row.kind === 'clustering') {
        if (!dbSchema.key) dbSchema.key = [[]];
        if (!dbSchema.clustering_order) dbSchema.clustering_order = {};

        dbSchema.key[row.position + 1] = row.column_name;
        if (row.clustering_order && row.clustering_order.toLowerCase() === 'desc') {
          dbSchema.clustering_order[row.column_name] = 'DESC';
        } else {
          dbSchema.clustering_order[row.column_name] = 'ASC';
        }
      } else if (row.kind === 'static') {
        dbSchema.staticMaps[row.column_name] = true;
      }
    }

    query = 'SELECT * FROM system_schema.indexes WHERE table_name = ? AND keyspace_name = ?;';

    self.execute_query(query, [tableName, keyspace], function (err1, resultIndexes) {
      if (err1) {
        callback(buildError('model.tablecreation.dbschemaquery', err1));
        return;
      }

      for (var _r = 0; _r < resultIndexes.rows.length; _r++) {
        var _row = resultIndexes.rows[_r];

        if (_row.index_name) {
          var indexOptions = _row.options;
          var target = indexOptions.target;
          target = target.replace(/["\s]/g, '');
          delete indexOptions.target;

          // keeping track of index names to drop index when needed
          if (!dbSchema.index_names) dbSchema.index_names = {};

          if (_row.kind === 'CUSTOM') {
            var using = indexOptions.class_name;
            delete indexOptions.class_name;

            if (!dbSchema.custom_indexes) dbSchema.custom_indexes = [];
            var customIndexObject = {
              on: target,
              using: using,
              options: indexOptions
            };
            dbSchema.custom_indexes.push(customIndexObject);
            dbSchema.index_names[objectHash(customIndexObject)] = _row.index_name;
          } else {
            if (!dbSchema.indexes) dbSchema.indexes = [];
            dbSchema.indexes.push(target);
            dbSchema.index_names[target] = _row.index_name;
          }
        }
      }

      query = 'SELECT view_name,base_table_name FROM system_schema.views WHERE keyspace_name=?;';

      self.execute_query(query, [keyspace], function (err2, resultViews) {
        if (err2) {
          callback(buildError('model.tablecreation.dbschemaquery', err2));
          return;
        }

        for (var _r2 = 0; _r2 < resultViews.rows.length; _r2++) {
          var _row2 = resultViews.rows[_r2];

          if (_row2.base_table_name === tableName) {
            if (!dbSchema.materialized_views) dbSchema.materialized_views = {};
            dbSchema.materialized_views[_row2.view_name] = {};
          }
        }

        if (dbSchema.materialized_views) {
          query = 'SELECT * FROM system_schema.columns WHERE keyspace_name=? and table_name IN ?;';

          self.execute_query(query, [keyspace, Object.keys(dbSchema.materialized_views)], function (err3, resultMatViews) {
            if (err3) {
              callback(buildError('model.tablecreation.dbschemaquery', err3));
              return;
            }

            for (var _r3 = 0; _r3 < resultMatViews.rows.length; _r3++) {
              var _row3 = resultMatViews.rows[_r3];

              if (!dbSchema.materialized_views[_row3.table_name].select) {
                dbSchema.materialized_views[_row3.table_name].select = [];
              }

              dbSchema.materialized_views[_row3.table_name].select.push(_row3.column_name);

              if (_row3.kind === 'partition_key') {
                if (!dbSchema.materialized_views[_row3.table_name].key) {
                  dbSchema.materialized_views[_row3.table_name].key = [[]];
                }

                dbSchema.materialized_views[_row3.table_name].key[0][_row3.position] = _row3.column_name;
              } else if (_row3.kind === 'clustering') {
                if (!dbSchema.materialized_views[_row3.table_name].key) {
                  dbSchema.materialized_views[_row3.table_name].key = [[]];
                }
                if (!dbSchema.materialized_views[_row3.table_name].clustering_order) {
                  dbSchema.materialized_views[_row3.table_name].clustering_order = {};
                }

                dbSchema.materialized_views[_row3.table_name].key[_row3.position + 1] = _row3.column_name;
                if (_row3.clustering_order && _row3.clustering_order.toLowerCase() === 'desc') {
                  dbSchema.materialized_views[_row3.table_name].clustering_order[_row3.column_name] = 'DESC';
                } else {
                  dbSchema.materialized_views[_row3.table_name].clustering_order[_row3.column_name] = 'ASC';
                }
              }
            }

            callback(null, dbSchema);
          });
        } else {
          callback(null, dbSchema);
        }
      });
    });
  });
};

BaseModel._execute_table_query = function f(query, params, options, callback) {
  if (arguments.length === 3) {
    callback = options;
    options = { prepare: true };
  }

  var doExecuteQuery = function f1(doquery, docallback) {
    this.execute_query(doquery, params, options, docallback);
  }.bind(this, query);

  if (this.is_table_ready()) {
    doExecuteQuery(callback);
  } else {
    this.init(function (err) {
      if (err) {
        callback(err);
        return;
      }
      doExecuteQuery(callback);
    });
  }
};

BaseModel._get_db_value_expression = function f(fieldname, fieldvalue) {
  var _this5 = this;

  if (fieldvalue == null || fieldvalue === cql.types.unset) {
    return { query_segment: '?', parameter: fieldvalue };
  }

  if (_.isPlainObject(fieldvalue) && fieldvalue.$db_function) {
    return fieldvalue.$db_function;
  }

  var fieldtype = schemer.get_field_type(this._properties.schema, fieldname);
  var validators = this._get_validators(fieldname);

  if (fieldvalue instanceof Array && fieldtype !== 'list' && fieldtype !== 'set' && fieldtype !== 'frozen') {
    var val = fieldvalue.map(function (v) {
      var dbVal = _this5._get_db_value_expression(fieldname, v);

      if (_.isPlainObject(dbVal) && dbVal.parameter) return dbVal.parameter;
      return dbVal;
    });

    return { query_segment: '?', parameter: val };
  }

  if (this._validate(validators, fieldvalue) !== true) {
    throw buildError('model.value.invalidvalue', fieldvalue, fieldname, fieldtype);
  }

  if (fieldtype === 'counter') {
    var counterQuerySegment = util.format('"%s"', fieldname);
    if (fieldvalue >= 0) counterQuerySegment += ' + ?';else counterQuerySegment += ' - ?';
    fieldvalue = Math.abs(fieldvalue);
    return { query_segment: counterQuerySegment, parameter: fieldvalue };
  }

  return { query_segment: '?', parameter: fieldvalue };
};

BaseModel._create_where_clause = function f(queryObject) {
  var _this6 = this;

  var queryRelations = [];
  var queryParams = [];

  Object.keys(queryObject).forEach(function (k) {
    if (k.indexOf('$') === 0) {
      // search queries based on lucene index or solr
      // escape all single quotes for queries in cassandra
      if (k === '$expr') {
        if (typeof queryObject[k].index === 'string' && typeof queryObject[k].query === 'string') {
          queryRelations.push(util.format("expr(%s,'%s')", queryObject[k].index, queryObject[k].query.replace(/'/g, "''")));
        } else {
          throw buildError('model.find.invalidexpr');
        }
      } else if (k === '$solr_query') {
        if (typeof queryObject[k] === 'string') {
          queryRelations.push(util.format("solr_query='%s'", queryObject[k].replace(/'/g, "''")));
        } else {
          throw buildError('model.find.invalidsolrquery');
        }
      }
      return;
    }

    var whereObject = queryObject[k];
    // Array of operators
    if (!(whereObject instanceof Array)) whereObject = [whereObject];

    for (var fk = 0; fk < whereObject.length; fk++) {
      var fieldRelation = whereObject[fk];

      var cqlOperators = {
        $eq: '=',
        $gt: '>',
        $lt: '<',
        $gte: '>=',
        $lte: '<=',
        $in: 'IN',
        $like: 'LIKE',
        $token: 'token',
        $contains: 'CONTAINS',
        $contains_key: 'CONTAINS KEY'
      };

      if (_.isPlainObject(fieldRelation)) {
        var validKeys = Object.keys(cqlOperators);
        var fieldRelationKeys = Object.keys(fieldRelation);
        for (var i = 0; i < fieldRelationKeys.length; i++) {
          if (validKeys.indexOf(fieldRelationKeys[i]) < 0) {
            // field relation key invalid
            fieldRelation = { $eq: fieldRelation };
            break;
          }
        }
      } else {
        fieldRelation = { $eq: fieldRelation };
      }

      var relKeys = Object.keys(fieldRelation);
      for (var rk = 0; rk < relKeys.length; rk++) {
        var firstKey = relKeys[rk];
        var firstValue = fieldRelation[firstKey];
        if (firstKey.toLowerCase() in cqlOperators) {
          firstKey = firstKey.toLowerCase();
          var op = cqlOperators[firstKey];

          if (firstKey === '$in' && !(firstValue instanceof Array)) throw buildError('model.find.invalidinop');
          if (firstKey === '$token' && !(firstValue instanceof Object)) throw buildError('model.find.invalidtoken');

          var whereTemplate = '"%s" %s %s';
          if (firstKey === '$token') {
            whereTemplate = 'token("%s") %s token(%s)';

            var tokenRelKeys = Object.keys(firstValue);
            for (var tokenRK = 0; tokenRK < tokenRelKeys.length; tokenRK++) {
              var tokenFirstKey = tokenRelKeys[tokenRK];
              var tokenFirstValue = firstValue[tokenFirstKey];
              tokenFirstKey = tokenFirstKey.toLowerCase();
              if (tokenFirstKey in cqlOperators && tokenFirstKey !== '$token' && tokenFirstKey !== '$in') {
                op = cqlOperators[tokenFirstKey];
              } else {
                throw buildError('model.find.invalidop', tokenFirstKey);
              }

              if (tokenFirstValue instanceof Array) {
                var tokenKeys = k.split(',');
                for (var tokenIndex = 0; tokenIndex < tokenFirstValue.length; tokenIndex++) {
                  tokenKeys[tokenIndex] = tokenKeys[tokenIndex].trim();
                  var dbVal = _this6._get_db_value_expression(tokenKeys[tokenIndex], tokenFirstValue[tokenIndex]);
                  if (_.isPlainObject(dbVal) && dbVal.query_segment) {
                    tokenFirstValue[tokenIndex] = dbVal.query_segment;
                    queryParams.push(dbVal.parameter);
                  } else {
                    tokenFirstValue[tokenIndex] = dbVal;
                  }
                }
                queryRelations.push(util.format(whereTemplate, tokenKeys.join('","'), op, tokenFirstValue.toString()));
              } else {
                var _dbVal = _this6._get_db_value_expression(k, tokenFirstValue);
                if (_.isPlainObject(_dbVal) && _dbVal.query_segment) {
                  queryRelations.push(util.format(whereTemplate, k, op, _dbVal.query_segment));
                  queryParams.push(_dbVal.parameter);
                } else {
                  queryRelations.push(util.format(whereTemplate, k, op, _dbVal));
                }
              }
            }
          } else if (firstKey === '$contains') {
            var fieldtype1 = schemer.get_field_type(_this6._properties.schema, k);
            if (['map', 'list', 'set', 'frozen'].indexOf(fieldtype1) >= 0) {
              if (fieldtype1 === 'map' && _.isPlainObject(firstValue) && Object.keys(firstValue).length === 1) {
                queryRelations.push(util.format('"%s"[%s] %s %s', k, '?', '=', '?'));
                queryParams.push(Object.keys(firstValue)[0]);
                queryParams.push(firstValue[Object.keys(firstValue)[0]]);
              } else {
                queryRelations.push(util.format(whereTemplate, k, op, '?'));
                queryParams.push(firstValue);
              }
            } else {
              throw new Error('$contains operator is only valid for indexed collections');
            }
          } else if (firstKey === '$contains_key') {
            var fieldtype2 = schemer.get_field_type(_this6._properties.schema, k);
            if (['map'].indexOf(fieldtype2) >= 0) {
              queryRelations.push(util.format(whereTemplate, k, op, '?'));
              queryParams.push(firstValue);
            } else {
              throw new Error('$contains_key operator is only valid for indexed map collections');
            }
          } else {
            var _dbVal2 = _this6._get_db_value_expression(k, firstValue);
            if (_.isPlainObject(_dbVal2) && _dbVal2.query_segment) {
              queryRelations.push(util.format(whereTemplate, k, op, _dbVal2.query_segment));
              queryParams.push(_dbVal2.parameter);
            } else {
              queryRelations.push(util.format(whereTemplate, k, op, _dbVal2));
            }
          }
        } else {
          throw buildError('model.find.invalidop', firstKey);
        }
      }
    }
  });

  return {
    query: queryRelations.length > 0 ? util.format('WHERE %s', queryRelations.join(' AND ')) : '',
    params: queryParams
  };
};

BaseModel._create_find_query = function f(queryObject, options) {
  var orderKeys = [];
  var limit = null;

  Object.keys(queryObject).forEach(function (k) {
    var queryItem = queryObject[k];
    if (k.toLowerCase() === '$orderby') {
      if (!(queryItem instanceof Object)) {
        throw buildError('model.find.invalidorder');
      }
      var orderItemKeys = Object.keys(queryItem);
      if (orderItemKeys.length > 1) throw buildError('model.find.multiorder');

      var cqlOrderDirection = { $asc: 'ASC', $desc: 'DESC' };
      if (orderItemKeys[0].toLowerCase() in cqlOrderDirection) {
        var orderFields = queryItem[orderItemKeys[0]];

        if (!(orderFields instanceof Array)) orderFields = [orderFields];

        for (var i = 0; i < orderFields.length; i++) {
          orderKeys.push(util.format('"%s" %s', orderFields[i], cqlOrderDirection[orderItemKeys[0]]));
        }
      } else {
        throw buildError('model.find.invalidordertype', orderItemKeys[0]);
      }
    } else if (k.toLowerCase() === '$limit') {
      if (typeof queryItem !== 'number') throw buildError('model.find.limittype');
      limit = queryItem;
    }
  });

  var whereClause = this._create_where_clause(queryObject);

  var select = '*';
  if (options.select && _.isArray(options.select) && options.select.length > 0) {
    var selectArray = [];
    for (var i = 0; i < options.select.length; i++) {
      // separate the aggregate function and the column name if select is an aggregate function
      var selection = options.select[i].split(/[( )]/g).filter(function (e) {
        return e;
      });
      if (selection.length === 1) {
        selectArray.push(util.format('"%s"', selection[0]));
      } else if (selection.length === 2 || selection.length === 4) {
        var functionClause = util.format('%s("%s")', selection[0], selection[1]);
        if (selection[2]) functionClause += util.format(' %s', selection[2]);
        if (selection[3]) functionClause += util.format(' %s', selection[3]);

        selectArray.push(functionClause);
      } else if (selection.length === 3) {
        selectArray.push(util.format('"%s" %s %s', selection[0], selection[1], selection[2]));
      } else {
        selectArray.push('*');
      }
    }
    select = selectArray.join(',');
  }

  var query = util.format('SELECT %s %s FROM "%s" %s %s %s', options.distinct ? 'DISTINCT' : '', select, options.materialized_view ? options.materialized_view : this._properties.table_name, whereClause.query, orderKeys.length ? util.format('ORDER BY %s', orderKeys.join(', ')) : ' ', limit ? util.format('LIMIT %s', limit) : ' ');

  if (options.allow_filtering) query += ' ALLOW FILTERING;';else query += ';';

  return { query: query, params: whereClause.params };
};

BaseModel.get_table_name = function f() {
  return this._properties.table_name;
};

BaseModel.is_table_ready = function f() {
  return this._ready === true;
};

BaseModel.init = function f(options, callback) {
  if (!callback) {
    callback = options;
    options = undefined;
  }

  this._ready = true;
  callback();
};

BaseModel.syncDefinition = function f(callback) {
  var _this7 = this;

  var afterCreate = function afterCreate(err, result) {
    if (err) callback(err);else {
      _this7._ready = true;
      callback(null, result);
    }
  };

  this._create_table(afterCreate);
};

BaseModel.execute_query = function f(query, params, options, callback) {
  var _this8 = this;

  if (arguments.length === 3) {
    callback = options;
    options = { prepare: true };
  }

  this._ensure_connected(function (err) {
    if (err) {
      callback(err);
      return;
    }
    debug('executing query: %s with params: %j', query, params);
    _this8._properties.cql.execute(query, params, options, function (err1, result) {
      if (err1 && err1.code === 8704) {
        _this8._execute_definition_query(query, params, callback);
      } else {
        callback(err1, result);
      }
    });
  });
};

BaseModel.execute_eachRow = function f(query, params, options, onReadable, callback) {
  var _this9 = this;

  this._ensure_connected(function (err) {
    if (err) {
      callback(err);
      return;
    }
    debug('executing eachRow query: %s with params: %j', query, params);
    _this9._properties.cql.eachRow(query, params, options, onReadable, callback);
  });
};

BaseModel._execute_table_eachRow = function f(query, params, options, onReadable, callback) {
  var _this10 = this;

  if (this.is_table_ready()) {
    this.execute_eachRow(query, params, options, onReadable, callback);
  } else {
    this.init(function (err) {
      if (err) {
        callback(err);
        return;
      }
      _this10.execute_eachRow(query, params, options, onReadable, callback);
    });
  }
};

BaseModel.eachRow = function f(queryObject, options, onReadable, callback) {
  var _this11 = this;

  if (arguments.length === 3) {
    var cb = onReadable;
    onReadable = options;
    callback = cb;
    options = {};
  }
  if (typeof onReadable !== 'function') throw new Error('no valid onReadable function was provided');
  if (typeof callback !== 'function') throw new Error('no valid callback function was provided');

  var defaults = {
    raw: false,
    prepare: true
  };

  options = _.defaultsDeep(options, defaults);

  options.return_query = true;
  var selectQuery = this.find(queryObject, options);

  var queryOptions = { prepare: options.prepare };
  if (options.consistency) queryOptions.consistency = options.consistency;
  if (options.fetchSize) queryOptions.fetchSize = options.fetchSize;
  if (options.autoPage) queryOptions.autoPage = options.autoPage;
  if (options.hints) queryOptions.hints = options.hints;
  if (options.pageState) queryOptions.pageState = options.pageState;
  if (options.retry) queryOptions.retry = options.retry;
  if (options.serialConsistency) queryOptions.serialConsistency = options.serialConsistency;

  this._execute_table_eachRow(selectQuery.query, selectQuery.params, queryOptions, function (n, row) {
    if (!options.raw) {
      var ModelConstructor = _this11._properties.get_constructor();
      row = new ModelConstructor(row);
    }
    onReadable(n, row);
  }, function (err, result) {
    if (err) {
      callback(buildError('model.find.dberror', err));
      return;
    }
    callback(err, result);
  });
};

BaseModel.execute_stream = function f(query, params, options, onReadable, callback) {
  var _this12 = this;

  this._ensure_connected(function (err) {
    if (err) {
      callback(err);
      return;
    }
    debug('executing stream query: %s with params: %j', query, params);
    _this12._properties.cql.stream(query, params, options).on('readable', onReadable).on('end', callback);
  });
};

BaseModel._execute_table_stream = function f(query, params, options, onReadable, callback) {
  var _this13 = this;

  if (this.is_table_ready()) {
    this.execute_stream(query, params, options, onReadable, callback);
  } else {
    this.init(function (err) {
      if (err) {
        callback(err);
        return;
      }
      _this13.execute_stream(query, params, options, onReadable, callback);
    });
  }
};

BaseModel.stream = function f(queryObject, options, onReadable, callback) {
  if (arguments.length === 3) {
    var cb = onReadable;
    onReadable = options;
    callback = cb;
    options = {};
  }
  if (typeof onReadable !== 'function') throw new Error('no valid onReadable function was provided');
  if (typeof callback !== 'function') throw new Error('no valid callback function was provided');

  var defaults = {
    raw: false,
    prepare: true
  };

  options = _.defaultsDeep(options, defaults);

  options.return_query = true;
  var selectQuery = this.find(queryObject, options);

  var queryOptions = { prepare: options.prepare };
  if (options.consistency) queryOptions.consistency = options.consistency;
  if (options.fetchSize) queryOptions.fetchSize = options.fetchSize;
  if (options.autoPage) queryOptions.autoPage = options.autoPage;
  if (options.hints) queryOptions.hints = options.hints;
  if (options.pageState) queryOptions.pageState = options.pageState;
  if (options.retry) queryOptions.retry = options.retry;
  if (options.serialConsistency) queryOptions.serialConsistency = options.serialConsistency;

  var self = this;

  this._execute_table_stream(selectQuery.query, selectQuery.params, queryOptions, function f1() {
    var reader = this;
    reader.readRow = function () {
      var row = reader.read();
      if (!row) return row;
      if (!options.raw) {
        var ModelConstructor = self._properties.get_constructor();
        return new ModelConstructor(row);
      }
      return row;
    };
    onReadable(reader);
  }, function (err) {
    if (err) {
      callback(buildError('model.find.dberror', err));
      return;
    }
    callback();
  });
};

BaseModel.find = function f(queryObject, options, callback) {
  var _this14 = this;

  if (arguments.length === 2 && typeof options === 'function') {
    callback = options;
    options = {};
  }
  if (typeof callback !== 'function' && !options.return_query) {
    throw new Error('no valid callback function was provided');
  }

  var defaults = {
    raw: false,
    prepare: true
  };

  options = _.defaultsDeep(options, defaults);

  // set raw true if select is used,
  // because casting to model instances may lead to problems
  if (options.select) options.raw = true;

  var queryParams = [];

  var query = void 0;
  try {
    var findQuery = this._create_find_query(queryObject, options);
    query = findQuery.query;
    queryParams = queryParams.concat(findQuery.params);
  } catch (e) {
    if (typeof callback === 'function') {
      callback(e);
      return {};
    }
    throw e;
  }

  if (options.return_query) {
    return { query: query, params: queryParams };
  }

  var queryOptions = { prepare: options.prepare };
  if (options.consistency) queryOptions.consistency = options.consistency;
  if (options.fetchSize) queryOptions.fetchSize = options.fetchSize;
  if (options.autoPage) queryOptions.autoPage = options.autoPage;
  if (options.hints) queryOptions.hints = options.hints;
  if (options.pageState) queryOptions.pageState = options.pageState;
  if (options.retry) queryOptions.retry = options.retry;
  if (options.serialConsistency) queryOptions.serialConsistency = options.serialConsistency;

  this._execute_table_query(query, queryParams, queryOptions, function (err, results) {
    if (err) {
      callback(buildError('model.find.dberror', err));
      return;
    }
    if (!options.raw) {
      (function () {
        var ModelConstructor = _this14._properties.get_constructor();
        results = results.rows.map(function (res) {
          delete res.columns;
          return new ModelConstructor(res);
        });
        callback(null, results);
      })();
    } else {
      results = results.rows.map(function (res) {
        delete res.columns;
        return res;
      });
      callback(null, results);
    }
  });

  return {};
};

BaseModel.findOne = function f(queryObject, options, callback) {
  if (arguments.length === 2 && typeof options === 'function') {
    callback = options;
    options = {};
  }
  if (typeof callback !== 'function' && !options.return_query) {
    throw new Error('no valid callback function was provided');
  }

  queryObject.$limit = 1;

  return this.find(queryObject, options, function (err, results) {
    if (err) {
      callback(err);
      return;
    }
    if (results.length > 0) {
      callback(null, results[0]);
      return;
    }
    callback();
  });
};

BaseModel.update = function f(queryObject, updateValues, options, callback) {
  var _this15 = this;

  if (arguments.length === 3 && typeof options === 'function') {
    callback = options;
    options = {};
  }

  var schema = this._properties.schema;

  var defaults = {
    prepare: true
  };

  options = _.defaultsDeep(options, defaults);

  var queryParams = [];

  var updateClauseArray = [];

  var errorHappened = Object.keys(updateValues).some(function (key) {
    if (schema.fields[key] === undefined || schema.fields[key].virtual) return false;

    // check field value
    var fieldtype = schemer.get_field_type(schema, key);
    var fieldvalue = updateValues[key];

    if (fieldvalue === undefined) {
      fieldvalue = _this15._get_default_value(key);
      if (fieldvalue === undefined) {
        if (schema.key.indexOf(key) >= 0 || schema.key[0].indexOf(key) >= 0) {
          if (typeof callback === 'function') {
            callback(buildError('model.update.unsetkey', key));
            return true;
          }
          throw buildError('model.update.unsetkey', key);
        } else if (schema.fields[key].rule && schema.fields[key].rule.required) {
          if (typeof callback === 'function') {
            callback(buildError('model.update.unsetrequired', key));
            return true;
          }
          throw buildError('model.update.unsetrequired', key);
        } else return false;
      } else if (!schema.fields[key].rule || !schema.fields[key].rule.ignore_default) {
        // did set a default value, ignore default is not set
        if (_this15.validate(key, fieldvalue) !== true) {
          if (typeof callback === 'function') {
            callback(buildError('model.update.invaliddefaultvalue', fieldvalue, key, fieldtype));
            return true;
          }
          throw buildError('model.update.invaliddefaultvalue', fieldvalue, key, fieldtype);
        }
      }
    }

    if (fieldvalue === null || fieldvalue === cql.types.unset) {
      if (schema.key.indexOf(key) >= 0 || schema.key[0].indexOf(key) >= 0) {
        if (typeof callback === 'function') {
          callback(buildError('model.update.unsetkey', key));
          return true;
        }
        throw buildError('model.update.unsetkey', key);
      } else if (schema.fields[key].rule && schema.fields[key].rule.required) {
        if (typeof callback === 'function') {
          callback(buildError('model.update.unsetrequired', key));
          return true;
        }
        throw buildError('model.update.unsetrequired', key);
      }
    }

    try {
      var $add = false;
      var $append = false;
      var $prepend = false;
      var $replace = false;
      var $remove = false;
      if (_.isPlainObject(fieldvalue)) {
        if (fieldvalue.$add) {
          fieldvalue = fieldvalue.$add;
          $add = true;
        } else if (fieldvalue.$append) {
          fieldvalue = fieldvalue.$append;
          $append = true;
        } else if (fieldvalue.$prepend) {
          fieldvalue = fieldvalue.$prepend;
          $prepend = true;
        } else if (fieldvalue.$replace) {
          fieldvalue = fieldvalue.$replace;
          $replace = true;
        } else if (fieldvalue.$remove) {
          fieldvalue = fieldvalue.$remove;
          $remove = true;
        }
      }

      var dbVal = _this15._get_db_value_expression(key, fieldvalue);

      if (_.isPlainObject(dbVal) && dbVal.query_segment) {
        if (['map', 'list', 'set'].indexOf(fieldtype) > -1) {
          if ($add || $append) {
            dbVal.query_segment = util.format('"%s" + %s', key, dbVal.query_segment);
          } else if ($prepend) {
            if (fieldtype === 'list') dbVal.query_segment = util.format('%s + "%s"', dbVal.query_segment, key);else throw util.format('%s datatypes does not support $prepend, use $add instead', fieldtype);
          } else if ($remove) {
            dbVal.query_segment = util.format('"%s" - %s', key, dbVal.query_segment);
            if (fieldtype === 'map') dbVal.parameter = Object.keys(dbVal.parameter);
          }
        }

        if ($replace) {
          if (fieldtype === 'map') {
            updateClauseArray.push(util.format('"%s"[?]=%s', key, dbVal.query_segment));
            var replaceKeys = Object.keys(dbVal.parameter);
            var replaceValues = _.values(dbVal.parameter);
            if (replaceKeys.length === 1) {
              queryParams.push(replaceKeys[0]);
              queryParams.push(replaceValues[0]);
            } else {
              throw new Error('$replace in map does not support more than one item');
            }
          } else if (fieldtype === 'list') {
            updateClauseArray.push(util.format('"%s"[?]=%s', key, dbVal.query_segment));
            if (dbVal.parameter.length === 2) {
              queryParams.push(dbVal.parameter[0]);
              queryParams.push(dbVal.parameter[1]);
            } else {
              throw new Error('$replace in list should have exactly 2 items, first one as the index and the second one as the value');
            }
          } else {
            throw new Error(util.format('%s datatypes does not support $replace', fieldtype));
          }
        } else {
          updateClauseArray.push(util.format('"%s"=%s', key, dbVal.query_segment));
          queryParams.push(dbVal.parameter);
        }
      } else {
        updateClauseArray.push(util.format('"%s"=%s', key, dbVal));
      }
    } catch (e) {
      if (typeof callback === 'function') {
        callback(buildError('model.update.invalidvalue', fieldvalue, key));
        return true;
      }
      throw buildError('model.update.invalidvalue', fieldvalue, key);
    }
    return false;
  });

  if (errorHappened) return {};

  var query = 'UPDATE "%s"';
  var where = '';
  if (options.ttl) query += util.format(' USING TTL %s', options.ttl);
  query += ' SET %s %s';
  try {
    var whereClause = this._create_where_clause(queryObject);
    where = whereClause.query;
    queryParams = queryParams.concat(whereClause.params);
  } catch (e) {
    if (typeof callback === 'function') {
      callback(e);
      return {};
    }
    throw e;
  }
  query = util.format(query, this._properties.table_name, updateClauseArray.join(', '), where);

  if (options.conditions) {
    var _ret4 = function () {
      var updateConditionsArray = [];

      errorHappened = Object.keys(options.conditions).some(function (key) {
        try {
          var dbVal = _this15._get_db_value_expression(key, options.conditions[key]);
          if (_.isPlainObject(dbVal) && dbVal.query_segment) {
            updateConditionsArray.push(util.format('"%s"=%s', key, dbVal.query_segment));
            queryParams.push(dbVal.parameter);
          } else {
            updateConditionsArray.push(util.format('"%s"=%s', key, dbVal));
          }
        } catch (e) {
          if (typeof callback === 'function') {
            callback(buildError('model.update.invalidvalue', options.conditions[key], key));
            return true;
          }
          throw buildError('model.update.invalidvalue', options.conditions[key], key);
        }
        return false;
      });

      if (errorHappened) return {
          v: {}
        };

      query += util.format(' IF %s', updateConditionsArray.join(' AND '));
    }();

    if ((typeof _ret4 === 'undefined' ? 'undefined' : _typeof(_ret4)) === "object") return _ret4.v;
  }
  if (options.if_exists) query += ' IF EXISTS';

  query += ';';

  if (options.return_query) {
    return { query: query, params: queryParams };
  }

  var queryOptions = { prepare: options.prepare };
  if (options.consistency) queryOptions.consistency = options.consistency;
  if (options.fetchSize) queryOptions.fetchSize = options.fetchSize;
  if (options.autoPage) queryOptions.autoPage = options.autoPage;
  if (options.hints) queryOptions.hints = options.hints;
  if (options.pageState) queryOptions.pageState = options.pageState;
  if (options.retry) queryOptions.retry = options.retry;
  if (options.serialConsistency) queryOptions.serialConsistency = options.serialConsistency;

  // set dummy hook function if not present in schema
  if (typeof schema.before_update !== 'function') {
    schema.before_update = function f1(queryObj, updateVal, optionsObj, next) {
      next();
    };
  }

  if (typeof schema.after_update !== 'function') {
    schema.after_update = function f1(queryObj, updateVal, optionsObj, next) {
      next();
    };
  }

  schema.before_update(queryObject, updateValues, options, function (error) {
    if (error) {
      if (typeof callback === 'function') {
        callback(buildError('model.update.before.error', error));
        return;
      }
      throw buildError('model.update.before.error', error);
    }

    _this15._execute_table_query(query, queryParams, queryOptions, function (err, results) {
      if (typeof callback === 'function') {
        if (err) {
          callback(buildError('model.update.dberror', err));
          return;
        }
        schema.after_update(queryObject, updateValues, options, function (error1) {
          if (error1) {
            callback(buildError('model.update.after.error', error1));
            return;
          }
          callback(null, results);
        });
      } else if (err) {
        throw buildError('model.update.dberror', err);
      } else {
        schema.after_update(queryObject, updateValues, options, function (error1) {
          if (error1) {
            throw buildError('model.update.after.error', error1);
          }
        });
      }
    });
  });

  return {};
};

BaseModel.delete = function f(queryObject, options, callback) {
  var _this16 = this;

  if (arguments.length === 2 && typeof options === 'function') {
    callback = options;
    options = {};
  }

  var defaults = {
    prepare: true
  };

  options = _.defaultsDeep(options, defaults);

  var queryParams = [];

  var query = 'DELETE FROM "%s" %s;';
  var where = '';
  try {
    var whereClause = this._create_where_clause(queryObject);
    where = whereClause.query;
    queryParams = queryParams.concat(whereClause.params);
  } catch (e) {
    if (typeof callback === 'function') {
      callback(e);
      return {};
    }
    throw e;
  }

  query = util.format(query, this._properties.table_name, where);

  if (options.return_query) {
    return { query: query, params: queryParams };
  }

  var queryOptions = { prepare: options.prepare };
  if (options.consistency) queryOptions.consistency = options.consistency;
  if (options.fetchSize) queryOptions.fetchSize = options.fetchSize;
  if (options.autoPage) queryOptions.autoPage = options.autoPage;
  if (options.hints) queryOptions.hints = options.hints;
  if (options.pageState) queryOptions.pageState = options.pageState;
  if (options.retry) queryOptions.retry = options.retry;
  if (options.serialConsistency) queryOptions.serialConsistency = options.serialConsistency;

  // set dummy hook function if not present in schema
  var schema = this._properties.schema;
  if (typeof schema.before_delete !== 'function') {
    schema.before_delete = function f1(queryObj, optionsObj, next) {
      next();
    };
  }

  if (typeof schema.after_delete !== 'function') {
    schema.after_delete = function f1(queryObj, optionsObj, next) {
      next();
    };
  }

  schema.before_delete(queryObject, options, function (error) {
    if (error) {
      if (typeof callback === 'function') {
        callback(buildError('model.delete.before.error', error));
        return;
      }
      throw buildError('model.delete.before.error', error);
    }

    _this16._execute_table_query(query, queryParams, queryOptions, function (err, results) {
      if (typeof callback === 'function') {
        if (err) {
          callback(buildError('model.delete.dberror', err));
          return;
        }
        schema.after_delete(queryObject, options, function (error1) {
          if (error1) {
            callback(buildError('model.delete.after.error', error1));
            return;
          }
          callback(null, results);
        });
      } else if (err) {
        throw buildError('model.delete.dberror', err);
      } else {
        schema.after_delete(queryObject, options, function (error1) {
          if (error1) {
            throw buildError('model.delete.after.error', error1);
          }
        });
      }
    });
  });

  return {};
};

BaseModel.drop_mviews = function f(mviews, callback) {
  var _this17 = this;

  async.each(mviews, function (view, viewCallback) {
    var query = util.format('DROP MATERIALIZED VIEW IF EXISTS "%s";', view);
    _this17._execute_definition_query(query, [], viewCallback);
  }, function (err) {
    if (err) callback(err);else callback();
  });
};

BaseModel.drop_indexes = function f(indexes, callback) {
  var _this18 = this;

  async.each(indexes, function (index, indexCallback) {
    var query = util.format('DROP INDEX IF EXISTS "%s";', index);
    _this18._execute_definition_query(query, [], indexCallback);
  }, function (err) {
    if (err) callback(err);else callback();
  });
};

BaseModel.alter_table = function f(operation, fieldname, type, callback) {
  var properties = this._properties;
  var tableName = properties.table_name;

  if (operation === 'ALTER') type = util.format('TYPE %s', type);else if (operation === 'DROP') type = '';

  var query = util.format('ALTER TABLE "%s" %s "%s" %s;', tableName, operation, fieldname, type);
  this._execute_definition_query(query, [], callback);
};

BaseModel.drop_table = function f(callback) {
  var properties = this._properties;
  var tableName = properties.table_name;

  var query = util.format('DROP TABLE IF EXISTS "%s";', tableName);
  this._execute_definition_query(query, [], callback);
};

BaseModel.prototype._get_data_types = function f() {
  return cql.types;
};

BaseModel.prototype._get_default_value = function f(fieldname) {
  var properties = this.constructor._properties;
  var schema = properties.schema;

  if (_.isPlainObject(schema.fields[fieldname]) && schema.fields[fieldname].default !== undefined) {
    if (typeof schema.fields[fieldname].default === 'function') {
      return schema.fields[fieldname].default.call(this);
    }
    return schema.fields[fieldname].default;
  }
  return undefined;
};

BaseModel.prototype.validate = function f(propertyName, value) {
  value = value || this[propertyName];
  this._validators = this._validators || {};
  return this.constructor._validate(this._validators[propertyName] || [], value);
};

BaseModel.prototype.save = function fn(options, callback) {
  var _this19 = this;

  if (arguments.length === 1 && typeof options === 'function') {
    callback = options;
    options = {};
  }

  var identifiers = [];
  var values = [];
  var properties = this.constructor._properties;
  var schema = properties.schema;

  var defaults = {
    prepare: true
  };

  options = _.defaultsDeep(options, defaults);

  var queryParams = [];

  var errorHappened = Object.keys(schema.fields).some(function (f) {
    if (schema.fields[f].virtual) return false;

    // check field value
    var fieldtype = schemer.get_field_type(schema, f);
    var fieldvalue = _this19[f];

    if (fieldvalue === undefined) {
      fieldvalue = _this19._get_default_value(f);
      if (fieldvalue === undefined) {
        if (schema.key.indexOf(f) >= 0 || schema.key[0].indexOf(f) >= 0) {
          if (typeof callback === 'function') {
            callback(buildError('model.save.unsetkey', f));
            return true;
          }
          throw buildError('model.save.unsetkey', f);
        } else if (schema.fields[f].rule && schema.fields[f].rule.required) {
          if (typeof callback === 'function') {
            callback(buildError('model.save.unsetrequired', f));
            return true;
          }
          throw buildError('model.save.unsetrequired', f);
        } else return false;
      } else if (!schema.fields[f].rule || !schema.fields[f].rule.ignore_default) {
        // did set a default value, ignore default is not set
        if (_this19.validate(f, fieldvalue) !== true) {
          if (typeof callback === 'function') {
            callback(buildError('model.save.invaliddefaultvalue', fieldvalue, f, fieldtype));
            return true;
          }
          throw buildError('model.save.invaliddefaultvalue', fieldvalue, f, fieldtype);
        }
      }
    }

    if (fieldvalue === null || fieldvalue === cql.types.unset) {
      if (schema.key.indexOf(f) >= 0 || schema.key[0].indexOf(f) >= 0) {
        if (typeof callback === 'function') {
          callback(buildError('model.save.unsetkey', f));
          return true;
        }
        throw buildError('model.save.unsetkey', f);
      } else if (schema.fields[f].rule && schema.fields[f].rule.required) {
        if (typeof callback === 'function') {
          callback(buildError('model.save.unsetrequired', f));
          return true;
        }
        throw buildError('model.save.unsetrequired', f);
      }
    }

    identifiers.push(util.format('"%s"', f));

    try {
      var dbVal = _this19.constructor._get_db_value_expression(f, fieldvalue);
      if (_.isPlainObject(dbVal) && dbVal.query_segment) {
        values.push(dbVal.query_segment);
        queryParams.push(dbVal.parameter);
      } else {
        values.push(dbVal);
      }
    } catch (e) {
      if (typeof callback === 'function') {
        callback(buildError('model.save.invalidvalue', fieldvalue, f, fieldtype));
        return true;
      }
      throw buildError('model.save.invalidvalue', fieldvalue, f, fieldtype);
    }
    return false;
  });

  if (errorHappened) return {};

  var query = util.format('INSERT INTO "%s" ( %s ) VALUES ( %s )', properties.table_name, identifiers.join(' , '), values.join(' , '));

  if (options.if_not_exist) query += ' IF NOT EXISTS';
  if (options.ttl) query += util.format(' USING TTL %s', options.ttl);

  query += ';';

  if (options.return_query) {
    return { query: query, params: queryParams };
  }

  var queryOptions = { prepare: options.prepare };
  if (options.consistency) queryOptions.consistency = options.consistency;
  if (options.fetchSize) queryOptions.fetchSize = options.fetchSize;
  if (options.autoPage) queryOptions.autoPage = options.autoPage;
  if (options.hints) queryOptions.hints = options.hints;
  if (options.pageState) queryOptions.pageState = options.pageState;
  if (options.retry) queryOptions.retry = options.retry;
  if (options.serialConsistency) queryOptions.serialConsistency = options.serialConsistency;

  // set dummy hook function if not present in schema
  if (typeof schema.before_save !== 'function') {
    schema.before_save = function f(instance, option, next) {
      next();
    };
  }

  if (typeof schema.after_save !== 'function') {
    schema.after_save = function f(instance, option, next) {
      next();
    };
  }

  schema.before_save(this, options, function (error) {
    if (error) {
      if (typeof callback === 'function') {
        callback(buildError('model.save.before.error', error));
        return;
      }
      throw buildError('model.save.before.error', error);
    }

    _this19.constructor._execute_table_query(query, queryParams, queryOptions, function (err, result) {
      if (typeof callback === 'function') {
        if (err) {
          callback(buildError('model.save.dberror', err));
          return;
        }
        schema.after_save(_this19, options, function (error1) {
          if (error1) {
            callback(buildError('model.save.after.error', error1));
            return;
          }
          callback(null, result);
        });
      } else if (err) {
        throw buildError('model.save.dberror', err);
      } else {
        schema.after_save(_this19, options, function (error1) {
          if (error1) {
            throw buildError('model.save.after.error', error1);
          }
        });
      }
    });
  });

  return {};
};

BaseModel.prototype.delete = function f(options, callback) {
  if (arguments.length === 1 && typeof options === 'function') {
    callback = options;
    options = {};
  }

  var schema = this.constructor._properties.schema;
  var deleteQuery = {};

  for (var i = 0; i < schema.key.length; i++) {
    var fieldKey = schema.key[i];
    if (fieldKey instanceof Array) {
      for (var j = 0; j < fieldKey.length; j++) {
        deleteQuery[fieldKey[j]] = this[fieldKey[j]];
      }
    } else {
      deleteQuery[fieldKey] = this[fieldKey];
    }
  }

  return this.constructor.delete(deleteQuery, options, callback);
};

BaseModel.prototype.toJSON = function toJSON() {
  var _this20 = this;

  var object = {};
  var schema = this.constructor._properties.schema;

  Object.keys(schema.fields).forEach(function (field) {
    object[field] = _this20[field];
  });

  return object;
};

module.exports = BaseModel;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vcm0vYmFzZV9tb2RlbC5qcyJdLCJuYW1lcyI6WyJ1dGlsIiwicmVxdWlyZSIsImNxbCIsImFzeW5jIiwiXyIsImRlZXBEaWZmIiwiZGlmZiIsInJlYWRsaW5lU3luYyIsIm9iamVjdEhhc2giLCJkZWJ1ZyIsImJ1aWxkRXJyb3IiLCJzY2hlbWVyIiwiVFlQRV9NQVAiLCJjaGVja0RCVGFibGVOYW1lIiwib2JqIiwidGVzdCIsIkJhc2VNb2RlbCIsImYiLCJpbnN0YW5jZVZhbHVlcyIsImZpZWxkVmFsdWVzIiwiZmllbGRzIiwiY29uc3RydWN0b3IiLCJfcHJvcGVydGllcyIsInNjaGVtYSIsImRlZmF1bHRTZXR0ZXIiLCJmMSIsInByb3BOYW1lIiwibmV3VmFsdWUiLCJkZWZhdWx0R2V0dGVyIiwiX3ZhbGlkYXRvcnMiLCJmaWVsZHNLZXlzIiwiT2JqZWN0Iiwia2V5cyIsImkiLCJsZW4iLCJsZW5ndGgiLCJwcm9wZXJ0eU5hbWUiLCJmaWVsZCIsIl9nZXRfdmFsaWRhdG9ycyIsInNldHRlciIsImJpbmQiLCJnZXR0ZXIiLCJ2aXJ0dWFsIiwic2V0IiwiZ2V0IiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJkZWZpbmVQcm9wZXJ0eSIsIm5hbWUiLCJfc2V0X3Byb3BlcnRpZXMiLCJwcm9wZXJ0aWVzIiwidGFibGVOYW1lIiwidGFibGVfbmFtZSIsInF1YWxpZmllZFRhYmxlTmFtZSIsImZvcm1hdCIsImtleXNwYWNlIiwicXVhbGlmaWVkX3RhYmxlX25hbWUiLCJfdmFsaWRhdGUiLCJ2YWxpZGF0b3JzIiwidmFsdWUiLCJpc1BsYWluT2JqZWN0IiwiJGRiX2Z1bmN0aW9uIiwidiIsInZhbGlkYXRvciIsIm1lc3NhZ2UiLCJmaWVsZG5hbWUiLCJnZW5lcmljVmFsaWRhdG9yTWVzc2FnZUZ1bmMiLCJmaWVsZHR5cGUiLCJnZXRfZmllbGRfdHlwZSIsInR5cGVGaWVsZFZhbGlkYXRvciIsImdlbmVyaWNfdHlwZV92YWxpZGF0b3IiLCJwdXNoIiwicnVsZSIsIkVycm9yIiwiZmllbGRUeXBlIiwiX2Fza19jb25maXJtYXRpb24iLCJwZXJtaXNzaW9uIiwiZGlzYWJsZVRUWUNvbmZpcm1hdGlvbiIsInF1ZXN0aW9uIiwiX2Vuc3VyZV9jb25uZWN0ZWQiLCJjYWxsYmFjayIsImNvbm5lY3QiLCJfZXhlY3V0ZV9kZWZpbml0aW9uX3F1ZXJ5IiwicXVlcnkiLCJwYXJhbXMiLCJlcnIiLCJjb25uIiwiZGVmaW5lX2Nvbm5lY3Rpb24iLCJleGVjdXRlIiwicHJlcGFyZSIsImZldGNoU2l6ZSIsIl9leGVjdXRlX2JhdGNoIiwicXVlcmllcyIsIm9wdGlvbnMiLCJiYXRjaCIsImV4ZWN1dGVfYmF0Y2giLCJhcmd1bWVudHMiLCJnZXRfY3FsX2NsaWVudCIsIl9jcmVhdGVfdGFibGUiLCJtb2RlbFNjaGVtYSIsImRyb3BUYWJsZU9uU2NoZW1hQ2hhbmdlIiwibWlncmF0aW9uIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwiX2dldF9kYl90YWJsZV9zY2hlbWEiLCJkYlNjaGVtYSIsImFmdGVyQ3VzdG9tSW5kZXgiLCJlcnIxIiwibWF0ZXJpYWxpemVkX3ZpZXdzIiwiZWFjaFNlcmllcyIsInZpZXdOYW1lIiwibmV4dCIsIm1hdFZpZXdRdWVyeSIsIl9jcmVhdGVfbWF0ZXJpYWxpemVkX3ZpZXdfcXVlcnkiLCJlcnIyIiwicmVzdWx0IiwiYWZ0ZXJEQkluZGV4IiwiY3VzdG9tX2luZGV4ZXMiLCJpZHgiLCJfY3JlYXRlX2N1c3RvbV9pbmRleF9xdWVyeSIsImN1c3RvbV9pbmRleCIsImN1c3RvbUluZGV4UXVlcnkiLCJhZnRlckRCQ3JlYXRlIiwiaW5kZXhlcyIsIkFycmF5IiwiX2NyZWF0ZV9pbmRleF9xdWVyeSIsIm5vcm1hbGl6ZWRNb2RlbFNjaGVtYSIsIm5vcm1hbGl6ZV9tb2RlbF9zY2hlbWEiLCJub3JtYWxpemVkREJTY2hlbWEiLCJpc0VxdWFsIiwiZHJvcFJlY3JlYXRlVGFibGUiLCJ0b0xvd2VyQ2FzZSIsIm12aWV3cyIsImRyb3BfbXZpZXdzIiwiZHJvcF90YWJsZSIsImNyZWF0ZVRhYmxlUXVlcnkiLCJfY3JlYXRlX3RhYmxlX3F1ZXJ5IiwiYWZ0ZXJEQkFsdGVyIiwiYWRkZWRJbmRleGVzIiwiZGlmZmVyZW5jZSIsInJlbW92ZWRJbmRleGVzIiwicmVtb3ZlZEluZGV4TmFtZXMiLCJmb3JFYWNoIiwicmVtb3ZlZEluZGV4IiwiaW5kZXhfbmFtZXMiLCJhZGRlZEN1c3RvbUluZGV4ZXMiLCJmaWx0ZXIiLCJmaW5kIiwicmVtb3ZlZEN1c3RvbUluZGV4ZXMiLCJhZGRlZE1hdGVyaWFsaXplZFZpZXdzIiwicmVtb3ZlZE1hdGVyaWFsaXplZFZpZXdzIiwiZHJvcF9pbmRleGVzIiwiZXJyMyIsImVycjQiLCJlcnI1IiwiZXJyNiIsImFsdGVyREJUYWJsZSIsImRpZmZlcmVuY2VzIiwiZmllbGROYW1lIiwicGF0aCIsImFsdGVyRmllbGRUeXBlIiwiYWx0ZXJfdGFibGUiLCJyaHMiLCJhbHRlckFkZEZpZWxkIiwidHlwZSIsInR5cGVEZWYiLCJhbHRlclJlbW92ZUZpZWxkIiwibmV4dENhbGxiYWNrIiwiZGVwZW5kZW50SW5kZXhlcyIsInB1bGxJbmRleGVzIiwiZGJJbmRleCIsImluZGV4U3BsaXQiLCJzcGxpdCIsImluZGV4RmllbGROYW1lIiwicHVsbEFsbCIsInB1bGxDdXN0b21JbmRleGVzIiwib24iLCJkZXBlbmRlbnRWaWV3cyIsImRiVmlld05hbWUiLCJzZWxlY3QiLCJpbmRleE9mIiwia2V5Iiwia2luZCIsImxocyIsImNsdXN0ZXJpbmdfb3JkZXIiLCJyb3dzIiwiayIsInNlZ21lbnQiLCJzdGF0aWMiLCJwYXJ0aXRpb25LZXkiLCJjbHVzdGVyaW5nS2V5Iiwic2xpY2UiLCJjbHVzdGVyaW5nT3JkZXIiLCJjbHVzdGVyaW5nT3JkZXJRdWVyeSIsInRvU3RyaW5nIiwibWFwIiwiam9pbiIsInZpZXdTY2hlbWEiLCJ3aGVyZUNsYXVzZSIsImluZGV4TmFtZSIsImluZGV4RXhwcmVzc2lvbiIsInJlcGxhY2UiLCJjdXN0b21JbmRleCIsInVzaW5nIiwic2VsZiIsImV4ZWN1dGVfcXVlcnkiLCJyZXN1bHRDb2x1bW5zIiwidHlwZU1hcHMiLCJzdGF0aWNNYXBzIiwiciIsInJvdyIsImNvbHVtbl9uYW1lIiwiZXh0cmFjdF90eXBlIiwidHlwZU1hcERlZiIsImV4dHJhY3RfdHlwZURlZiIsInBvc2l0aW9uIiwicmVzdWx0SW5kZXhlcyIsImluZGV4X25hbWUiLCJpbmRleE9wdGlvbnMiLCJ0YXJnZXQiLCJjbGFzc19uYW1lIiwiY3VzdG9tSW5kZXhPYmplY3QiLCJyZXN1bHRWaWV3cyIsImJhc2VfdGFibGVfbmFtZSIsInZpZXdfbmFtZSIsInJlc3VsdE1hdFZpZXdzIiwiX2V4ZWN1dGVfdGFibGVfcXVlcnkiLCJkb0V4ZWN1dGVRdWVyeSIsImRvcXVlcnkiLCJkb2NhbGxiYWNrIiwiaXNfdGFibGVfcmVhZHkiLCJpbml0IiwiX2dldF9kYl92YWx1ZV9leHByZXNzaW9uIiwiZmllbGR2YWx1ZSIsInR5cGVzIiwidW5zZXQiLCJxdWVyeV9zZWdtZW50IiwicGFyYW1ldGVyIiwidmFsIiwiZGJWYWwiLCJjb3VudGVyUXVlcnlTZWdtZW50IiwiTWF0aCIsImFicyIsIl9jcmVhdGVfd2hlcmVfY2xhdXNlIiwicXVlcnlPYmplY3QiLCJxdWVyeVJlbGF0aW9ucyIsInF1ZXJ5UGFyYW1zIiwiaW5kZXgiLCJ3aGVyZU9iamVjdCIsImZrIiwiZmllbGRSZWxhdGlvbiIsImNxbE9wZXJhdG9ycyIsIiRlcSIsIiRndCIsIiRsdCIsIiRndGUiLCIkbHRlIiwiJGluIiwiJGxpa2UiLCIkdG9rZW4iLCIkY29udGFpbnMiLCIkY29udGFpbnNfa2V5IiwidmFsaWRLZXlzIiwiZmllbGRSZWxhdGlvbktleXMiLCJyZWxLZXlzIiwicmsiLCJmaXJzdEtleSIsImZpcnN0VmFsdWUiLCJvcCIsIndoZXJlVGVtcGxhdGUiLCJ0b2tlblJlbEtleXMiLCJ0b2tlblJLIiwidG9rZW5GaXJzdEtleSIsInRva2VuRmlyc3RWYWx1ZSIsInRva2VuS2V5cyIsInRva2VuSW5kZXgiLCJ0cmltIiwiZmllbGR0eXBlMSIsImZpZWxkdHlwZTIiLCJfY3JlYXRlX2ZpbmRfcXVlcnkiLCJvcmRlcktleXMiLCJsaW1pdCIsInF1ZXJ5SXRlbSIsIm9yZGVySXRlbUtleXMiLCJjcWxPcmRlckRpcmVjdGlvbiIsIiRhc2MiLCIkZGVzYyIsIm9yZGVyRmllbGRzIiwiaXNBcnJheSIsInNlbGVjdEFycmF5Iiwic2VsZWN0aW9uIiwiZSIsImZ1bmN0aW9uQ2xhdXNlIiwiZGlzdGluY3QiLCJtYXRlcmlhbGl6ZWRfdmlldyIsImFsbG93X2ZpbHRlcmluZyIsImdldF90YWJsZV9uYW1lIiwiX3JlYWR5IiwidW5kZWZpbmVkIiwic3luY0RlZmluaXRpb24iLCJhZnRlckNyZWF0ZSIsImNvZGUiLCJleGVjdXRlX2VhY2hSb3ciLCJvblJlYWRhYmxlIiwiZWFjaFJvdyIsIl9leGVjdXRlX3RhYmxlX2VhY2hSb3ciLCJjYiIsImRlZmF1bHRzIiwicmF3IiwiZGVmYXVsdHNEZWVwIiwicmV0dXJuX3F1ZXJ5Iiwic2VsZWN0UXVlcnkiLCJxdWVyeU9wdGlvbnMiLCJjb25zaXN0ZW5jeSIsImF1dG9QYWdlIiwiaGludHMiLCJwYWdlU3RhdGUiLCJyZXRyeSIsInNlcmlhbENvbnNpc3RlbmN5IiwibiIsIk1vZGVsQ29uc3RydWN0b3IiLCJnZXRfY29uc3RydWN0b3IiLCJleGVjdXRlX3N0cmVhbSIsInN0cmVhbSIsIl9leGVjdXRlX3RhYmxlX3N0cmVhbSIsInJlYWRlciIsInJlYWRSb3ciLCJyZWFkIiwiZmluZFF1ZXJ5IiwiY29uY2F0IiwicmVzdWx0cyIsInJlcyIsImNvbHVtbnMiLCJmaW5kT25lIiwiJGxpbWl0IiwidXBkYXRlIiwidXBkYXRlVmFsdWVzIiwidXBkYXRlQ2xhdXNlQXJyYXkiLCJlcnJvckhhcHBlbmVkIiwic29tZSIsIl9nZXRfZGVmYXVsdF92YWx1ZSIsInJlcXVpcmVkIiwiaWdub3JlX2RlZmF1bHQiLCJ2YWxpZGF0ZSIsIiRhZGQiLCIkYXBwZW5kIiwiJHByZXBlbmQiLCIkcmVwbGFjZSIsIiRyZW1vdmUiLCJyZXBsYWNlS2V5cyIsInJlcGxhY2VWYWx1ZXMiLCJ2YWx1ZXMiLCJ3aGVyZSIsInR0bCIsImNvbmRpdGlvbnMiLCJ1cGRhdGVDb25kaXRpb25zQXJyYXkiLCJpZl9leGlzdHMiLCJiZWZvcmVfdXBkYXRlIiwicXVlcnlPYmoiLCJ1cGRhdGVWYWwiLCJvcHRpb25zT2JqIiwiYWZ0ZXJfdXBkYXRlIiwiZXJyb3IiLCJlcnJvcjEiLCJkZWxldGUiLCJiZWZvcmVfZGVsZXRlIiwiYWZ0ZXJfZGVsZXRlIiwiZWFjaCIsInZpZXciLCJ2aWV3Q2FsbGJhY2siLCJpbmRleENhbGxiYWNrIiwib3BlcmF0aW9uIiwicHJvdG90eXBlIiwiX2dldF9kYXRhX3R5cGVzIiwiZGVmYXVsdCIsImNhbGwiLCJzYXZlIiwiZm4iLCJpZGVudGlmaWVycyIsImlmX25vdF9leGlzdCIsImJlZm9yZV9zYXZlIiwiaW5zdGFuY2UiLCJvcHRpb24iLCJhZnRlcl9zYXZlIiwiZGVsZXRlUXVlcnkiLCJmaWVsZEtleSIsImoiLCJ0b0pTT04iLCJvYmplY3QiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUEsSUFBTUEsT0FBT0MsUUFBUSxNQUFSLENBQWI7QUFDQSxJQUFNQyxNQUFNRCxRQUFRLFlBQVIsQ0FBWjtBQUNBLElBQU1FLFFBQVFGLFFBQVEsT0FBUixDQUFkO0FBQ0EsSUFBTUcsSUFBSUgsUUFBUSxRQUFSLENBQVY7QUFDQSxJQUFNSSxXQUFXSixRQUFRLFdBQVIsRUFBcUJLLElBQXRDO0FBQ0EsSUFBTUMsZUFBZU4sUUFBUSxlQUFSLENBQXJCO0FBQ0EsSUFBTU8sYUFBYVAsUUFBUSxhQUFSLENBQW5CO0FBQ0EsSUFBTVEsUUFBUVIsUUFBUSxPQUFSLEVBQWlCLG1CQUFqQixDQUFkOztBQUVBLElBQU1TLGFBQWFULFFBQVEsbUJBQVIsQ0FBbkI7QUFDQSxJQUFNVSxVQUFVVixRQUFRLGtCQUFSLENBQWhCOztBQUVBLElBQU1XLFdBQVdYLFFBQVEsbUJBQVIs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ZW50IjpbImNvbnN0IHV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG5jb25zdCBjcWwgPSByZXF1aXJlKCdkc2UtZHJpdmVyJyk7XG5jb25zdCBhc3luYyA9IHJlcXVpcmUoJ2FzeW5jJyk7XG5jb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5jb25zdCBkZWVwRGlmZiA9IHJlcXVpcmUoJ2RlZXAtZGlmZicpLmRpZmY7XG5jb25zdCByZWFkbGluZVN5bmMgPSByZXF1aXJlKCdyZWFkbGluZS1zeW5jJyk7XG5jb25zdCBvYmplY3RIYXNoID0gcmVxdWlyZSgnb2JqZWN0LWhhc2gnKTtcbmNvbnN0IGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnZXhwcmVzcy1jYXNzYW5kcmEnKTtcblxuY29uc3QgYnVpbGRFcnJvciA9IHJlcXVpcmUoJy4vYXBvbGxvX2Vycm9yLmpzJyk7XG5jb25zdCBzY2hlbWVyID0gcmVxdWlyZSgnLi9hcG9sbG9fc2NoZW1lcicpO1xuXG5jb25zdCBUWVBFX01BUCA9IHJlcXVpcmUoJy4vY2Fzc2FuZHJhX3R5cGVzJyk7XG5cbmNvbnN0IGNoZWNrREJUYWJsZU5hbWUgPSAob2JqKSA9PiAoKHR5cGVvZiBvYmogPT09ICdzdHJpbmcnICYmIC9eW2EtekEtWl0rW2EtekEtWjAtOV9dKi8udGVzdChvYmopKSk7XG5cbmNvbnN0IEJhc2VNb2RlbCA9IGZ1bmN0aW9uIGYoaW5zdGFuY2VWYWx1ZXMpIHtcbiAgaW5zdGFuY2VWYWx1ZXMgPSBpbnN0YW5jZVZhbHVlcyB8fCB7fTtcbiAgY29uc3QgZmllbGRWYWx1ZXMgPSB7fTtcbiAgY29uc3QgZmllbGRzID0gdGhpcy5jb25zdHJ1Y3Rvci5fcHJvcGVydGllcy5zY2hlbWEuZmllbGRzO1xuXG4gIGNvbnN0IGRlZmF1bHRTZXR0ZXIgPSBmdW5jdGlvbiBmMShwcm9wTmFtZSwgbmV3VmFsdWUpIHtcbiAgICB0aGlzW3Byb3BOYW1lXSA9IG5ld1ZhbHVlO1xuICB9O1xuXG4gIGNvbnN0IGRlZmF1bHRHZXR0ZXIgPSBmdW5jdGlvbiBmMShwcm9wTmFtZSkge1xuICAgIHJldHVybiB0aGlzW3Byb3BOYW1lXTtcbiAgfTtcblxuICB0aGlzLl92YWxpZGF0b3JzID0ge307XG5cbiAgZm9yIChsZXQgZmllbGRzS2V5cyA9IE9iamVjdC5rZXlzKGZpZWxkcyksIGkgPSAwLCBsZW4gPSBmaWVsZHNLZXlzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgY29uc3QgcHJvcGVydHlOYW1lID0gZmllbGRzS2V5c1tpXTtcbiAgICBjb25zdCBmaWVsZCA9IGZpZWxkc1tmaWVsZHNLZXlzW2ldXTtcblxuICAgIHRoaXMuX3ZhbGlkYXRvcnNbcHJvcGVydHlOYW1lXSA9IHRoaXMuY29uc3RydWN0b3IuX2dldF92YWxpZGF0b3JzKHByb3BlcnR5TmFtZSk7XG5cbiAgICBsZXQgc2V0dGVyID0gZGVmYXVsdFNldHRlci5iaW5kKGZpZWxkVmFsdWVzLCBwcm9wZXJ0eU5hbWUpO1xuICAgIGxldCBnZXR0ZXIgPSBkZWZhdWx0R2V0dGVyLmJpbmQoZmllbGRWYWx1ZXMsIHByb3BlcnR5TmFtZSk7XG5cbiAgICBpZiAoZmllbGQudmlydHVhbCAmJiB0eXBlb2YgZmllbGQudmlydHVhbC5zZXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHNldHRlciA9IGZpZWxkLnZpcnR1YWwuc2V0LmJpbmQoZmllbGRWYWx1ZXMpO1xuICAgIH1cblxuICAgIGlmIChmaWVsZC52aXJ0dWFsICYmIHR5cGVvZiBmaWVsZC52aXJ0dWFsLmdldCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgZ2V0dGVyID0gZmllbGQudmlydHVhbC5nZXQuYmluZChmaWVsZFZhbHVlcyk7XG4gICAgfVxuXG4gICAgY29uc3QgZGVzY3JpcHRvciA9IHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBzZXQ6IHNldHRlcixcbiAgICAgIGdldDogZ2V0dGVyLFxuICAgIH07XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgcHJvcGVydHlOYW1lLCBkZXNjcmlwdG9yKTtcbiAgICBpZiAoIWZpZWxkLnZpcnR1YWwpIHtcbiAgICAgIHRoaXNbcHJvcGVydHlOYW1lXSA9IGluc3RhbmNlVmFsdWVzW3Byb3BlcnR5TmFtZV07XG4gICAgfVxuICB9XG59O1xuXG5CYXNlTW9kZWwuX3Byb3BlcnRpZXMgPSB7XG4gIG5hbWU6IG51bGwsXG4gIHNjaGVtYTogbnVsbCxcbn07XG5cbkJhc2VNb2RlbC5fc2V0X3Byb3BlcnRpZXMgPSBmdW5jdGlvbiBmKHByb3BlcnRpZXMpIHtcbiAgY29uc3Qgc2NoZW1hID0gcHJvcGVydGllcy5zY2hlbWE7XG4gIGNvbnN0IHRhYmxlTmFtZSA9IHNjaGVtYS50YWJsZV9uYW1lIHx8IHByb3BlcnRpZXMubmFtZTtcblxuICBpZiAoIWNoZWNrREJUYWJsZU5hbWUodGFibGVOYW1lKSkge1xuICAgIHRocm93IChidWlsZEVycm9yKCdtb2RlbC50YWJsZWNyZWF0aW9uLmludmFsaWRuYW1lJywgdGFibGVOYW1lKSk7XG4gIH1cblxuICBjb25zdCBxdWFsaWZpZWRUYWJsZU5hbWUgPSB1dGlsLmZvcm1hdCgnXCIlc1wiLlwiJXNcIicsIHByb3BlcnRpZXMua2V5c3BhY2UsIHRhYmxlTmFtZSk7XG5cbiAgdGhpcy5fcHJvcGVydGllcyA9IHByb3BlcnRpZXM7XG4gIHRoaXMuX3Byb3BlcnRpZXMudGFibGVfbmFtZSA9IHRhYmxlTmFtZTtcbiAgdGhpcy5fcHJvcGVydGllcy5xdWFsaWZpZWRfdGFibGVfbmFtZSA9IHF1YWxpZmllZFRhYmxlTmFtZTtcbn07XG5cbkJhc2VNb2RlbC5fdmFsaWRhdGUgPSBmdW5jdGlvbiBmKHZhbGlkYXRvcnMsIHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PSBudWxsIHx8IChfLmlzUGxhaW5PYmplY3QodmFsdWUpICYmIHZhbHVlLiRkYl9mdW5jdGlvbikpIHJldHVybiB0cnVlO1xuXG4gIGZvciAobGV0IHYgPSAwOyB2IDwgdmFsaWRhdG9ycy5sZW5ndGg7IHYrKykge1xuICAgIGlmICghdmFsaWRhdG9yc1t2XS52YWxpZGF0b3IodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsaWRhdG9yc1t2XS5tZXNzYWdlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbkJhc2VNb2RlbC5fZ2V0X3ZhbGlkYXRvcnMgPSBmdW5jdGlvbiBmKGZpZWxkbmFtZSkge1xuICBjb25zdCBnZW5lcmljVmFsaWRhdG9yTWVzc2FnZUZ1bmMgPSAodmFsdWUsIHByb3BOYW1lLCBmaWVsZHR5cGUpID0+IChcbiAgICB1dGlsLmZvcm1hdCgnSW52YWxpZCBWYWx1ZTogXCIlc1wiIGZvciBGaWVsZDogJXMgKFR5cGU6ICVzKScsIHZhbHVlLCBwcm9wTmFtZSwgZmllbGR0eXBlKVxuICApO1xuICBjb25zdCBmaWVsZHR5cGUgPSBzY2hlbWVyLmdldF9maWVsZF90eXBlKHRoaXMuX3Byb3BlcnRpZXMuc2NoZW1hLCBmaWVsZG5hbWUpO1xuXG4gIGNvbnN0IHZhbGlkYXRvcnMgPSBbXTtcbiAgY29uc3QgdHlwZUZpZWxkVmFsaWRhdG9yID0gVFlQRV9NQVAuZ2VuZXJpY190eXBlX3ZhbGlkYXRvcihmaWVsZHR5cGUpO1xuXG4gIGlmICh0eXBlRmllbGRWYWxpZGF0b3IpIHZhbGlkYXRvcnMucHVzaCh0eXBlRmllbGRWYWxpZGF0b3IpO1xuXG4gIGNvbnN0IGZpZWxkID0gdGhpcy5fcHJvcGVydGllcy5zY2hlbWEuZmllbGRzW2ZpZWxkbmFtZV07XG4gIGlmICh0eXBlb2YgZmllbGQucnVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAodHlwZW9mIGZpZWxkLnJ1bGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGZpZWxkLnJ1bGUgPSB7XG4gICAgICAgIHZhbGlkYXRvcjogZmllbGQucnVsZSxcbiAgICAgICAgbWVzc2FnZTogZ2VuZXJpY1ZhbGlkYXRvck1lc3NhZ2VGdW5jLFxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCFfLmlzUGxhaW5PYmplY3QoZmllbGQucnVsZSkgfHwgdHlwZW9mIGZpZWxkLnJ1bGUudmFsaWRhdG9yID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aHJvdyAobmV3IEVycm9yKCdJbnZhbGlkIHZhbGlkYXRvcicpKTtcbiAgICAgIH1cbiAgICAgIGlmICghZmllbGQucnVsZS5tZXNzYWdlKSB7XG4gICAgICAgIGZpZWxkLnJ1bGUubWVzc2FnZSA9IGdlbmVyaWNWYWxpZGF0b3JNZXNzYWdlRnVuYztcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGZpZWxkLnJ1bGUubWVzc2FnZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZmllbGQucnVsZS5tZXNzYWdlID0gZnVuY3Rpb24gZjEobWVzc2FnZSwgdmFsdWUsIHByb3BOYW1lLCBmaWVsZFR5cGUpIHtcbiAgICAgICAgICByZXR1cm4gdXRpbC5mb3JtYXQobWVzc2FnZSwgdmFsdWUsIHByb3BOYW1lLCBmaWVsZFR5cGUpO1xuICAgICAgICB9LmJpbmQobnVsbCwgZmllbGQucnVsZS5tZXNzYWdlKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGZpZWxkLnJ1bGUubWVzc2FnZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyAobmV3IEVycm9yKCdJbnZhbGlkIHZhbGlkYXRvciBtZXNzYWdlJykpO1xuICAgICAgfVxuICAgIH1cbiAgICB2YWxpZGF0b3JzLnB1c2goZmllbGQucnVsZSk7XG4gIH1cblxuICByZXR1cm4gdmFsaWRhdG9ycztcbn07XG5cbkJhc2VNb2RlbC5fYXNrX2NvbmZpcm1hdGlvbiA9IGZ1bmN0aW9uIGYobWVzc2FnZSkge1xuICBsZXQgcGVybWlzc2lvbiA9ICd5JztcbiAgaWYgKCF0aGlzLl9wcm9wZXJ0aWVzLmRpc2FibGVUVFlDb25maXJtYXRpb24pIHtcbiAgICBwZXJtaXNzaW9uID0gcmVhZGxpbmVTeW5jLnF1ZXN0aW9uKG1lc3NhZ2UpO1xuICB9XG4gIHJldHVybiBwZXJtaXNzaW9uO1xufTtcblxuQmFzZU1vZGVsLl9lbnN1cmVfY29ubmVjdGVkID0gZnVuY3Rpb24gZihjYWxsYmFjaykge1xuICBpZiAoIXRoaXMuX3Byb3BlcnRpZXMuY3FsKSB7XG4gICAgdGhpcy5fcHJvcGVydGllcy5jb25uZWN0KGNhbGxiYWNrKTtcbiAgfSBlbHNlIHtcbiAgICBjYWxsYmFjaygpO1xuICB9XG59O1xuXG5CYXNlTW9kZWwuX2V4ZWN1dGVfZGVmaW5pdGlvbl9xdWVyeSA9IGZ1bmN0aW9uIGYocXVlcnksIHBhcmFtcywgY2FsbGJhY2spIHtcbiAgdGhpcy5fZW5zdXJlX2Nvbm5lY3RlZCgoZXJyKSA9PiB7XG4gICAgaWYgKGVycikge1xuICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZGVidWcoJ2V4ZWN1dGluZyBkZWZpbml0aW9uIHF1ZXJ5OiAlcyB3aXRoIHBhcmFtczogJWonLCBxdWVyeSwgcGFyYW1zKTtcbiAgICBjb25zdCBwcm9wZXJ0aWVzID0gdGhpcy5fcHJvcGVydGllcztcbiAgICBjb25zdCBjb25uID0gcHJvcGVydGllcy5kZWZpbmVfY29ubmVjdGlvbjtcbiAgICBjb25uLmV4ZWN1dGUocXVlcnksIHBhcmFtcywgeyBwcmVwYXJlOiBmYWxzZSwgZmV0Y2hTaXplOiAwIH0sIGNhbGxiYWNrKTtcbiAgfSk7XG59O1xuXG5CYXNlTW9kZWwuX2V4ZWN1dGVfYmF0Y2ggPSBmdW5jdGlvbiBmKHF1ZXJpZXMsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIHRoaXMuX2Vuc3VyZV9jb25uZWN0ZWQoKGVycikgPT4ge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGRlYnVnKCdleGVjdXRpbmcgYmF0Y2ggcXVlcmllczogJWonLCBxdWVyaWVzKTtcbiAgICB0aGlzLl9wcm9wZXJ0aWVzLmNxbC5iYXRjaChxdWVyaWVzLCBvcHRpb25zLCBjYWxsYmFjayk7XG4gIH0pO1xufTtcblxuQmFzZU1vZGVsLmV4ZWN1dGVfYmF0Y2ggPSBmdW5jdGlvbiBmKHF1ZXJpZXMsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgIG9wdGlvbnMgPSB7IHByZXBhcmU6IHRydWUgfTtcbiAgfVxuICB0aGlzLl9leGVjdXRlX2JhdGNoKHF1ZXJpZXMsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbn07XG5cbkJhc2VNb2RlbC5nZXRfY3FsX2NsaWVudCA9IGZ1bmN0aW9uIGYoY2FsbGJhY2spIHtcbiAgdGhpcy5fZW5zdXJlX2Nvbm5lY3RlZCgoZXJyKSA9PiB7XG4gICAgaWYgKGVycikge1xuICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2FsbGJhY2sobnVsbCwgdGhpcy5fcHJvcGVydGllcy5jcWwpO1xuICB9KTtcbn07XG5cbkJhc2VNb2RlbC5fY3JlYXRlX3RhYmxlID0gZnVuY3Rpb24gZihjYWxsYmFjaykge1xuICBjb25zdCBwcm9wZXJ0aWVzID0gdGhpcy5fcHJvcGVydGllcztcbiAgY29uc3QgdGFibGVOYW1lID0gcHJvcGVydGllcy50YWJsZV9uYW1lO1xuICBjb25zdCBtb2RlbFNjaGVtYSA9IHByb3BlcnRpZXMuc2NoZW1hO1xuICBjb25zdCBkcm9wVGFibGVPblNjaGVtYUNoYW5nZSA9IHByb3BlcnRpZXMuZHJvcFRhYmxlT25TY2hlbWFDaGFuZ2U7XG4gIGxldCBtaWdyYXRpb24gPSBwcm9wZXJ0aWVzLm1pZ3JhdGlvbjtcblxuICAvLyBiYWNrd2FyZHMgY29tcGF0aWJsZSBjaGFuZ2UsIGRyb3BUYWJsZU9uU2NoZW1hQ2hhbmdlIHdpbGwgd29yayBsaWtlIG1pZ3JhdGlvbjogJ2Ryb3AnXG4gIGlmICghbWlncmF0aW9uKSB7XG4gICAgaWYgKGRyb3BUYWJsZU9uU2NoZW1hQ2hhbmdlKSBtaWdyYXRpb24gPSAnZHJvcCc7XG4gICAgZWxzZSBtaWdyYXRpb24gPSAnc2FmZSc7XG4gIH1cbiAgLy8gYWx3YXlzIHNhZmUgbWlncmF0ZSBpZiBOT0RFX0VOVj09PSdwcm9kdWN0aW9uJ1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykgbWlncmF0aW9uID0gJ3NhZmUnO1xuXG4gIC8vIGNoZWNrIGZvciBleGlzdGVuY2Ugb2YgdGFibGUgb24gREIgYW5kIGlmIGl0IG1hdGNoZXMgdGhpcyBtb2RlbCdzIHNjaGVtYVxuICB0aGlzLl9nZXRfZGJfdGFibGVfc2NoZW1hKChlcnIsIGRiU2NoZW1hKSA9PiB7XG4gICAgaWYgKGVycikge1xuICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBhZnRlckN1c3RvbUluZGV4ID0gKGVycjEpID0+IHtcbiAgICAgIGlmIChlcnIxKSB7XG4gICAgICAgIGNhbGxiYWNrKGJ1aWxkRXJyb3IoJ21vZGVsLnRhYmxlY3JlYXRpb24uZGJpbmRleCcsIGVycjEpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gbWF0ZXJpYWxpemVkIHZpZXcgY3JlYXRpb25cbiAgICAgIGlmIChtb2RlbFNjaGVtYS5tYXRlcmlhbGl6ZWRfdmlld3MpIHtcbiAgICAgICAgYXN5bmMuZWFjaFNlcmllcyhPYmplY3Qua2V5cyhtb2RlbFNjaGVtYS5tYXRlcmlhbGl6ZWRfdmlld3MpLCAodmlld05hbWUsIG5leHQpID0+IHtcbiAgICAgICAgICBjb25zdCBtYXRWaWV3UXVlcnkgPSB0aGlzLl9jcmVhdGVfbWF0ZXJpYWxpemVkX3ZpZXdfcXVlcnkoXG4gICAgICAgICAgICB0YWJsZU5hbWUsXG4gICAgICAgICAgICB2aWV3TmFtZSxcbiAgICAgICAgICAgIG1vZGVsU2NoZW1hLm1hdGVyaWFsaXplZF92aWV3c1t2aWV3TmFtZV1cbiAgICAgICAgICApO1xuICAgICAgICAgIHRoaXMuX2V4ZWN1dGVfZGVmaW5pdGlvbl9xdWVyeShtYXRWaWV3UXVlcnksIFtdLCAoZXJyMiwgcmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyMikgbmV4dChidWlsZEVycm9yKCdtb2RlbC50YWJsZWNyZWF0aW9uLm1hdHZpZXcnLCBlcnIyKSk7XG4gICAgICAgICAgICBlbHNlIG5leHQobnVsbCwgcmVzdWx0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgY2FsbGJhY2spO1xuICAgICAgfSBlbHNlIGNhbGxiYWNrKCk7XG4gICAgfTtcblxuICAgIGNvbnN0IGFmdGVyREJJbmRleCA9IChlcnIxKSA9PiB7XG4gICAgICBpZiAoZXJyMSkge1xuICAgICAgICBjYWxsYmFjayhidWlsZEVycm9yKCdtb2RlbC50YWJsZWNyZWF0aW9uLmRiaW5kZXgnLCBlcnIxKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIGN1c3RvbSBpbmRleCBjcmVhdGlvblxuICAgICAgaWYgKG1vZGVsU2NoZW1hLmN1c3RvbV9pbmRleGVzKSB7XG4gICAgICAgIGFzeW5jLmVhY2hTZXJpZXMobW9kZWxTY2hlbWEuY3VzdG9tX2luZGV4ZXMsIChpZHgsIG5leHQpID0+IHtcbiAgICAgICAgICB0aGlzLl9leGVjdXRlX2RlZmluaXRpb25fcXVlcnkodGhpcy5fY3JlYXRlX2N1c3RvbV9pbmRleF9xdWVyeSh0YWJsZU5hbWUsIGlkeCksIFtdLCAoZXJyMiwgcmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyMikgbmV4dChlcnIyKTtcbiAgICAgICAgICAgIGVsc2UgbmV4dChudWxsLCByZXN1bHQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LCBhZnRlckN1c3RvbUluZGV4KTtcbiAgICAgIH0gZWxzZSBpZiAobW9kZWxTY2hlbWEuY3VzdG9tX2luZGV4KSB7XG4gICAgICAgIGNvbnN0IGN1c3RvbUluZGV4UXVlcnkgPSB0aGlzLl9jcmVhdGVfY3VzdG9tX2luZGV4X3F1ZXJ5KHRhYmxlTmFtZSwgbW9kZWxTY2hlbWEuY3VzdG9tX2luZGV4KTtcbiAgICAgICAgdGhpcy5fZXhlY3V0ZV9kZWZpbml0aW9uX3F1ZXJ5KGN1c3RvbUluZGV4UXVlcnksIFtdLCAoZXJyMiwgcmVzdWx0KSA9PiB7XG4gICAgICAgICAgaWYgKGVycjIpIGFmdGVyQ3VzdG9tSW5kZXgoYnVpbGRFcnJvcignbW9kZWwudGFibGVjcmVhdGlvbi5kYmluZGV4JywgZXJyMikpO1xuICAgICAgICAgIGVsc2UgYWZ0ZXJDdXN0b21JbmRleChudWxsLCByZXN1bHQpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBhZnRlckN1c3RvbUluZGV4KCk7XG4gICAgfTtcblxuICAgIGNvbnN0IGFmdGVyREJDcmVhdGUgPSAoZXJyMSkgPT4ge1xuICAgICAgaWYgKGVycjEpIHtcbiAgICAgICAgY2FsbGJhY2soYnVpbGRFcnJvcignbW9kZWwudGFibGVjcmVhdGlvbi5kYmNyZWF0ZScsIGVycjEpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gaW5kZXggY3JlYXRpb25cbiAgICAgIGlmIChtb2RlbFNjaGVtYS5pbmRleGVzIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgYXN5bmMuZWFjaFNlcmllcyhtb2RlbFNjaGVtYS5pbmRleGVzLCAoaWR4LCBuZXh0KSA9PiB7XG4gICAgICAgICAgdGhpcy5fZXhlY3V0ZV9kZWZpbml0aW9uX3F1ZXJ5KHRoaXMuX2NyZWF0ZV9pbmRleF9xdWVyeSh0YWJsZU5hbWUsIGlkeCksIFtdLCAoZXJyMiwgcmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyMikgbmV4dChlcnIyKTtcbiAgICAgICAgICAgIGVsc2UgbmV4dChudWxsLCByZXN1bHQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LCBhZnRlckRCSW5kZXgpO1xuICAgICAgfSBlbHNlIGFmdGVyREJJbmRleCgpO1xuICAgIH07XG5cbiAgICBpZiAoZGJTY2hlbWEpIHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWRNb2RlbFNjaGVtYSA9IHNjaGVtZXIubm9ybWFsaXplX21vZGVsX3NjaGVtYShtb2RlbFNjaGVtYSk7XG4gICAgICBjb25zdCBub3JtYWxpemVkREJTY2hlbWEgPSBzY2hlbWVyLm5vcm1hbGl6ZV9tb2RlbF9zY2hlbWEoZGJTY2hlbWEpO1xuXG4gICAgICBpZiAoXy5pc0VxdWFsKG5vcm1hbGl6ZWRNb2RlbFNjaGVtYSwgbm9ybWFsaXplZERCU2NoZW1hKSkge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgZHJvcFJlY3JlYXRlVGFibGUgPSAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgcGVybWlzc2lvbiA9IHRoaXMuX2Fza19jb25maXJtYXRpb24oXG4gICAgICAgICAgICB1dGlsLmZvcm1hdChcbiAgICAgICAgICAgICAgJ01pZ3JhdGlvbjogbW9kZWwgc2NoZW1hIGNoYW5nZWQgZm9yIHRhYmxlIFwiJXNcIiwgZHJvcCB0YWJsZSAmIHJlY3JlYXRlPyAoZGF0YSB3aWxsIGJlIGxvc3QhKSAoeS9uKTogJyxcbiAgICAgICAgICAgICAgdGFibGVOYW1lXG4gICAgICAgICAgICApXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAocGVybWlzc2lvbi50b0xvd2VyQ2FzZSgpID09PSAneScpIHtcbiAgICAgICAgICAgIGlmIChub3JtYWxpemVkREJTY2hlbWEubWF0ZXJpYWxpemVkX3ZpZXdzKSB7XG4gICAgICAgICAgICAgIGNvbnN0IG12aWV3cyA9IE9iamVjdC5rZXlzKG5vcm1hbGl6ZWREQlNjaGVtYS5tYXRlcmlhbGl6ZWRfdmlld3MpO1xuXG4gICAgICAgICAgICAgIHRoaXMuZHJvcF9tdmlld3MobXZpZXdzLCAoZXJyMSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnIxKSB7XG4gICAgICAgICAgICAgICAgICBjYWxsYmFjayhidWlsZEVycm9yKCdtb2RlbC50YWJsZWNyZWF0aW9uLm1hdHZpZXcnLCBlcnIxKSk7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5kcm9wX3RhYmxlKChlcnIyKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAoZXJyMikge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhidWlsZEVycm9yKCdtb2RlbC50YWJsZWNyZWF0aW9uLmRiY3JlYXRlJywgZXJyMikpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBjb25zdCBjcmVhdGVUYWJsZVF1ZXJ5ID0gdGhpcy5fY3JlYXRlX3RhYmxlX3F1ZXJ5KHRhYmxlTmFtZSwgbW9kZWxTY2hlbWEpO1xuICAgICAgICAgICAgICAgICAgdGhpcy5fZXhlY3V0ZV9kZWZpbml0aW9uX3F1ZXJ5KGNyZWF0ZVRhYmxlUXVlcnksIFtdLCBhZnRlckRCQ3JlYXRlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLmRyb3BfdGFibGUoKGVycjEpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyMSkge1xuICAgICAgICAgICAgICAgICAgY2FsbGJhY2soYnVpbGRFcnJvcignbW9kZWwudGFibGVjcmVhdGlvbi5kYmNyZWF0ZScsIGVycjEpKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgY3JlYXRlVGFibGVRdWVyeSA9IHRoaXMuX2NyZWF0ZV90YWJsZV9xdWVyeSh0YWJsZU5hbWUsIG1vZGVsU2NoZW1hKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9leGVjdXRlX2RlZmluaXRpb25fcXVlcnkoY3JlYXRlVGFibGVRdWVyeSwgW10sIGFmdGVyREJDcmVhdGUpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FsbGJhY2soYnVpbGRFcnJvcignbW9kZWwudGFibGVjcmVhdGlvbi5zY2hlbWFtaXNtYXRjaCcsIHRhYmxlTmFtZSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBhZnRlckRCQWx0ZXIgPSAoZXJyMSkgPT4ge1xuICAgICAgICAgIGlmIChlcnIxKSB7XG4gICAgICAgICAgICBpZiAoZXJyMS5tZXNzYWdlICE9PSAnYnJlYWsnKSBjYWxsYmFjayhlcnIxKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gaXQgc2hvdWxkIGNyZWF0ZS9kcm9wIGluZGV4ZXMvY3VzdG9tX2luZGV4ZXMvbWF0ZXJpYWxpemVkX3ZpZXdzIHRoYXQgYXJlIGFkZGVkL3JlbW92ZWQgaW4gbW9kZWwgc2NoZW1hXG4gICAgICAgICAgLy8gcmVtb3ZlIGNvbW1vbiBpbmRleGVzL2N1c3RvbV9pbmRleGVzL21hdGVyaWFsaXplZF92aWV3cyBmcm9tIG5vcm1hbGl6ZWRNb2RlbFNjaGVtYSBhbmQgbm9ybWFsaXplZERCU2NoZW1hXG4gICAgICAgICAgLy8gdGhlbiBkcm9wIGFsbCByZW1haW5pbmcgaW5kZXhlcy9jdXN0b21faW5kZXhlcy9tYXRlcmlhbGl6ZWRfdmlld3MgZnJvbSBub3JtYWxpemVkREJTY2hlbWFcbiAgICAgICAgICAvLyBhbmQgYWRkIGFsbCByZW1haW5pbmcgaW5kZXhlcy9jdXN0b21faW5kZXhlcy9tYXRlcmlhbGl6ZWRfdmlld3MgZnJvbSBub3JtYWxpemVkTW9kZWxTY2hlbWFcbiAgICAgICAgICBjb25zdCBhZGRlZEluZGV4ZXMgPSBfLmRpZmZlcmVuY2Uobm9ybWFsaXplZE1vZGVsU2NoZW1hLmluZGV4ZXMsIG5vcm1hbGl6ZWREQlNjaGVtYS5pbmRleGVzKTtcbiAgICAgICAgICBjb25zdCByZW1vdmVkSW5kZXhlcyA9IF8uZGlmZmVyZW5jZShub3JtYWxpemVkREJTY2hlbWEuaW5kZXhlcywgbm9ybWFsaXplZE1vZGVsU2NoZW1hLmluZGV4ZXMpO1xuICAgICAgICAgIGNvbnN0IHJlbW92ZWRJbmRleE5hbWVzID0gW107XG4gICAgICAgICAgcmVtb3ZlZEluZGV4ZXMuZm9yRWFjaCgocmVtb3ZlZEluZGV4KSA9PiB7XG4gICAgICAgICAgICByZW1vdmVkSW5kZXhOYW1lcy5wdXNoKGRiU2NoZW1hLmluZGV4X25hbWVzW3JlbW92ZWRJbmRleF0pO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc3QgYWRkZWRDdXN0b21JbmRleGVzID0gXy5maWx0ZXIoXG4gICAgICAgICAgICBub3JtYWxpemVkTW9kZWxTY2hlbWEuY3VzdG9tX2luZGV4ZXMsXG4gICAgICAgICAgICAob2JqKSA9PiAoIV8uZmluZChub3JtYWxpemVkREJTY2hlbWEuY3VzdG9tX2luZGV4ZXMsIG9iaikpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCByZW1vdmVkQ3VzdG9tSW5kZXhlcyA9IF8uZmlsdGVyKFxuICAgICAgICAgICAgbm9ybWFsaXplZERCU2NoZW1hLmN1c3RvbV9pbmRleGVzLFxuICAgICAgICAgICAgKG9iaikgPT4gKCFfLmZpbmQobm9ybWFsaXplZE1vZGVsU2NoZW1hLmN1c3RvbV9pbmRleGVzLCBvYmopKVxuICAgICAgICAgICk7XG4gICAgICAgICAgcmVtb3ZlZEN1c3RvbUluZGV4ZXMuZm9yRWFjaCgocmVtb3ZlZEluZGV4KSA9PiB7XG4gICAgICAgICAgICByZW1vdmVkSW5kZXhOYW1lcy5wdXNoKGRiU2NoZW1hLmluZGV4X25hbWVzW29iamVjdEhhc2gocmVtb3ZlZEluZGV4KV0pO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc3QgYWRkZWRNYXRlcmlhbGl6ZWRWaWV3cyA9IF8uZmlsdGVyKFxuICAgICAgICAgICAgT2JqZWN0LmtleXMobm9ybWFsaXplZE1vZGVsU2NoZW1hLm1hdGVyaWFsaXplZF92aWV3cyksXG4gICAgICAgICAgICAodmlld05hbWUpID0+XG4gICAgICAgICAgICAgICghXy5maW5kKG5vcm1hbGl6ZWREQlNjaGVtYS5tYXRlcmlhbGl6ZWRfdmlld3MsIG5vcm1hbGl6ZWRNb2RlbFNjaGVtYS5tYXRlcmlhbGl6ZWRfdmlld3Nbdmlld05hbWVdKSlcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnN0IHJlbW92ZWRNYXRlcmlhbGl6ZWRWaWV3cyA9IF8uZmlsdGVyKFxuICAgICAgICAgICAgT2JqZWN0LmtleXMobm9ybWFsaXplZERCU2NoZW1hLm1hdGVyaWFsaXplZF92aWV3cyksXG4gICAgICAgICAgICAodmlld05hbWUpID0+XG4gICAgICAgICAgICAgICghXy5maW5kKG5vcm1hbGl6ZWRNb2RlbFNjaGVtYS5tYXRlcmlhbGl6ZWRfdmlld3MsIG5vcm1hbGl6ZWREQlNjaGVtYS5tYXRlcmlhbGl6ZWRfdmlld3Nbdmlld05hbWVdKSlcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgLy8gcmVtb3ZlIGFsdGVyZWQgbWF0ZXJpYWxpemVkIHZpZXdzXG4gICAgICAgICAgaWYgKHJlbW92ZWRNYXRlcmlhbGl6ZWRWaWV3cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBwZXJtaXNzaW9uID0gdGhpcy5fYXNrX2NvbmZpcm1hdGlvbihcbiAgICAgICAgICAgICAgdXRpbC5mb3JtYXQoXG4gICAgICAgICAgICAgICAgJ01pZ3JhdGlvbjogbW9kZWwgc2NoZW1hIGZvciB0YWJsZSBcIiVzXCIgaGFzIHJlbW92ZWQgbWF0ZXJpYWxpemVkX3ZpZXdzOiAlaiwgZHJvcCB0aGVtPyAoeS9uKTogJyxcbiAgICAgICAgICAgICAgICB0YWJsZU5hbWUsXG4gICAgICAgICAgICAgICAgcmVtb3ZlZE1hdGVyaWFsaXplZFZpZXdzXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAocGVybWlzc2lvbi50b0xvd2VyQ2FzZSgpICE9PSAneScpIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2soYnVpbGRFcnJvcignbW9kZWwudGFibGVjcmVhdGlvbi5zY2hlbWFtaXNtYXRjaCcsIHRhYmxlTmFtZSkpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChyZW1vdmVkSW5kZXhOYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBwZXJtaXNzaW9uID0gdGhpcy5fYXNrX2NvbmZpcm1hdGlvbihcbiAgICAgICAgICAgICAgdXRpbC5mb3JtYXQoXG4gICAgICAgICAgICAgICAgJ01pZ3JhdGlvbjogbW9kZWwgc2NoZW1hIGZvciB0YWJsZSBcIiVzXCIgaGFzIHJlbW92ZWQgaW5kZXhlczogJWosIGRyb3AgdGhlbT8gKHkvbik6ICcsXG4gICAgICAgICAgICAgICAgdGFibGVOYW1lLFxuICAgICAgICAgICAgICAgIHJlbW92ZWRJbmRleE5hbWVzXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAocGVybWlzc2lvbi50b0xvd2VyQ2FzZSgpICE9PSAneScpIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2soYnVpbGRFcnJvcignbW9kZWwudGFibGVjcmVhdGlvbi5zY2hlbWFtaXNtYXRjaCcsIHRhYmxlTmFtZSkpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5kcm9wX212aWV3cyhyZW1vdmVkTWF0ZXJpYWxpemVkVmlld3MsIChlcnIyKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyMikge1xuICAgICAgICAgICAgICBjYWxsYmFjayhidWlsZEVycm9yKCdtb2RlbC50YWJsZWNyZWF0aW9uLm1hdHZpZXcnLCBlcnIyKSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gcmVtb3ZlIGFsdGVyZWQgaW5kZXhlcyBieSBpbmRleCBuYW1lXG4gICAgICAgICAgICB0aGlzLmRyb3BfaW5kZXhlcyhyZW1vdmVkSW5kZXhOYW1lcywgKGVycjMpID0+IHtcbiAgICAgICAgICAgICAgaWYgKGVycjMpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhidWlsZEVycm9yKCdtb2RlbC50YWJsZWNyZWF0aW9uLmRiaW5kZXgnLCBlcnIzKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gYWRkIGFsdGVyZWQgaW5kZXhlc1xuICAgICAgICAgICAgICBhc3luYy5lYWNoU2VyaWVzKGFkZGVkSW5kZXhlcywgKGlkeCwgbmV4dCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2V4ZWN1dGVfZGVmaW5pdGlvbl9xdWVyeSh0aGlzLl9jcmVhdGVfaW5kZXhfcXVlcnkodGFibGVOYW1lLCBpZHgpLCBbXSwgKGVycjQsIHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKGVycjQpIG5leHQoZXJyNCk7XG4gICAgICAgICAgICAgICAgICBlbHNlIG5leHQobnVsbCwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSwgKGVycjQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyNCkge1xuICAgICAgICAgICAgICAgICAgY2FsbGJhY2soYnVpbGRFcnJvcignbW9kZWwudGFibGVjcmVhdGlvbi5kYmluZGV4JywgZXJyNCkpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGFkZCBhbHRlcmVkIGN1c3RvbSBpbmRleGVzXG4gICAgICAgICAgICAgICAgYXN5bmMuZWFjaFNlcmllcyhhZGRlZEN1c3RvbUluZGV4ZXMsIChpZHgsIG5leHQpID0+IHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGN1c3RvbUluZGV4UXVlcnkgPSB0aGlzLl9jcmVhdGVfY3VzdG9tX2luZGV4X3F1ZXJ5KHRhYmxlTmFtZSwgaWR4KTtcbiAgICAgICAgICAgICAgICAgIHRoaXMuX2V4ZWN1dGVfZGVmaW5pdGlvbl9xdWVyeShjdXN0b21JbmRleFF1ZXJ5LCBbXSwgKGVycjUsIHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyNSkgbmV4dChlcnI1KTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBuZXh0KG51bGwsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LCAoZXJyNSkgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKGVycjUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soYnVpbGRFcnJvcignbW9kZWwudGFibGVjcmVhdGlvbi5kYmluZGV4JywgZXJyNSkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIC8vIGFkZCBhbHRlcmVkIG1hdGVyaWFsaXplZF92aWV3c1xuICAgICAgICAgICAgICAgICAgYXN5bmMuZWFjaFNlcmllcyhhZGRlZE1hdGVyaWFsaXplZFZpZXdzLCAodmlld05hbWUsIG5leHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Vmlld1F1ZXJ5ID0gdGhpcy5fY3JlYXRlX21hdGVyaWFsaXplZF92aWV3X3F1ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgIHRhYmxlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICB2aWV3TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICBtb2RlbFNjaGVtYS5tYXRlcmlhbGl6ZWRfdmlld3Nbdmlld05hbWVdXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2V4ZWN1dGVfZGVmaW5pdGlvbl9xdWVyeShtYXRWaWV3UXVlcnksIFtdLCAoZXJyNiwgcmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGVycjYpIG5leHQoYnVpbGRFcnJvcignbW9kZWwudGFibGVjcmVhdGlvbi5tYXR2aWV3JywgZXJyNikpO1xuICAgICAgICAgICAgICAgICAgICAgIGVsc2UgbmV4dChudWxsLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH0sIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBhbHRlckRCVGFibGUgPSAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGlmZmVyZW5jZXMgPSBkZWVwRGlmZihub3JtYWxpemVkREJTY2hlbWEuZmllbGRzLCBub3JtYWxpemVkTW9kZWxTY2hlbWEuZmllbGRzKTtcbiAgICAgICAgICBhc3luYy5lYWNoU2VyaWVzKGRpZmZlcmVuY2VzLCAoZGlmZiwgbmV4dCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmllbGROYW1lID0gZGlmZi5wYXRoWzBdO1xuICAgICAgICAgICAgY29uc3QgYWx0ZXJGaWVsZFR5cGUgPSAoKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHBlcm1pc3Npb24gPSB0aGlzLl9hc2tfY29uZmlybWF0aW9uKFxuICAgICAgICAgICAgICAgIHV0aWwuZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgJ01pZ3JhdGlvbjogbW9kZWwgc2NoZW1hIGZvciB0YWJsZSBcIiVzXCIgaGFzIG5ldyB0eXBlIGZvciBmaWVsZCBcIiVzXCIsICcgK1xuICAgICAgICAgICAgICAgICAgJ2FsdGVyIHRhYmxlIHRvIHVwZGF0ZSBjb2x1bW4gdHlwZT8gKHkvbik6ICcsXG4gICAgICAgICAgICAgICAgICB0YWJsZU5hbWUsXG4gICAgICAgICAgICAgICAgICBmaWVsZE5hbWVcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGlmIChwZXJtaXNzaW9uLnRvTG93ZXJDYXNlKCkgPT09ICd5Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuYWx0ZXJfdGFibGUoJ0FMVEVSJywgZmllbGROYW1lLCBkaWZmLnJocywgKGVycjEsIHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKGVycjEpIG5leHQoYnVpbGRFcnJvcignbW9kZWwudGFibGVjcmVhdGlvbi5kYmFsdGVyJywgZXJyMSkpO1xuICAgICAgICAgICAgICAgICAgZWxzZSBuZXh0KG51bGwsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV4dChidWlsZEVycm9yKCdtb2RlbC50YWJsZWNyZWF0aW9uLnNjaGVtYW1pc21hdGNoJywgdGFibGVOYW1lKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IGFsdGVyQWRkRmllbGQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgIGxldCB0eXBlID0gJyc7XG4gICAgICAgICAgICAgIGlmIChkaWZmLnBhdGgubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIGlmIChkaWZmLnBhdGhbMV0gPT09ICd0eXBlJykge1xuICAgICAgICAgICAgICAgICAgdHlwZSA9IGRpZmYucmhzO1xuICAgICAgICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWRNb2RlbFNjaGVtYS5maWVsZHNbZmllbGROYW1lXS50eXBlRGVmKSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGUgKz0gbm9ybWFsaXplZE1vZGVsU2NoZW1hLmZpZWxkc1tmaWVsZE5hbWVdLnR5cGVEZWY7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHR5cGUgPSBub3JtYWxpemVkTW9kZWxTY2hlbWEuZmllbGRzW2ZpZWxkTmFtZV0udHlwZTtcbiAgICAgICAgICAgICAgICAgIHR5cGUgKz0gZGlmZi5yaHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHR5cGUgPSBkaWZmLnJocy50eXBlO1xuICAgICAgICAgICAgICAgIGlmIChkaWZmLnJocy50eXBlRGVmKSB0eXBlICs9IGRpZmYucmhzLnR5cGVEZWY7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB0aGlzLmFsdGVyX3RhYmxlKCdBREQnLCBmaWVsZE5hbWUsIHR5cGUsIChlcnIxLCByZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyMSkgbmV4dChidWlsZEVycm9yKCdtb2RlbC50YWJsZWNyZWF0aW9uLmRiYWx0ZXInLCBlcnIxKSk7XG4gICAgICAgICAgICAgICAgZWxzZSBuZXh0KG51bGwsIHJlc3VsdCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgYWx0ZXJSZW1vdmVGaWVsZCA9IChuZXh0Q2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgICAgLy8gcmVtb3ZlIGRlcGVuZGVudCBpbmRleGVzL2N1c3RvbV9pbmRleGVzL21hdGVyaWFsaXplZF92aWV3cyxcbiAgICAgICAgICAgICAgLy8gdXBkYXRlIHRoZW0gaW4gbm9ybWFsaXplZERCU2NoZW1hLCB0aGVuIGFsdGVyXG4gICAgICAgICAgICAgIGNvbnN0IGRlcGVuZGVudEluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgICAgY29uc3QgcHVsbEluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgICAgbm9ybWFsaXplZERCU2NoZW1hLmluZGV4ZXMuZm9yRWFjaCgoZGJJbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4U3BsaXQgPSBkYkluZGV4LnNwbGl0KC9bKCldL2cpO1xuICAgICAgICAgICAgICAgIGxldCBpbmRleEZpZWxkTmFtZSA9ICcnO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleFNwbGl0Lmxlbmd0aCA+IDEpIGluZGV4RmllbGROYW1lID0gaW5kZXhTcGxpdFsxXTtcbiAgICAgICAgICAgICAgICBlbHNlIGluZGV4RmllbGROYW1lID0gaW5kZXhTcGxpdFswXTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXhGaWVsZE5hbWUgPT09IGZpZWxkTmFtZSkge1xuICAgICAgICAgICAgICAgICAgZGVwZW5kZW50SW5kZXhlcy5wdXNoKGRiU2NoZW1hLmluZGV4X25hbWVzW2RiSW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgIHB1bGxJbmRleGVzLnB1c2goZGJJbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgXy5wdWxsQWxsKG5vcm1hbGl6ZWREQlNjaGVtYS5pbmRleGVzLCBwdWxsSW5kZXhlcyk7XG5cbiAgICAgICAgICAgICAgY29uc3QgcHVsbEN1c3RvbUluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgICAgbm9ybWFsaXplZERCU2NoZW1hLmN1c3RvbV9pbmRleGVzLmZvckVhY2goKGRiSW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZGJJbmRleC5vbiA9PT0gZmllbGROYW1lKSB7XG4gICAgICAgICAgICAgICAgICBkZXBlbmRlbnRJbmRleGVzLnB1c2goZGJTY2hlbWEuaW5kZXhfbmFtZXNbb2JqZWN0SGFzaChkYkluZGV4KV0pO1xuICAgICAgICAgICAgICAgICAgcHVsbEN1c3RvbUluZGV4ZXMucHVzaChkYkluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBfLnB1bGxBbGwobm9ybWFsaXplZERCU2NoZW1hLmN1c3RvbV9pbmRleGVzLCBwdWxsQ3VzdG9tSW5kZXhlcyk7XG5cbiAgICAgICAgICAgICAgY29uc3QgZGVwZW5kZW50Vmlld3MgPSBbXTtcbiAgICAgICAgICAgICAgT2JqZWN0LmtleXMobm9ybWFsaXplZERCU2NoZW1hLm1hdGVyaWFsaXplZF92aWV3cykuZm9yRWFjaCgoZGJWaWV3TmFtZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChub3JtYWxpemVkREJTY2hlbWEubWF0ZXJpYWxpemVkX3ZpZXdzW2RiVmlld05hbWVdLnNlbGVjdC5pbmRleE9mKGZpZWxkTmFtZSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgZGVwZW5kZW50Vmlld3MucHVzaChkYlZpZXdOYW1lKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vcm1hbGl6ZWREQlNjaGVtYS5tYXRlcmlhbGl6ZWRfdmlld3NbZGJWaWV3TmFtZV0uc2VsZWN0WzBdID09PSAnKicpIHtcbiAgICAgICAgICAgICAgICAgIGRlcGVuZGVudFZpZXdzLnB1c2goZGJWaWV3TmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3JtYWxpemVkREJTY2hlbWEubWF0ZXJpYWxpemVkX3ZpZXdzW2RiVmlld05hbWVdLmtleS5pbmRleE9mKGZpZWxkTmFtZSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgZGVwZW5kZW50Vmlld3MucHVzaChkYlZpZXdOYW1lKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vcm1hbGl6ZWREQlNjaGVtYS5tYXRlcmlhbGl6ZWRfdmlld3NbZGJWaWV3TmFtZV0ua2V5WzBdIGluc3RhbmNlb2YgQXJyYXlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBub3JtYWxpemVkREJTY2hlbWEubWF0ZXJpYWxpemVkX3ZpZXdzW2RiVmlld05hbWVdLmtleVswXS5pbmRleE9mKGZpZWxkTmFtZSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgZGVwZW5kZW50Vmlld3MucHVzaChkYlZpZXdOYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBkZXBlbmRlbnRWaWV3cy5mb3JFYWNoKCh2aWV3TmFtZSkgPT4ge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBub3JtYWxpemVkREJTY2hlbWEubWF0ZXJpYWxpemVkX3ZpZXdzW3ZpZXdOYW1lXTtcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgdGhpcy5kcm9wX212aWV3cyhkZXBlbmRlbnRWaWV3cywgKGVycjEpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyMSkge1xuICAgICAgICAgICAgICAgICAgbmV4dENhbGxiYWNrKGJ1aWxkRXJyb3IoJ21vZGVsLnRhYmxlY3JlYXRpb24ubWF0dmlldycsIGVycjEpKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLmRyb3BfaW5kZXhlcyhkZXBlbmRlbnRJbmRleGVzLCAoZXJyMikgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKGVycjIpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dENhbGxiYWNrKGJ1aWxkRXJyb3IoJ21vZGVsLnRhYmxlY3JlYXRpb24uZGJpbmRleCcsIGVycjIpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICB0aGlzLmFsdGVyX3RhYmxlKCdEUk9QJywgZmllbGROYW1lLCAnJywgKGVycjMsIHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyMykgbmV4dENhbGxiYWNrKGJ1aWxkRXJyb3IoJ21vZGVsLnRhYmxlY3JlYXRpb24uZGJhbHRlcicsIGVycjMpKTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBuZXh0Q2FsbGJhY2sobnVsbCwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmIChkaWZmLmtpbmQgPT09ICdOJykge1xuICAgICAgICAgICAgICBjb25zdCBwZXJtaXNzaW9uID0gdGhpcy5fYXNrX2NvbmZpcm1hdGlvbihcbiAgICAgICAgICAgICAgICB1dGlsLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICdNaWdyYXRpb246IG1vZGVsIHNjaGVtYSBmb3IgdGFibGUgXCIlc1wiIGhhcyBhZGRlZCBmaWVsZCBcIiVzXCIsIGFsdGVyIHRhYmxlIHRvIGFkZCBjb2x1bW4/ICh5L24pOiAnLFxuICAgICAgICAgICAgICAgICAgdGFibGVOYW1lLFxuICAgICAgICAgICAgICAgICAgZmllbGROYW1lXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBpZiAocGVybWlzc2lvbi50b0xvd2VyQ2FzZSgpID09PSAneScpIHtcbiAgICAgICAgICAgICAgICBhbHRlckFkZEZpZWxkKCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV4dChidWlsZEVycm9yKCdtb2RlbC50YWJsZWNyZWF0aW9uLnNjaGVtYW1pc21hdGNoJywgdGFibGVOYW1lKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlmZi5raW5kID09PSAnRCcpIHtcbiAgICAgICAgICAgICAgY29uc3QgcGVybWlzc2lvbiA9IHRoaXMuX2Fza19jb25maXJtYXRpb24oXG4gICAgICAgICAgICAgICAgdXRpbC5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAnTWlncmF0aW9uOiBtb2RlbCBzY2hlbWEgZm9yIHRhYmxlIFwiJXNcIiBoYXMgcmVtb3ZlZCBmaWVsZCBcIiVzXCIsIGFsdGVyIHRhYmxlIHRvIGRyb3AgY29sdW1uPyAnICtcbiAgICAgICAgICAgICAgICAgICcoY29sdW1uIGRhdGEgd2lsbCBiZSBsb3N0ICYgZGVwZW5kZW50IGluZGV4ZXMvdmlld3Mgd2lsbCBiZSByZWNyZWF0ZWQhKSAoeS9uKTogJyxcbiAgICAgICAgICAgICAgICAgIHRhYmxlTmFtZSxcbiAgICAgICAgICAgICAgICAgIGZpZWxkTmFtZVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgaWYgKHBlcm1pc3Npb24udG9Mb3dlckNhc2UoKSA9PT0gJ3knKSB7XG4gICAgICAgICAgICAgICAgYWx0ZXJSZW1vdmVGaWVsZChuZXh0KTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXh0KGJ1aWxkRXJyb3IoJ21vZGVsLnRhYmxlY3JlYXRpb24uc2NoZW1hbWlzbWF0Y2gnLCB0YWJsZU5hbWUpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChkaWZmLmtpbmQgPT09ICdFJykge1xuICAgICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgYWx0ZXIgZmllbGQgdHlwZSBpcyBwb3NzaWJsZSwgb3RoZXJ3aXNlIHRyeSBEIGFuZCB0aGVuIE5cbiAgICAgICAgICAgICAgaWYgKGRpZmYucGF0aFsxXSA9PT0gJ3R5cGUnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRpZmYubGhzID09PSAnaW50JyAmJiBkaWZmLnJocyA9PT0gJ3ZhcmludCcpIHtcbiAgICAgICAgICAgICAgICAgIC8vIGFsdGVyIGZpZWxkIHR5cGUgcG9zc2libGVcbiAgICAgICAgICAgICAgICAgIGFsdGVyRmllbGRUeXBlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3JtYWxpemVkREJTY2hlbWEua2V5LmluZGV4T2YoZmllbGROYW1lKSA+IDApIHsgLy8gY2hlY2sgaWYgZmllbGQgcGFydCBvZiBjbHVzdGVyaW5nIGtleVxuICAgICAgICAgICAgICAgICAgLy8gYWx0ZXIgZmllbGQgdHlwZSBpbXBvc3NpYmxlXG4gICAgICAgICAgICAgICAgICBjb25zdCBwZXJtaXNzaW9uID0gdGhpcy5fYXNrX2NvbmZpcm1hdGlvbihcbiAgICAgICAgICAgICAgICAgICAgdXRpbC5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAgICAgJ01pZ3JhdGlvbjogbW9kZWwgc2NoZW1hIGZvciB0YWJsZSBcIiVzXCIgaGFzIG5ldyBpbmNvbXBhdGlibGUgdHlwZSBmb3IgcHJpbWFyeSBrZXkgZmllbGQgXCIlc1wiLCAnICtcbiAgICAgICAgICAgICAgICAgICAgICAncHJvY2VlZCB0byByZWNyZWF0ZSB0YWJsZT8gKHkvbik6ICcsXG4gICAgICAgICAgICAgICAgICAgICAgdGFibGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgIGZpZWxkTmFtZVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgaWYgKHBlcm1pc3Npb24udG9Mb3dlckNhc2UoKSA9PT0gJ3knKSB7XG4gICAgICAgICAgICAgICAgICAgIGRyb3BSZWNyZWF0ZVRhYmxlKCk7XG4gICAgICAgICAgICAgICAgICAgIG5leHQobmV3IEVycm9yKCdicmVhaycpKTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHQoYnVpbGRFcnJvcignbW9kZWwudGFibGVjcmVhdGlvbi5zY2hlbWFtaXNtYXRjaCcsIHRhYmxlTmFtZSkpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoWyd0ZXh0JywgJ2FzY2lpJywgJ2JpZ2ludCcsICdib29sZWFuJywgJ2RlY2ltYWwnLFxuICAgICAgICAgICAgICAgICAgJ2RvdWJsZScsICdmbG9hdCcsICdpbmV0JywgJ2ludCcsICd0aW1lc3RhbXAnLCAndGltZXV1aWQnLFxuICAgICAgICAgICAgICAgICAgJ3V1aWQnLCAndmFyY2hhcicsICd2YXJpbnQnXS5pbmRleE9mKGRpZmYubGhzKSA+IC0xICYmIGRpZmYucmhzID09PSAnYmxvYicpIHtcbiAgICAgICAgICAgICAgICAgIC8vIGFsdGVyIGZpZWxkIHR5cGUgcG9zc2libGVcbiAgICAgICAgICAgICAgICAgIGFsdGVyRmllbGRUeXBlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkaWZmLmxocyA9PT0gJ3RpbWV1dWlkJyAmJiBkaWZmLnJocyA9PT0gJ3V1aWQnKSB7XG4gICAgICAgICAgICAgICAgICAvLyBhbHRlciBmaWVsZCB0eXBlIHBvc3NpYmxlXG4gICAgICAgICAgICAgICAgICBhbHRlckZpZWxkVHlwZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm9ybWFsaXplZERCU2NoZW1hLmtleVswXS5pbmRleE9mKGZpZWxkTmFtZSkgPiAtMSkgeyAvLyBjaGVjayBpZiBmaWVsZCBwYXJ0IG9mIHBhcnRpdGlvbiBrZXlcbiAgICAgICAgICAgICAgICAgIC8vIGFsdGVyIGZpZWxkIHR5cGUgaW1wb3NzaWJsZVxuICAgICAgICAgICAgICAgICAgY29uc3QgcGVybWlzc2lvbiA9IHRoaXMuX2Fza19jb25maXJtYXRpb24oXG4gICAgICAgICAgICAgICAgICAgIHV0aWwuZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgICAgICdNaWdyYXRpb246IG1vZGVsIHNjaGVtYSBmb3IgdGFibGUgXCIlc1wiIGhhcyBuZXcgaW5jb21wYXRpYmxlIHR5cGUgZm9yIHByaW1hcnkga2V5IGZpZWxkIFwiJXNcIiwgJyArXG4gICAgICAgICAgICAgICAgICAgICAgJ3Byb2NlZWQgdG8gcmVjcmVhdGUgdGFibGU/ICh5L24pOiAnLFxuICAgICAgICAgICAgICAgICAgICAgIHRhYmxlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICBmaWVsZE5hbWVcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgIGlmIChwZXJtaXNzaW9uLnRvTG93ZXJDYXNlKCkgPT09ICd5Jykge1xuICAgICAgICAgICAgICAgICAgICBkcm9wUmVjcmVhdGVUYWJsZSgpO1xuICAgICAgICAgICAgICAgICAgICBuZXh0KG5ldyBFcnJvcignYnJlYWsnKSk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXh0KGJ1aWxkRXJyb3IoJ21vZGVsLnRhYmxlY3JlYXRpb24uc2NoZW1hbWlzbWF0Y2gnLCB0YWJsZU5hbWUpKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgLy8gYWx0ZXIgdHlwZSBpbXBvc3NpYmxlXG4gICAgICAgICAgICAgICAgICBjb25zdCBwZXJtaXNzaW9uID0gdGhpcy5fYXNrX2NvbmZpcm1hdGlvbihcbiAgICAgICAgICAgICAgICAgICAgdXRpbC5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAgICAgJ01pZ3JhdGlvbjogbW9kZWwgc2NoZW1hIGZvciB0YWJsZSBcIiVzXCIgaGFzIG5ldyBpbmNvbXBhdGlibGUgdHlwZSBmb3IgZmllbGQgXCIlc1wiLCBkcm9wIGNvbHVtbiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAnYW5kIHJlY3JlYXRlPyAoY29sdW1uIGRhdGEgd2lsbCBiZSBsb3N0ICYgZGVwZW5kZW50IGluZGV4ZXMvdmlld3Mgd2lsbCBiZSByZWNyZWF0ZWQhKSAoeS9uKTogJyxcbiAgICAgICAgICAgICAgICAgICAgICB0YWJsZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgZmllbGROYW1lXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICBpZiAocGVybWlzc2lvbi50b0xvd2VyQ2FzZSgpID09PSAneScpIHtcbiAgICAgICAgICAgICAgICAgICAgYWx0ZXJSZW1vdmVGaWVsZCgoZXJyMSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIxKSBuZXh0KGVycjEpO1xuICAgICAgICAgICAgICAgICAgICAgIGVsc2UgYWx0ZXJBZGRGaWVsZCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHQoYnVpbGRFcnJvcignbW9kZWwudGFibGVjcmVhdGlvbi5zY2hlbWFtaXNtYXRjaCcsIHRhYmxlTmFtZSkpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBhbHRlciB0eXBlIGltcG9zc2libGVcbiAgICAgICAgICAgICAgICBjb25zdCBwZXJtaXNzaW9uID0gdGhpcy5fYXNrX2NvbmZpcm1hdGlvbihcbiAgICAgICAgICAgICAgICAgIHV0aWwuZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgICAnTWlncmF0aW9uOiBtb2RlbCBzY2hlbWEgZm9yIHRhYmxlIFwiJXNcIiBoYXMgbmV3IGluY29tcGF0aWJsZSB0eXBlIGZvciBmaWVsZCBcIiVzXCIsIGRyb3AgY29sdW1uICcgK1xuICAgICAgICAgICAgICAgICAgICAnYW5kIHJlY3JlYXRlPyAoY29sdW1uIGRhdGEgd2lsbCBiZSBsb3N0ICYgZGVwZW5kZW50IGluZGV4ZXMvdmlld3Mgd2lsbCBiZSByZWNyZWF0ZWQhKSAoeS9uKTogJyxcbiAgICAgICAgICAgICAgICAgICAgdGFibGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICBmaWVsZE5hbWVcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChwZXJtaXNzaW9uLnRvTG93ZXJDYXNlKCkgPT09ICd5Jykge1xuICAgICAgICAgICAgICAgICAgYWx0ZXJSZW1vdmVGaWVsZCgoZXJyMSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyMSkgbmV4dChlcnIxKTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBhbHRlckFkZEZpZWxkKCk7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgbmV4dChidWlsZEVycm9yKCdtb2RlbC50YWJsZWNyZWF0aW9uLnNjaGVtYW1pc21hdGNoJywgdGFibGVOYW1lKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBuZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgYWZ0ZXJEQkFsdGVyKTtcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAobWlncmF0aW9uID09PSAnYWx0ZXInKSB7XG4gICAgICAgICAgLy8gY2hlY2sgaWYgdGFibGUgY2FuIGJlIGFsdGVyZWQgdG8gbWF0Y2ggc2NoZW1hXG4gICAgICAgICAgaWYgKF8uaXNFcXVhbChub3JtYWxpemVkTW9kZWxTY2hlbWEua2V5LCBub3JtYWxpemVkREJTY2hlbWEua2V5KSAmJlxuICAgICAgICAgICAgXy5pc0VxdWFsKG5vcm1hbGl6ZWRNb2RlbFNjaGVtYS5jbHVzdGVyaW5nX29yZGVyLCBub3JtYWxpemVkREJTY2hlbWEuY2x1c3RlcmluZ19vcmRlcikpIHtcbiAgICAgICAgICAgIGFsdGVyREJUYWJsZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkcm9wUmVjcmVhdGVUYWJsZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChtaWdyYXRpb24gPT09ICdkcm9wJykge1xuICAgICAgICAgIGRyb3BSZWNyZWF0ZVRhYmxlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FsbGJhY2soYnVpbGRFcnJvcignbW9kZWwudGFibGVjcmVhdGlvbi5zY2hlbWFtaXNtYXRjaCcsIHRhYmxlTmFtZSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGlmIG5vdCBleGlzdGluZywgaXQncyBjcmVhdGVkXG4gICAgICBjb25zdCBjcmVhdGVUYWJsZVF1ZXJ5ID0gdGhpcy5fY3JlYXRlX3RhYmxlX3F1ZXJ5KHRhYmxlTmFtZSwgbW9kZWxTY2hlbWEpO1xuICAgICAgdGhpcy5fZXhlY3V0ZV9kZWZpbml0aW9uX3F1ZXJ5KGNyZWF0ZVRhYmxlUXVlcnksIFtdLCBhZnRlckRCQ3JlYXRlKTtcbiAgICB9XG4gIH0pO1xufTtcblxuQmFzZU1vZGVsLl9jcmVhdGVfdGFibGVfcXVlcnkgPSBmdW5jdGlvbiBmKHRhYmxlTmFtZSwgc2NoZW1hKSB7XG4gIGNvbnN0IHJvd3MgPSBbXTtcbiAgbGV0IGZpZWxkVHlwZTtcbiAgT2JqZWN0LmtleXMoc2NoZW1hLmZpZWxkcykuZm9yRWFjaCgoaykgPT4ge1xuICAgIGlmIChzY2hlbWEuZmllbGRzW2tdLnZpcnR1YWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IHNlZ21lbnQgPSAnJztcbiAgICBmaWVsZFR5cGUgPSBzY2hlbWVyLmdldF9maWVsZF90eXBlKHNjaGVtYSwgayk7XG4gICAgaWYgKHNjaGVtYS5maWVsZHNba10udHlwZURlZikge1xuICAgICAgc2VnbWVudCA9IHV0aWwuZm9ybWF0KCdcIiVzXCIgJXMlcycsIGssIGZpZWxkVHlwZSwgc2NoZW1hLmZpZWxkc1trXS50eXBlRGVmKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VnbWVudCA9IHV0aWwuZm9ybWF0KCdcIiVzXCIgJXMnLCBrLCBmaWVsZFR5cGUpO1xuICAgIH1cblxuICAgIGlmIChzY2hlbWEuZmllbGRzW2tdLnN0YXRpYykge1xuICAgICAgc2VnbWVudCArPSAnIFNUQVRJQyc7XG4gICAgfVxuXG4gICAgcm93cy5wdXNoKHNlZ21lbnQpO1xuICB9KTtcblxuICBsZXQgcGFydGl0aW9uS2V5ID0gc2NoZW1hLmtleVswXTtcbiAgbGV0IGNsdXN0ZXJpbmdLZXkgPSBzY2hlbWEua2V5LnNsaWNlKDEsIHNjaGVtYS5rZXkubGVuZ3RoKTtcbiAgY29uc3QgY2x1c3RlcmluZ09yZGVyID0gW107XG5cblxuICBmb3IgKGxldCBmaWVsZCA9IDA7IGZpZWxkIDwgY2x1c3RlcmluZ0tleS5sZW5ndGg7IGZpZWxkKyspIHtcbiAgICBpZiAoc2NoZW1hLmNsdXN0ZXJpbmdfb3JkZXJcbiAgICAgICAgJiYgc2NoZW1hLmNsdXN0ZXJpbmdfb3JkZXJbY2x1c3RlcmluZ0tleVtmaWVsZF1dXG4gICAgICAgICYmIHNjaGVtYS5jbHVzdGVyaW5nX29yZGVyW2NsdXN0ZXJpbmdLZXlbZmllbGRdXS50b0xvd2VyQ2FzZSgpID09PSAnZGVzYycpIHtcbiAgICAgIGNsdXN0ZXJpbmdPcmRlci5wdXNoKHV0aWwuZm9ybWF0KCdcIiVzXCIgREVTQycsIGNsdXN0ZXJpbmdLZXlbZmllbGRdKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNsdXN0ZXJpbmdPcmRlci5wdXNoKHV0aWwuZm9ybWF0KCdcIiVzXCIgQVNDJywgY2x1c3RlcmluZ0tleVtmaWVsZF0pKTtcbiAgICB9XG4gIH1cblxuICBsZXQgY2x1c3RlcmluZ09yZGVyUXVlcnkgPSAnJztcbiAgaWYgKGNsdXN0ZXJpbmdPcmRlci5sZW5ndGggPiAwKSB7XG4gICAgY2x1c3RlcmluZ09yZGVyUXVlcnkgPSB1dGlsLmZvcm1hdCgnIFdJVEggQ0xVU1RFUklORyBPUkRFUiBCWSAoJXMpJywgY2x1c3RlcmluZ09yZGVyLnRvU3RyaW5nKCkpO1xuICB9XG5cbiAgaWYgKHBhcnRpdGlvbktleSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgcGFydGl0aW9uS2V5ID0gcGFydGl0aW9uS2V5Lm1hcCgodikgPT4gKHV0aWwuZm9ybWF0KCdcIiVzXCInLCB2KSkpLmpvaW4oJywnKTtcbiAgfSBlbHNlIHtcbiAgICBwYXJ0aXRpb25LZXkgPSB1dGlsLmZvcm1hdCgnXCIlc1wiJywgcGFydGl0aW9uS2V5KTtcbiAgfVxuXG4gIGlmIChjbHVzdGVyaW5nS2V5Lmxlbmd0aCkge1xuICAgIGNsdXN0ZXJpbmdLZXkgPSBjbHVzdGVyaW5nS2V5Lm1hcCgodikgPT4gKHV0aWwuZm9ybWF0KCdcIiVzXCInLCB2KSkpLmpvaW4oJywnKTtcbiAgICBjbHVzdGVyaW5nS2V5ID0gdXRpbC5mb3JtYXQoJywlcycsIGNsdXN0ZXJpbmdLZXkpO1xuICB9IGVsc2Uge1xuICAgIGNsdXN0ZXJpbmdLZXkgPSAnJztcbiAgfVxuXG4gIGNvbnN0IHF1ZXJ5ID0gdXRpbC5mb3JtYXQoXG4gICAgJ0NSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIFwiJXNcIiAoJXMgLCBQUklNQVJZIEtFWSgoJXMpJXMpKSVzOycsXG4gICAgdGFibGVOYW1lLFxuICAgIHJvd3Muam9pbignICwgJyksXG4gICAgcGFydGl0aW9uS2V5LFxuICAgIGNsdXN0ZXJpbmdLZXksXG4gICAgY2x1c3RlcmluZ09yZGVyUXVlcnlcbiAgKTtcblxuICByZXR1cm4gcXVlcnk7XG59O1xuXG5CYXNlTW9kZWwuX2NyZWF0ZV9tYXRlcmlhbGl6ZWRfdmlld19xdWVyeSA9IGZ1bmN0aW9uIGYodGFibGVOYW1lLCB2aWV3TmFtZSwgdmlld1NjaGVtYSkge1xuICBjb25zdCByb3dzID0gW107XG5cbiAgZm9yIChsZXQgayA9IDA7IGsgPCB2aWV3U2NoZW1hLnNlbGVjdC5sZW5ndGg7IGsrKykge1xuICAgIGlmICh2aWV3U2NoZW1hLnNlbGVjdFtrXSA9PT0gJyonKSByb3dzLnB1c2godXRpbC5mb3JtYXQoJyVzJywgdmlld1NjaGVtYS5zZWxlY3Rba10pKTtcbiAgICBlbHNlIHJvd3MucHVzaCh1dGlsLmZvcm1hdCgnXCIlc1wiJywgdmlld1NjaGVtYS5zZWxlY3Rba10pKTtcbiAgfVxuXG4gIGxldCBwYXJ0aXRpb25LZXkgPSB2aWV3U2NoZW1hLmtleVswXTtcbiAgbGV0IGNsdXN0ZXJpbmdLZXkgPSB2aWV3U2NoZW1hLmtleS5zbGljZSgxLCB2aWV3U2NoZW1hLmtleS5sZW5ndGgpO1xuICBjb25zdCBjbHVzdGVyaW5nT3JkZXIgPSBbXTtcblxuICBmb3IgKGxldCBmaWVsZCA9IDA7IGZpZWxkIDwgY2x1c3RlcmluZ0tleS5sZW5ndGg7IGZpZWxkKyspIHtcbiAgICBpZiAodmlld1NjaGVtYS5jbHVzdGVyaW5nX29yZGVyXG4gICAgICAgICYmIHZpZXdTY2hlbWEuY2x1c3RlcmluZ19vcmRlcltjbHVzdGVyaW5nS2V5W2ZpZWxkXV1cbiAgICAgICAgJiYgdmlld1NjaGVtYS5jbHVzdGVyaW5nX29yZGVyW2NsdXN0ZXJpbmdLZXlbZmllbGRdXS50b0xvd2VyQ2FzZSgpID09PSAnZGVzYycpIHtcbiAgICAgIGNsdXN0ZXJpbmdPcmRlci5wdXNoKHV0aWwuZm9ybWF0KCdcIiVzXCIgREVTQycsIGNsdXN0ZXJpbmdLZXlbZmllbGRdKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNsdXN0ZXJpbmdPcmRlci5wdXNoKHV0aWwuZm9ybWF0KCdcIiVzXCIgQVNDJywgY2x1c3RlcmluZ0tleVtmaWVsZF0pKTtcbiAgICB9XG4gIH1cblxuICBsZXQgY2x1c3RlcmluZ09yZGVyUXVlcnkgPSAnJztcbiAgaWYgKGNsdXN0ZXJpbmdPcmRlci5sZW5ndGggPiAwKSB7XG4gICAgY2x1c3RlcmluZ09yZGVyUXVlcnkgPSB1dGlsLmZvcm1hdCgnIFdJVEggQ0xVU1RFUklORyBPUkRFUiBCWSAoJXMpJywgY2x1c3RlcmluZ09yZGVyLnRvU3RyaW5nKCkpO1xuICB9XG5cbiAgaWYgKHBhcnRpdGlvbktleSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgcGFydGl0aW9uS2V5ID0gcGFydGl0aW9uS2V5Lm1hcCgodikgPT4gdXRpbC5mb3JtYXQoJ1wiJXNcIicsIHYpKS5qb2luKCcsJyk7XG4gIH0gZWxzZSB7XG4gICAgcGFydGl0aW9uS2V5ID0gdXRpbC5mb3JtYXQoJ1wiJXNcIicsIHBhcnRpdGlvbktleSk7XG4gIH1cblxuICBpZiAoY2x1c3RlcmluZ0tleS5sZW5ndGgpIHtcbiAgICBjbHVzdGVyaW5nS2V5ID0gY2x1c3RlcmluZ0tleS5tYXAoKHYpID0+ICh1dGlsLmZvcm1hdCgnXCIlc1wiJywgdikpKS5qb2luKCcsJyk7XG4gICAgY2x1c3RlcmluZ0tleSA9IHV0aWwuZm9ybWF0KCcsJXMnLCBjbHVzdGVyaW5nS2V5KTtcbiAgfSBlbHNlIHtcbiAgICBjbHVzdGVyaW5nS2V5ID0gJyc7XG4gIH1cblxuICBsZXQgd2hlcmVDbGF1c2UgPSBwYXJ0aXRpb25LZXkuc3BsaXQoJywnKS5qb2luKCcgSVMgTk9UIE5VTEwgQU5EICcpO1xuICBpZiAoY2x1c3RlcmluZ0tleSkgd2hlcmVDbGF1c2UgKz0gY2x1c3RlcmluZ0tleS5zcGxpdCgnLCcpLmpvaW4oJyBJUyBOT1QgTlVMTCBBTkQgJyk7XG4gIHdoZXJlQ2xhdXNlICs9ICcgSVMgTk9UIE5VTEwnO1xuXG4gIGNvbnN0IHF1ZXJ5ID0gdXRpbC5mb3JtYXQoXG4gICAgJ0NSRUFURSBNQVRFUklBTElaRUQgVklFVyBJRiBOT1QgRVhJU1RTIFwiJXNcIiBBUyBTRUxFQ1QgJXMgRlJPTSBcIiVzXCIgV0hFUkUgJXMgUFJJTUFSWSBLRVkoKCVzKSVzKSVzOycsXG4gICAgdmlld05hbWUsXG4gICAgcm93cy5qb2luKCcgLCAnKSxcbiAgICB0YWJsZU5hbWUsXG4gICAgd2hlcmVDbGF1c2UsXG4gICAgcGFydGl0aW9uS2V5LFxuICAgIGNsdXN0ZXJpbmdLZXksXG4gICAgY2x1c3RlcmluZ09yZGVyUXVlcnlcbiAgKTtcblxuICByZXR1cm4gcXVlcnk7XG59O1xuXG5CYXNlTW9kZWwuX2NyZWF0ZV9pbmRleF9xdWVyeSA9IGZ1bmN0aW9uIGYodGFibGVOYW1lLCBpbmRleE5hbWUpIHtcbiAgbGV0IHF1ZXJ5O1xuICBjb25zdCBpbmRleEV4cHJlc3Npb24gPSBpbmRleE5hbWUucmVwbGFjZSgvW1wiXFxzXS9nLCAnJykuc3BsaXQoL1soKV0vZyk7XG4gIGlmIChpbmRleEV4cHJlc3Npb24ubGVuZ3RoID4gMSkge1xuICAgIGluZGV4RXhwcmVzc2lvblswXSA9IGluZGV4RXhwcmVzc2lvblswXS50b0xvd2VyQ2FzZSgpO1xuICAgIHF1ZXJ5ID0gdXRpbC5mb3JtYXQoXG4gICAgICAnQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgT04gXCIlc1wiICglcyhcIiVzXCIpKTsnLFxuICAgICAgdGFibGVOYW1lLFxuICAgICAgaW5kZXhFeHByZXNzaW9uWzBdLFxuICAgICAgaW5kZXhFeHByZXNzaW9uWzFdXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBxdWVyeSA9IHV0aWwuZm9ybWF0KFxuICAgICAgJ0NSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIE9OIFwiJXNcIiAoXCIlc1wiKTsnLFxuICAgICAgdGFibGVOYW1lLFxuICAgICAgaW5kZXhFeHByZXNzaW9uWzBdXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBxdWVyeTtcbn07XG5cbkJhc2VNb2RlbC5fY3JlYXRlX2N1c3RvbV9pbmRleF9xdWVyeSA9IGZ1bmN0aW9uIGYodGFibGVOYW1lLCBjdXN0b21JbmRleCkge1xuICBsZXQgcXVlcnkgPSB1dGlsLmZvcm1hdChcbiAgICAnQ1JFQVRFIENVU1RPTSBJTkRFWCBJRiBOT1QgRVhJU1RTIE9OIFwiJXNcIiAoXCIlc1wiKSBVU0lORyBcXCclc1xcJycsXG4gICAgdGFibGVOYW1lLFxuICAgIGN1c3RvbUluZGV4Lm9uLFxuICAgIGN1c3RvbUluZGV4LnVzaW5nXG4gICk7XG5cbiAgaWYgKE9iamVjdC5rZXlzKGN1c3RvbUluZGV4Lm9wdGlvbnMpLmxlbmd0aCA+IDApIHtcbiAgICBxdWVyeSArPSAnIFdJVEggT1BUSU9OUyA9IHsnO1xuICAgIE9iamVjdC5rZXlzKGN1c3RvbUluZGV4Lm9wdGlvbnMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgcXVlcnkgKz0gdXRpbC5mb3JtYXQoXCInJXMnOiAnJXMnLCBcIiwga2V5LCBjdXN0b21JbmRleC5vcHRpb25zW2tleV0pO1xuICAgIH0pO1xuICAgIHF1ZXJ5ID0gcXVlcnkuc2xpY2UoMCwgLTIpO1xuICAgIHF1ZXJ5ICs9ICd9JztcbiAgfVxuXG4gIHF1ZXJ5ICs9ICc7JztcblxuICByZXR1cm4gcXVlcnk7XG59O1xuXG5CYXNlTW9kZWwuX2dldF9kYl90YWJsZV9zY2hlbWEgPSBmdW5jdGlvbiBmKGNhbGxiYWNrKSB7XG4gIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gIGNvbnN0IHRhYmxlTmFtZSA9IHRoaXMuX3Byb3BlcnRpZXMudGFibGVfbmFtZTtcbiAgY29uc3Qga2V5c3BhY2UgPSB0aGlzLl9wcm9wZXJ0aWVzLmtleXNwYWNlO1xuXG4gIGxldCBxdWVyeSA9ICdTRUxFQ1QgKiBGUk9NIHN5c3RlbV9zY2hlbWEuY29sdW1ucyBXSEVSRSB0YWJsZV9uYW1lID0gPyBBTkQga2V5c3BhY2VfbmFtZSA9ID87JztcblxuICBzZWxmLmV4ZWN1dGVfcXVlcnkocXVlcnksIFt0YWJsZU5hbWUsIGtleXNwYWNlXSwgKGVyciwgcmVzdWx0Q29sdW1ucykgPT4ge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIGNhbGxiYWNrKGJ1aWxkRXJyb3IoJ21vZGVsLnRhYmxlY3JlYXRpb24uZGJzY2hlbWFxdWVyeScsIGVycikpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghcmVzdWx0Q29sdW1ucy5yb3dzIHx8IHJlc3VsdENvbHVtbnMucm93cy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNhbGxiYWNrKG51bGwsIG51bGwpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGRiU2NoZW1hID0geyBmaWVsZHM6IHt9LCB0eXBlTWFwczoge30sIHN0YXRpY01hcHM6IHt9IH07XG5cbiAgICBmb3IgKGxldCByID0gMDsgciA8IHJlc3VsdENvbHVtbnMucm93cy5sZW5ndGg7IHIrKykge1xuICAgICAgY29uc3Qgcm93ID0gcmVzdWx0Q29sdW1ucy5yb3dzW3JdO1xuXG4gICAgICBkYlNjaGVtYS5maWVsZHNbcm93LmNvbHVtbl9uYW1lXSA9IFRZUEVfTUFQLmV4dHJhY3RfdHlwZShyb3cudHlwZSk7XG5cbiAgICAgIGNvbnN0IHR5cGVNYXBEZWYgPSBUWVBFX01BUC5leHRyYWN0X3R5cGVEZWYocm93LnR5cGUpO1xuICAgICAgaWYgKHR5cGVNYXBEZWYubGVuZ3RoID4gMCkge1xuICAgICAgICBkYlNjaGVtYS50eXBlTWFwc1tyb3cuY29sdW1uX25hbWVdID0gdHlwZU1hcERlZjtcbiAgICAgIH1cblxuICAgICAgaWYgKHJvdy5raW5kID09PSAncGFydGl0aW9uX2tleScpIHtcbiAgICAgICAgaWYgKCFkYlNjaGVtYS5rZXkpIGRiU2NoZW1hLmtleSA9IFtbXV07XG4gICAgICAgIGRiU2NoZW1hLmtleVswXVtyb3cucG9zaXRpb25dID0gcm93LmNvbHVtbl9uYW1lO1xuICAgICAgfSBlbHNlIGlmIChyb3cua2luZCA9PT0gJ2NsdXN0ZXJpbmcnKSB7XG4gICAgICAgIGlmICghZGJTY2hlbWEua2V5KSBkYlNjaGVtYS5rZXkgPSBbW11dO1xuICAgICAgICBpZiAoIWRiU2NoZW1hLmNsdXN0ZXJpbmdfb3JkZXIpIGRiU2NoZW1hLmNsdXN0ZXJpbmdfb3JkZXIgPSB7fTtcblxuICAgICAgICBkYlNjaGVtYS5rZXlbcm93LnBvc2l0aW9uICsgMV0gPSByb3cuY29sdW1uX25hbWU7XG4gICAgICAgIGlmIChyb3cuY2x1c3RlcmluZ19vcmRlciAmJiByb3cuY2x1c3RlcmluZ19vcmRlci50b0xvd2VyQ2FzZSgpID09PSAnZGVzYycpIHtcbiAgICAgICAgICBkYlNjaGVtYS5jbHVzdGVyaW5nX29yZGVyW3Jvdy5jb2x1bW5fbmFtZV0gPSAnREVTQyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGJTY2hlbWEuY2x1c3RlcmluZ19vcmRlcltyb3cuY29sdW1uX25hbWVdID0gJ0FTQyc7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocm93LmtpbmQgPT09ICdzdGF0aWMnKSB7XG4gICAgICAgIGRiU2NoZW1hLnN0YXRpY01hcHNbcm93LmNvbHVtbl9uYW1lXSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcXVlcnkgPSAnU0VMRUNUICogRlJPTSBzeXN0ZW1fc2NoZW1hLmluZGV4ZXMgV0hFUkUgdGFibGVfbmFtZSA9ID8gQU5EIGtleXNwYWNlX25hbWUgPSA/Oyc7XG5cbiAgICBzZWxmLmV4ZWN1dGVfcXVlcnkocXVlcnksIFt0YWJsZU5hbWUsIGtleXNwYWNlXSwgKGVycjEsIHJlc3VsdEluZGV4ZXMpID0+IHtcbiAgICAgIGlmIChlcnIxKSB7XG4gICAgICAgIGNhbGxiYWNrKGJ1aWxkRXJyb3IoJ21vZGVsLnRhYmxlY3JlYXRpb24uZGJzY2hlbWFxdWVyeScsIGVycjEpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGxldCByID0gMDsgciA8IHJlc3VsdEluZGV4ZXMucm93cy5sZW5ndGg7IHIrKykge1xuICAgICAgICBjb25zdCByb3cgPSByZXN1bHRJbmRleGVzLnJvd3Nbcl07XG5cbiAgICAgICAgaWYgKHJvdy5pbmRleF9uYW1lKSB7XG4gICAgICAgICAgY29uc3QgaW5kZXhPcHRpb25zID0gcm93Lm9wdGlvbnM7XG4gICAgICAgICAgbGV0IHRhcmdldCA9IGluZGV4T3B0aW9ucy50YXJnZXQ7XG4gICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnJlcGxhY2UoL1tcIlxcc10vZywgJycpO1xuICAgICAgICAgIGRlbGV0ZSBpbmRleE9wdGlvbnMudGFyZ2V0O1xuXG4gICAgICAgICAgLy8ga2VlcGluZyB0cmFjayBvZiBpbmRleCBuYW1lcyB0byBkcm9wIGluZGV4IHdoZW4gbmVlZGVkXG4gICAgICAgICAgaWYgKCFkYlNjaGVtYS5pbmRleF9uYW1lcykgZGJTY2hlbWEuaW5kZXhfbmFtZXMgPSB7fTtcblxuICAgICAgICAgIGlmIChyb3cua2luZCA9PT0gJ0NVU1RPTScpIHtcbiAgICAgICAgICAgIGNvbnN0IHVzaW5nID0gaW5kZXhPcHRpb25zLmNsYXNzX25hbWU7XG4gICAgICAgICAgICBkZWxldGUgaW5kZXhPcHRpb25zLmNsYXNzX25hbWU7XG5cbiAgICAgICAgICAgIGlmICghZGJTY2hlbWEuY3VzdG9tX2luZGV4ZXMpIGRiU2NoZW1hLmN1c3RvbV9pbmRleGVzID0gW107XG4gICAgICAgICAgICBjb25zdCBjdXN0b21JbmRleE9iamVjdCA9IHtcbiAgICAgICAgICAgICAgb246IHRhcmdldCxcbiAgICAgICAgICAgICAgdXNpbmcsXG4gICAgICAgICAgICAgIG9wdGlvbnM6IGluZGV4T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBkYlNjaGVtYS5jdXN0b21faW5kZXhlcy5wdXNoKGN1c3RvbUluZGV4T2JqZWN0KTtcbiAgICAgICAgICAgIGRiU2NoZW1hLmluZGV4X25hbWVzW29iamVjdEhhc2goY3VzdG9tSW5kZXhPYmplY3QpXSA9IHJvdy5pbmRleF9uYW1lO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoIWRiU2NoZW1hLmluZGV4ZXMpIGRiU2NoZW1hLmluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgIGRiU2NoZW1hLmluZGV4ZXMucHVzaCh0YXJnZXQpO1xuICAgICAgICAgICAgZGJTY2hlbWEuaW5kZXhfbmFtZXNbdGFyZ2V0XSA9IHJvdy5pbmRleF9uYW1lO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBxdWVyeSA9ICdTRUxFQ1Qgdmlld19uYW1lLGJhc2VfdGFibGVfbmFtZSBGUk9NIHN5c3RlbV9zY2hlbWEudmlld3MgV0hFUkUga2V5c3BhY2VfbmFtZT0/Oyc7XG5cbiAgICAgIHNlbGYuZXhlY3V0ZV9xdWVyeShxdWVyeSwgW2tleXNwYWNlXSwgKGVycjIsIHJlc3VsdFZpZXdzKSA9PiB7XG4gICAgICAgIGlmIChlcnIyKSB7XG4gICAgICAgICAgY2FsbGJhY2soYnVpbGRFcnJvcignbW9kZWwudGFibGVjcmVhdGlvbi5kYnNjaGVtYXF1ZXJ5JywgZXJyMikpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgcmVzdWx0Vmlld3Mucm93cy5sZW5ndGg7IHIrKykge1xuICAgICAgICAgIGNvbnN0IHJvdyA9IHJlc3VsdFZpZXdzLnJvd3Nbcl07XG5cbiAgICAgICAgICBpZiAocm93LmJhc2VfdGFibGVfbmFtZSA9PT0gdGFibGVOYW1lKSB7XG4gICAgICAgICAgICBpZiAoIWRiU2NoZW1hLm1hdGVyaWFsaXplZF92aWV3cykgZGJTY2hlbWEubWF0ZXJpYWxpemVkX3ZpZXdzID0ge307XG4gICAgICAgICAgICBkYlNjaGVtYS5tYXRlcmlhbGl6ZWRfdmlld3Nbcm93LnZpZXdfbmFtZV0gPSB7fTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGJTY2hlbWEubWF0ZXJpYWxpemVkX3ZpZXdzKSB7XG4gICAgICAgICAgcXVlcnkgPSAnU0VMRUNUICogRlJPTSBzeXN0ZW1fc2NoZW1hLmNvbHVtbnMgV0hFUkUga2V5c3BhY2VfbmFtZT0/IGFuZCB0YWJsZV9uYW1lIElOID87JztcblxuICAgICAgICAgIHNlbGYuZXhlY3V0ZV9xdWVyeShxdWVyeSwgW2tleXNwYWNlLCBPYmplY3Qua2V5cyhkYlNjaGVtYS5tYXRlcmlhbGl6ZWRfdmlld3MpXSwgKGVycjMsIHJlc3VsdE1hdFZpZXdzKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyMykge1xuICAgICAgICAgICAgICBjYWxsYmFjayhidWlsZEVycm9yKCdtb2RlbC50YWJsZWNyZWF0aW9uLmRic2NoZW1hcXVlcnknLCBlcnIzKSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCByZXN1bHRNYXRWaWV3cy5yb3dzLmxlbmd0aDsgcisrKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHJvdyA9IHJlc3VsdE1hdFZpZXdzLnJvd3Nbcl07XG5cbiAgICAgICAgICAgICAgaWYgKCFkYlNjaGVtYS5tYXRlcmlhbGl6ZWRfdmlld3Nbcm93LnRhYmxlX25hbWVdLnNlbGVjdCkge1xuICAgICAgICAgICAgICAgIGRiU2NoZW1hLm1hdGVyaWFsaXplZF92aWV3c1tyb3cudGFibGVfbmFtZV0uc2VsZWN0ID0gW107XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBkYlNjaGVtYS5tYXRlcmlhbGl6ZWRfdmlld3Nbcm93LnRhYmxlX25hbWVdLnNlbGVjdC5wdXNoKHJvdy5jb2x1bW5fbmFtZSk7XG5cbiAgICAgICAgICAgICAgaWYgKHJvdy5raW5kID09PSAncGFydGl0aW9uX2tleScpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWRiU2NoZW1hLm1hdGVyaWFsaXplZF92aWV3c1tyb3cudGFibGVfbmFtZV0ua2V5KSB7XG4gICAgICAgICAgICAgICAgICBkYlNjaGVtYS5tYXRlcmlhbGl6ZWRfdmlld3Nbcm93LnRhYmxlX25hbWVdLmtleSA9IFtbXV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZGJTY2hlbWEubWF0ZXJpYWxpemVkX3ZpZXdzW3Jvdy50YWJsZV9uYW1lXS5rZXlbMF1bcm93LnBvc2l0aW9uXSA9IHJvdy5jb2x1bW5fbmFtZTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyb3cua2luZCA9PT0gJ2NsdXN0ZXJpbmcnKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkYlNjaGVtYS5tYXRlcmlhbGl6ZWRfdmlld3Nbcm93LnRhYmxlX25hbWVdLmtleSkge1xuICAgICAgICAgICAgICAgICAgZGJTY2hlbWEubWF0ZXJpYWxpemVkX3ZpZXdzW3Jvdy50YWJsZV9uYW1lXS5rZXkgPSBbW11dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWRiU2NoZW1hLm1hdGVyaWFsaXplZF92aWV3c1tyb3cudGFibGVfbmFtZV0uY2x1c3RlcmluZ19vcmRlcikge1xuICAgICAgICAgICAgICAgICAgZGJTY2hlbWEubWF0ZXJpYWxpemVkX3ZpZXdzW3Jvdy50YWJsZV9uYW1lXS5jbHVzdGVyaW5nX29yZGVyID0ge307XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZGJTY2hlbWEubWF0ZXJpYWxpemVkX3ZpZXdzW3Jvdy50YWJsZV9uYW1lXS5rZXlbcm93LnBvc2l0aW9uICsgMV0gPSByb3cuY29sdW1uX25hbWU7XG4gICAgICAgICAgICAgICAgaWYgKHJvdy5jbHVzdGVyaW5nX29yZGVyICYmIHJvdy5jbHVzdGVyaW5nX29yZGVyLnRvTG93ZXJDYXNlKCkgPT09ICdkZXNjJykge1xuICAgICAgICAgICAgICAgICAgZGJTY2hlbWEubWF0ZXJpYWxpemVkX3ZpZXdzW3Jvdy50YWJsZV9uYW1lXS5jbHVzdGVyaW5nX29yZGVyW3Jvdy5jb2x1bW5fbmFtZV0gPSAnREVTQyc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGRiU2NoZW1hLm1hdGVyaWFsaXplZF92aWV3c1tyb3cudGFibGVfbmFtZV0uY2x1c3RlcmluZ19vcmRlcltyb3cuY29sdW1uX25hbWVdID0gJ0FTQyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGRiU2NoZW1hKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYWxsYmFjayhudWxsLCBkYlNjaGVtYSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbkJhc2VNb2RlbC5fZXhlY3V0ZV90YWJsZV9xdWVyeSA9IGZ1bmN0aW9uIGYocXVlcnksIHBhcmFtcywgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDMpIHtcbiAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgb3B0aW9ucyA9IHsgcHJlcGFyZTogdHJ1ZSB9O1xuICB9XG5cbiAgY29uc3QgZG9FeGVjdXRlUXVlcnkgPSBmdW5jdGlvbiBmMShkb3F1ZXJ5LCBkb2NhbGxiYWNrKSB7XG4gICAgdGhpcy5leGVjdXRlX3F1ZXJ5KGRvcXVlcnksIHBhcmFtcywgb3B0aW9ucywgZG9jYWxsYmFjayk7XG4gIH0uYmluZCh0aGlzLCBxdWVyeSk7XG5cbiAgaWYgKHRoaXMuaXNfdGFibGVfcmVhZHkoKSkge1xuICAgIGRvRXhlY3V0ZVF1ZXJ5KGNhbGxiYWNrKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmluaXQoKGVycikgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBjYWxsYmFjayhlcnIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBkb0V4ZWN1dGVRdWVyeShjYWxsYmFjayk7XG4gICAgfSk7XG4gIH1cbn07XG5cbkJhc2VNb2RlbC5fZ2V0X2RiX3ZhbHVlX2V4cHJlc3Npb24gPSBmdW5jdGlvbiBmKGZpZWxkbmFtZSwgZmllbGR2YWx1ZSkge1xuICBpZiAoZmllbGR2YWx1ZSA9PSBudWxsIHx8IGZpZWxkdmFsdWUgPT09IGNxbC50eXBlcy51bnNldCkge1xuICAgIHJldHVybiB7IHF1ZXJ5X3NlZ21lbnQ6ICc/JywgcGFyYW1ldGVyOiBmaWVsZHZhbHVlIH07XG4gIH1cblxuICBpZiAoXy5pc1BsYWluT2JqZWN0KGZpZWxkdmFsdWUpICYmIGZpZWxkdmFsdWUuJGRiX2Z1bmN0aW9uKSB7XG4gICAgcmV0dXJuIGZpZWxkdmFsdWUuJGRiX2Z1bmN0aW9uO1xuICB9XG5cbiAgY29uc3QgZmllbGR0eXBlID0gc2NoZW1lci5nZXRfZmllbGRfdHlwZSh0aGlzLl9wcm9wZXJ0aWVzLnNjaGVtYSwgZmllbGRuYW1lKTtcbiAgY29uc3QgdmFsaWRhdG9ycyA9IHRoaXMuX2dldF92YWxpZGF0b3JzKGZpZWxkbmFtZSk7XG5cbiAgaWYgKGZpZWxkdmFsdWUgaW5zdGFuY2VvZiBBcnJheSAmJiBmaWVsZHR5cGUgIT09ICdsaXN0JyAmJiBmaWVsZHR5cGUgIT09ICdzZXQnICYmIGZpZWxkdHlwZSAhPT0gJ2Zyb3plbicpIHtcbiAgICBjb25zdCB2YWwgPSBmaWVsZHZhbHVlLm1hcCgodikgPT4ge1xuICAgICAgY29uc3QgZGJWYWwgPSB0aGlzLl9nZXRfZGJfdmFsdWVfZXhwcmVzc2lvbihmaWVsZG5hbWUsIHYpO1xuXG4gICAgICBpZiAoXy5pc1BsYWluT2JqZWN0KGRiVmFsKSAmJiBkYlZhbC5wYXJhbWV0ZXIpIHJldHVybiBkYlZhbC5wYXJhbWV0ZXI7XG4gICAgICByZXR1cm4gZGJWYWw7XG4gICAgfSk7XG5cbiAgICByZXR1cm4geyBxdWVyeV9zZWdtZW50OiAnPycsIHBhcmFtZXRlcjogdmFsIH07XG4gIH1cblxuICBpZiAodGhpcy5fdmFsaWRhdGUodmFsaWRhdG9ycywgZmllbGR2YWx1ZSkgIT09IHRydWUpIHtcbiAgICB0aHJvdyAoYnVpbGRFcnJvcignbW9kZWwudmFsdWUuaW52YWxpZHZhbHVlJywgZmllbGR2YWx1ZSwgZmllbGRuYW1lLCBmaWVsZHR5cGUpKTtcbiAgfVxuXG4gIGlmIChmaWVsZHR5cGUgPT09ICdjb3VudGVyJykge1xuICAgIGxldCBjb3VudGVyUXVlcnlTZWdtZW50ID0gdXRpbC5mb3JtYXQoJ1wiJXNcIicsIGZpZWxkbmFtZSk7XG4gICAgaWYgKGZpZWxkdmFsdWUgPj0gMCkgY291bnRlclF1ZXJ5U2VnbWVudCArPSAnICsgPyc7XG4gICAgZWxzZSBjb3VudGVyUXVlcnlTZWdtZW50ICs9ICcgLSA/JztcbiAgICBmaWVsZHZhbHVlID0gTWF0aC5hYnMoZmllbGR2YWx1ZSk7XG4gICAgcmV0dXJuIHsgcXVlcnlfc2VnbWVudDogY291bnRlclF1ZXJ5U2VnbWVudCwgcGFyYW1ldGVyOiBmaWVsZHZhbHVlIH07XG4gIH1cblxuICByZXR1cm4geyBxdWVyeV9zZWdtZW50OiAnPycsIHBhcmFtZXRlcjogZmllbGR2YWx1ZSB9O1xufTtcblxuQmFzZU1vZGVsLl9jcmVhdGVfd2hlcmVfY2xhdXNlID0gZnVuY3Rpb24gZihxdWVyeU9iamVjdCkge1xuICBjb25zdCBxdWVyeVJlbGF0aW9ucyA9IFtdO1xuICBjb25zdCBxdWVyeVBhcmFtcyA9IFtdO1xuXG4gIE9iamVjdC5rZXlzKHF1ZXJ5T2JqZWN0KS5mb3JFYWNoKChrKSA9PiB7XG4gICAgaWYgKGsuaW5kZXhPZignJCcpID09PSAwKSB7XG4gICAgICAvLyBzZWFyY2ggcXVlcmllcyBiYXNlZCBvbiBsdWNlbmUgaW5kZXggb3Igc29sclxuICAgICAgLy8gZXNjYXBlIGFsbCBzaW5nbGUgcXVvdGVzIGZvciBxdWVyaWVzIGluIGNhc3NhbmRyYVxuICAgICAgaWYgKGsgPT09ICckZXhwcicpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBxdWVyeU9iamVjdFtrXS5pbmRleCA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIHF1ZXJ5T2JqZWN0W2tdLnF1ZXJ5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHF1ZXJ5UmVsYXRpb25zLnB1c2godXRpbC5mb3JtYXQoXG4gICAgICAgICAgICBcImV4cHIoJXMsJyVzJylcIixcbiAgICAgICAgICAgIHF1ZXJ5T2JqZWN0W2tdLmluZGV4LCBxdWVyeU9iamVjdFtrXS5xdWVyeS5yZXBsYWNlKC8nL2csIFwiJydcIilcbiAgICAgICAgICApKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyAoYnVpbGRFcnJvcignbW9kZWwuZmluZC5pbnZhbGlkZXhwcicpKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChrID09PSAnJHNvbHJfcXVlcnknKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcXVlcnlPYmplY3Rba10gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgcXVlcnlSZWxhdGlvbnMucHVzaCh1dGlsLmZvcm1hdChcbiAgICAgICAgICAgIFwic29scl9xdWVyeT0nJXMnXCIsXG4gICAgICAgICAgICBxdWVyeU9iamVjdFtrXS5yZXBsYWNlKC8nL2csIFwiJydcIilcbiAgICAgICAgICApKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyAoYnVpbGRFcnJvcignbW9kZWwuZmluZC5pbnZhbGlkc29scnF1ZXJ5JykpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHdoZXJlT2JqZWN0ID0gcXVlcnlPYmplY3Rba107XG4gICAgLy8gQXJyYXkgb2Ygb3BlcmF0b3JzXG4gICAgaWYgKCEod2hlcmVPYmplY3QgaW5zdGFuY2VvZiBBcnJheSkpIHdoZXJlT2JqZWN0ID0gW3doZXJlT2JqZWN0XTtcblxuICAgIGZvciAobGV0IGZrID0gMDsgZmsgPCB3aGVyZU9iamVjdC5sZW5ndGg7IGZrKyspIHtcbiAgICAgIGxldCBmaWVsZFJlbGF0aW9uID0gd2hlcmVPYmplY3RbZmtdO1xuXG4gICAgICBjb25zdCBjcWxPcGVyYXRvcnMgPSB7XG4gICAgICAgICRlcTogJz0nLFxuICAgICAgICAkZ3Q6ICc+JyxcbiAgICAgICAgJGx0OiAnPCcsXG4gICAgICAgICRndGU6ICc+PScsXG4gICAgICAgICRsdGU6ICc8PScsXG4gICAgICAgICRpbjogJ0lOJyxcbiAgICAgICAgJGxpa2U6ICdMSUtFJyxcbiAgICAgICAgJHRva2VuOiAndG9rZW4nLFxuICAgICAgICAkY29udGFpbnM6ICdDT05UQUlOUycsXG4gICAgICAgICRjb250YWluc19rZXk6ICdDT05UQUlOUyBLRVknLFxuICAgICAgfTtcblxuICAgICAgaWYgKF8uaXNQbGFpbk9iamVjdChmaWVsZFJlbGF0aW9uKSkge1xuICAgICAgICBjb25zdCB2YWxpZEtleXMgPSBPYmplY3Qua2V5cyhjcWxPcGVyYXRvcnMpO1xuICAgICAgICBjb25zdCBmaWVsZFJlbGF0aW9uS2V5cyA9IE9iamVjdC5rZXlzKGZpZWxkUmVsYXRpb24pO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpZWxkUmVsYXRpb25LZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKHZhbGlkS2V5cy5pbmRleE9mKGZpZWxkUmVsYXRpb25LZXlzW2ldKSA8IDApIHsgLy8gZmllbGQgcmVsYXRpb24ga2V5IGludmFsaWRcbiAgICAgICAgICAgIGZpZWxkUmVsYXRpb24gPSB7ICRlcTogZmllbGRSZWxhdGlvbiB9O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaWVsZFJlbGF0aW9uID0geyAkZXE6IGZpZWxkUmVsYXRpb24gfTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVsS2V5cyA9IE9iamVjdC5rZXlzKGZpZWxkUmVsYXRpb24pO1xuICAgICAgZm9yIChsZXQgcmsgPSAwOyByayA8IHJlbEtleXMubGVuZ3RoOyByaysrKSB7XG4gICAgICAgIGxldCBmaXJzdEtleSA9IHJlbEtleXNbcmtdO1xuICAgICAgICBjb25zdCBmaXJzdFZhbHVlID0gZmllbGRSZWxhdGlvbltmaXJzdEtleV07XG4gICAgICAgIGlmIChmaXJzdEtleS50b0xvd2VyQ2FzZSgpIGluIGNxbE9wZXJhdG9ycykge1xuICAgICAgICAgIGZpcnN0S2V5ID0gZmlyc3RLZXkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICBsZXQgb3AgPSBjcWxPcGVyYXRvcnNbZmlyc3RLZXldO1xuXG4gICAgICAgICAgaWYgKGZpcnN0S2V5ID09PSAnJGluJyAmJiAhKGZpcnN0VmFsdWUgaW5zdGFuY2VvZiBBcnJheSkpIHRocm93IChidWlsZEVycm9yKCdtb2RlbC5maW5kLmludmFsaWRpbm9wJykpO1xuICAgICAgICAgIGlmIChmaXJzdEtleSA9PT0gJyR0b2tlbicgJiYgIShmaXJzdFZhbHVlIGluc3RhbmNlb2YgT2JqZWN0KSkgdGhyb3cgKGJ1aWxkRXJyb3IoJ21vZGVsLmZpbmQuaW52YWxpZHRva2VuJykpO1xuXG4gICAgICAgICAgbGV0IHdoZXJlVGVtcGxhdGUgPSAnXCIlc1wiICVzICVzJztcbiAgICAgICAgICBpZiAoZmlyc3RLZXkgPT09ICckdG9rZW4nKSB7XG4gICAgICAgICAgICB3aGVyZVRlbXBsYXRlID0gJ3Rva2VuKFwiJXNcIikgJXMgdG9rZW4oJXMpJztcblxuICAgICAgICAgICAgY29uc3QgdG9rZW5SZWxLZXlzID0gT2JqZWN0LmtleXMoZmlyc3RWYWx1ZSk7XG4gICAgICAgICAgICBmb3IgKGxldCB0b2tlblJLID0gMDsgdG9rZW5SSyA8IHRva2VuUmVsS2V5cy5sZW5ndGg7IHRva2VuUksrKykge1xuICAgICAgICAgICAgICBsZXQgdG9rZW5GaXJzdEtleSA9IHRva2VuUmVsS2V5c1t0b2tlblJLXTtcbiAgICAgICAgICAgICAgY29uc3QgdG9rZW5GaXJzdFZhbHVlID0gZmlyc3RWYWx1ZVt0b2tlbkZpcnN0S2V5XTtcbiAgICAgICAgICAgICAgdG9rZW5GaXJzdEtleSA9IHRva2VuRmlyc3RLZXkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgaWYgKCh0b2tlbkZpcnN0S2V5IGluIGNxbE9wZXJhdG9ycykgJiYgdG9rZW5GaXJzdEtleSAhPT0gJyR0b2tlbicgJiYgdG9rZW5GaXJzdEtleSAhPT0gJyRpbicpIHtcbiAgICAgICAgICAgICAgICBvcCA9IGNxbE9wZXJhdG9yc1t0b2tlbkZpcnN0S2V5XTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAoYnVpbGRFcnJvcignbW9kZWwuZmluZC5pbnZhbGlkb3AnLCB0b2tlbkZpcnN0S2V5KSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAodG9rZW5GaXJzdFZhbHVlIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b2tlbktleXMgPSBrLnNwbGl0KCcsJyk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdG9rZW5JbmRleCA9IDA7IHRva2VuSW5kZXggPCB0b2tlbkZpcnN0VmFsdWUubGVuZ3RoOyB0b2tlbkluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgIHRva2VuS2V5c1t0b2tlbkluZGV4XSA9IHRva2VuS2V5c1t0b2tlbkluZGV4XS50cmltKCk7XG4gICAgICAgICAgICAgICAgICBjb25zdCBkYlZhbCA9IHRoaXMuX2dldF9kYl92YWx1ZV9leHByZXNzaW9uKHRva2VuS2V5c1t0b2tlbkluZGV4XSwgdG9rZW5GaXJzdFZhbHVlW3Rva2VuSW5kZXhdKTtcbiAgICAgICAgICAgICAgICAgIGlmIChfLmlzUGxhaW5PYmplY3QoZGJWYWwpICYmIGRiVmFsLnF1ZXJ5X3NlZ21lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5GaXJzdFZhbHVlW3Rva2VuSW5kZXhdID0gZGJWYWwucXVlcnlfc2VnbWVudDtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlQYXJhbXMucHVzaChkYlZhbC5wYXJhbWV0ZXIpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5GaXJzdFZhbHVlW3Rva2VuSW5kZXhdID0gZGJWYWw7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHF1ZXJ5UmVsYXRpb25zLnB1c2godXRpbC5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICB3aGVyZVRlbXBsYXRlLFxuICAgICAgICAgICAgICAgICAgdG9rZW5LZXlzLmpvaW4oJ1wiLFwiJyksIG9wLCB0b2tlbkZpcnN0VmFsdWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICkpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRiVmFsID0gdGhpcy5fZ2V0X2RiX3ZhbHVlX2V4cHJlc3Npb24oaywgdG9rZW5GaXJzdFZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAoXy5pc1BsYWluT2JqZWN0KGRiVmFsKSAmJiBkYlZhbC5xdWVyeV9zZWdtZW50KSB7XG4gICAgICAgICAgICAgICAgICBxdWVyeVJlbGF0aW9ucy5wdXNoKHV0aWwuZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgICB3aGVyZVRlbXBsYXRlLFxuICAgICAgICAgICAgICAgICAgICBrLCBvcCwgZGJWYWwucXVlcnlfc2VnbWVudFxuICAgICAgICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICAgICAgICBxdWVyeVBhcmFtcy5wdXNoKGRiVmFsLnBhcmFtZXRlcik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHF1ZXJ5UmVsYXRpb25zLnB1c2godXRpbC5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlVGVtcGxhdGUsXG4gICAgICAgICAgICAgICAgICAgIGssIG9wLCBkYlZhbFxuICAgICAgICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChmaXJzdEtleSA9PT0gJyRjb250YWlucycpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkdHlwZTEgPSBzY2hlbWVyLmdldF9maWVsZF90eXBlKHRoaXMuX3Byb3BlcnRpZXMuc2NoZW1hLCBrKTtcbiAgICAgICAgICAgIGlmIChbJ21hcCcsICdsaXN0JywgJ3NldCcsICdmcm96ZW4nXS5pbmRleE9mKGZpZWxkdHlwZTEpID49IDApIHtcbiAgICAgICAgICAgICAgaWYgKGZpZWxkdHlwZTEgPT09ICdtYXAnICYmIF8uaXNQbGFpbk9iamVjdChmaXJzdFZhbHVlKSAmJiBPYmplY3Qua2V5cyhmaXJzdFZhbHVlKS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVJlbGF0aW9ucy5wdXNoKHV0aWwuZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgJ1wiJXNcIlslc10gJXMgJXMnLFxuICAgICAgICAgICAgICAgICAgaywgJz8nLCAnPScsICc/J1xuICAgICAgICAgICAgICAgICkpO1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zLnB1c2goT2JqZWN0LmtleXMoZmlyc3RWYWx1ZSlbMF0pO1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zLnB1c2goZmlyc3RWYWx1ZVtPYmplY3Qua2V5cyhmaXJzdFZhbHVlKVswXV0pO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UmVsYXRpb25zLnB1c2godXRpbC5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICB3aGVyZVRlbXBsYXRlLFxuICAgICAgICAgICAgICAgICAgaywgb3AsICc/J1xuICAgICAgICAgICAgICAgICkpO1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zLnB1c2goZmlyc3RWYWx1ZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRocm93IChuZXcgRXJyb3IoJyRjb250YWlucyBvcGVyYXRvciBpcyBvbmx5IHZhbGlkIGZvciBpbmRleGVkIGNvbGxlY3Rpb25zJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoZmlyc3RLZXkgPT09ICckY29udGFpbnNfa2V5Jykge1xuICAgICAgICAgICAgY29uc3QgZmllbGR0eXBlMiA9IHNjaGVtZXIuZ2V0X2ZpZWxkX3R5cGUodGhpcy5fcHJvcGVydGllcy5zY2hlbWEsIGspO1xuICAgICAgICAgICAgaWYgKFsnbWFwJ10uaW5kZXhPZihmaWVsZHR5cGUyKSA+PSAwKSB7XG4gICAgICAgICAgICAgIHF1ZXJ5UmVsYXRpb25zLnB1c2godXRpbC5mb3JtYXQoXG4gICAgICAgICAgICAgICAgd2hlcmVUZW1wbGF0ZSxcbiAgICAgICAgICAgICAgICBrLCBvcCwgJz8nXG4gICAgICAgICAgICAgICkpO1xuICAgICAgICAgICAgICBxdWVyeVBhcmFtcy5wdXNoKGZpcnN0VmFsdWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhyb3cgKG5ldyBFcnJvcignJGNvbnRhaW5zX2tleSBvcGVyYXRvciBpcyBvbmx5IHZhbGlkIGZvciBpbmRleGVkIG1hcCBjb2xsZWN0aW9ucycpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZGJWYWwgPSB0aGlzLl9nZXRfZGJfdmFsdWVfZXhwcmVzc2lvbihrLCBmaXJzdFZhbHVlKTtcbiAgICAgICAgICAgIGlmIChfLmlzUGxhaW5PYmplY3QoZGJWYWwpICYmIGRiVmFsLnF1ZXJ5X3NlZ21lbnQpIHtcbiAgICAgICAgICAgICAgcXVlcnlSZWxhdGlvbnMucHVzaCh1dGlsLmZvcm1hdChcbiAgICAgICAgICAgICAgICB3aGVyZVRlbXBsYXRlLFxuICAgICAgICAgICAgICAgIGssIG9wLCBkYlZhbC5xdWVyeV9zZWdtZW50XG4gICAgICAgICAgICAgICkpO1xuICAgICAgICAgICAgICBxdWVyeVBhcmFtcy5wdXNoKGRiVmFsLnBhcmFtZXRlcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBxdWVyeVJlbGF0aW9ucy5wdXNoKHV0aWwuZm9ybWF0KFxuICAgICAgICAgICAgICAgIHdoZXJlVGVtcGxhdGUsXG4gICAgICAgICAgICAgICAgaywgb3AsIGRiVmFsXG4gICAgICAgICAgICAgICkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyAoYnVpbGRFcnJvcignbW9kZWwuZmluZC5pbnZhbGlkb3AnLCBmaXJzdEtleSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4ge1xuICAgIHF1ZXJ5OiAocXVlcnlSZWxhdGlvbnMubGVuZ3RoID4gMCA/IHV0aWwuZm9ybWF0KCdXSEVSRSAlcycsIHF1ZXJ5UmVsYXRpb25zLmpvaW4oJyBBTkQgJykpIDogJycpLFxuICAgIHBhcmFtczogcXVlcnlQYXJhbXMsXG4gIH07XG59O1xuXG5CYXNlTW9kZWwuX2NyZWF0ZV9maW5kX3F1ZXJ5ID0gZnVuY3Rpb24gZihxdWVyeU9iamVjdCwgb3B0aW9ucykge1xuICBjb25zdCBvcmRlcktleXMgPSBbXTtcbiAgbGV0IGxpbWl0ID0gbnVsbDtcblxuICBPYmplY3Qua2V5cyhxdWVyeU9iamVjdCkuZm9yRWFjaCgoaykgPT4ge1xuICAgIGNvbnN0IHF1ZXJ5SXRlbSA9IHF1ZXJ5T2JqZWN0W2tdO1xuICAgIGlmIChrLnRvTG93ZXJDYXNlKCkgPT09ICckb3JkZXJieScpIHtcbiAgICAgIGlmICghKHF1ZXJ5SXRlbSBpbnN0YW5jZW9mIE9iamVjdCkpIHtcbiAgICAgICAgdGhyb3cgKGJ1aWxkRXJyb3IoJ21vZGVsLmZpbmQuaW52YWxpZG9yZGVyJykpO1xuICAgICAgfVxuICAgICAgY29uc3Qgb3JkZXJJdGVtS2V5cyA9IE9iamVjdC5rZXlzKHF1ZXJ5SXRlbSk7XG4gICAgICBpZiAob3JkZXJJdGVtS2V5cy5sZW5ndGggPiAxKSB0aHJvdyAoYnVpbGRFcnJvcignbW9kZWwuZmluZC5tdWx0aW9yZGVyJykpO1xuXG4gICAgICBjb25zdCBjcWxPcmRlckRpcmVjdGlvbiA9IHsgJGFzYzogJ0FTQycsICRkZXNjOiAnREVTQycgfTtcbiAgICAgIGlmIChvcmRlckl0ZW1LZXlzWzBdLnRvTG93ZXJDYXNlKCkgaW4gY3FsT3JkZXJEaXJlY3Rpb24pIHtcbiAgICAgICAgbGV0IG9yZGVyRmllbGRzID0gcXVlcnlJdGVtW29yZGVySXRlbUtleXNbMF1dO1xuXG4gICAgICAgIGlmICghKG9yZGVyRmllbGRzIGluc3RhbmNlb2YgQXJyYXkpKSBvcmRlckZpZWxkcyA9IFtvcmRlckZpZWxkc107XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcmRlckZpZWxkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIG9yZGVyS2V5cy5wdXNoKHV0aWwuZm9ybWF0KFxuICAgICAgICAgICAgJ1wiJXNcIiAlcycsXG4gICAgICAgICAgICBvcmRlckZpZWxkc1tpXSwgY3FsT3JkZXJEaXJlY3Rpb25bb3JkZXJJdGVtS2V5c1swXV1cbiAgICAgICAgICApKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgKGJ1aWxkRXJyb3IoJ21vZGVsLmZpbmQuaW52YWxpZG9yZGVydHlwZScsIG9yZGVySXRlbUtleXNbMF0pKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGsudG9Mb3dlckNhc2UoKSA9PT0gJyRsaW1pdCcpIHtcbiAgICAgIGlmICh0eXBlb2YgcXVlcnlJdGVtICE9PSAnbnVtYmVyJykgdGhyb3cgKGJ1aWxkRXJyb3IoJ21vZGVsLmZpbmQubGltaXR0eXBlJykpO1xuICAgICAgbGltaXQgPSBxdWVyeUl0ZW07XG4gICAgfVxuICB9KTtcblxuICBjb25zdCB3aGVyZUNsYXVzZSA9IHRoaXMuX2NyZWF0ZV93aGVyZV9jbGF1c2UocXVlcnlPYmplY3QpO1xuXG4gIGxldCBzZWxlY3QgPSAnKic7XG4gIGlmIChvcHRpb25zLnNlbGVjdCAmJiBfLmlzQXJyYXkob3B0aW9ucy5zZWxlY3QpICYmIG9wdGlvbnMuc2VsZWN0Lmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBzZWxlY3RBcnJheSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3B0aW9ucy5zZWxlY3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIHNlcGFyYXRlIHRoZSBhZ2dyZWdhdGUgZnVuY3Rpb24gYW5kIHRoZSBjb2x1bW4gbmFtZSBpZiBzZWxlY3QgaXMgYW4gYWdncmVnYXRlIGZ1bmN0aW9uXG4gICAgICBjb25zdCBzZWxlY3Rpb24gPSBvcHRpb25zLnNlbGVjdFtpXS5zcGxpdCgvWyggKV0vZykuZmlsdGVyKChlKSA9PiAoZSkpO1xuICAgICAgaWYgKHNlbGVjdGlvbi5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgc2VsZWN0QXJyYXkucHVzaCh1dGlsLmZvcm1hdCgnXCIlc1wiJywgc2VsZWN0aW9uWzBdKSk7XG4gICAgICB9IGVsc2UgaWYgKHNlbGVjdGlvbi5sZW5ndGggPT09IDIgfHwgc2VsZWN0aW9uLmxlbmd0aCA9PT0gNCkge1xuICAgICAgICBsZXQgZnVuY3Rpb25DbGF1c2UgPSB1dGlsLmZvcm1hdCgnJXMoXCIlc1wiKScsIHNlbGVjdGlvblswXSwgc2VsZWN0aW9uWzFdKTtcbiAgICAgICAgaWYgKHNlbGVjdGlvblsyXSkgZnVuY3Rpb25DbGF1c2UgKz0gdXRpbC5mb3JtYXQoJyAlcycsIHNlbGVjdGlvblsyXSk7XG4gICAgICAgIGlmIChzZWxlY3Rpb25bM10pIGZ1bmN0aW9uQ2xhdXNlICs9IHV0aWwuZm9ybWF0KCcgJXMnLCBzZWxlY3Rpb25bM10pO1xuXG4gICAgICAgIHNlbGVjdEFycmF5LnB1c2goZnVuY3Rpb25DbGF1c2UpO1xuICAgICAgfSBlbHNlIGlmIChzZWxlY3Rpb24ubGVuZ3RoID09PSAzKSB7XG4gICAgICAgIHNlbGVjdEFycmF5LnB1c2godXRpbC5mb3JtYXQoJ1wiJXNcIiAlcyAlcycsIHNlbGVjdGlvblswXSwgc2VsZWN0aW9uWzFdLCBzZWxlY3Rpb25bMl0pKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGVjdEFycmF5LnB1c2goJyonKTtcbiAgICAgIH1cbiAgICB9XG4gICAgc2VsZWN0ID0gc2VsZWN0QXJyYXkuam9pbignLCcpO1xuICB9XG5cbiAgbGV0IHF1ZXJ5ID0gdXRpbC5mb3JtYXQoXG4gICAgJ1NFTEVDVCAlcyAlcyBGUk9NIFwiJXNcIiAlcyAlcyAlcycsXG4gICAgKG9wdGlvbnMuZGlzdGluY3QgPyAnRElTVElOQ1QnIDogJycpLFxuICAgIHNlbGVjdCxcbiAgICBvcHRpb25zLm1hdGVyaWFsaXplZF92aWV3ID8gb3B0aW9ucy5tYXRlcmlhbGl6ZWRfdmlldyA6IHRoaXMuX3Byb3BlcnRpZXMudGFibGVfbmFtZSxcbiAgICB3aGVyZUNsYXVzZS5xdWVyeSxcbiAgICBvcmRlcktleXMubGVuZ3RoID8gdXRpbC5mb3JtYXQoJ09SREVSIEJZICVzJywgb3JkZXJLZXlzLmpvaW4oJywgJykpIDogJyAnLFxuICAgIGxpbWl0ID8gdXRpbC5mb3JtYXQoJ0xJTUlUICVzJywgbGltaXQpIDogJyAnXG4gICk7XG5cbiAgaWYgKG9wdGlvbnMuYWxsb3dfZmlsdGVyaW5nKSBxdWVyeSArPSAnIEFMTE9XIEZJTFRFUklORzsnO1xuICBlbHNlIHF1ZXJ5ICs9ICc7JztcblxuICByZXR1cm4geyBxdWVyeSwgcGFyYW1zOiB3aGVyZUNsYXVzZS5wYXJhbXMgfTtcbn07XG5cbkJhc2VNb2RlbC5nZXRfdGFibGVfbmFtZSA9IGZ1bmN0aW9uIGYoKSB7XG4gIHJldHVybiB0aGlzLl9wcm9wZXJ0aWVzLnRhYmxlX25hbWU7XG59O1xuXG5CYXNlTW9kZWwuaXNfdGFibGVfcmVhZHkgPSBmdW5jdGlvbiBmKCkge1xuICByZXR1cm4gdGhpcy5fcmVhZHkgPT09IHRydWU7XG59O1xuXG5CYXNlTW9kZWwuaW5pdCA9IGZ1bmN0aW9uIGYob3B0aW9ucywgY2FsbGJhY2spIHtcbiAgaWYgKCFjYWxsYmFjaykge1xuICAgIGNhbGxiYWNrID0gb3B0aW9ucztcbiAgICBvcHRpb25zID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgdGhpcy5fcmVhZHkgPSB0cnVlO1xuICBjYWxsYmFjaygpO1xufTtcblxuQmFzZU1vZGVsLnN5bmNEZWZpbml0aW9uID0gZnVuY3Rpb24gZihjYWxsYmFjaykge1xuICBjb25zdCBhZnRlckNyZWF0ZSA9IChlcnIsIHJlc3VsdCkgPT4ge1xuICAgIGlmIChlcnIpIGNhbGxiYWNrKGVycik7XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLl9yZWFkeSA9IHRydWU7XG4gICAgICBjYWxsYmFjayhudWxsLCByZXN1bHQpO1xuICAgIH1cbiAgfTtcblxuICB0aGlzLl9jcmVhdGVfdGFibGUoYWZ0ZXJDcmVhdGUpO1xufTtcblxuQmFzZU1vZGVsLmV4ZWN1dGVfcXVlcnkgPSBmdW5jdGlvbiBmKHF1ZXJ5LCBwYXJhbXMsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAzKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgIG9wdGlvbnMgPSB7IHByZXBhcmU6IHRydWUgfTtcbiAgfVxuXG4gIHRoaXMuX2Vuc3VyZV9jb25uZWN0ZWQoKGVycikgPT4ge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGRlYnVnKCdleGVjdXRpbmcgcXVlcnk6ICVzIHdpdGggcGFyYW1zOiAlaicsIHF1ZXJ5LCBwYXJhbXMpO1xuICAgIHRoaXMuX3Byb3BlcnRpZXMuY3FsLmV4ZWN1dGUocXVlcnksIHBhcmFtcywgb3B0aW9ucywgKGVycjEsIHJlc3VsdCkgPT4ge1xuICAgICAgaWYgKGVycjEgJiYgZXJyMS5jb2RlID09PSA4NzA0KSB7XG4gICAgICAgIHRoaXMuX2V4ZWN1dGVfZGVmaW5pdGlvbl9xdWVyeShxdWVyeSwgcGFyYW1zLCBjYWxsYmFjayk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYWxsYmFjayhlcnIxLCByZXN1bHQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn07XG5cbkJhc2VNb2RlbC5leGVjdXRlX2VhY2hSb3cgPSBmdW5jdGlvbiBmKHF1ZXJ5LCBwYXJhbXMsIG9wdGlvbnMsIG9uUmVhZGFibGUsIGNhbGxiYWNrKSB7XG4gIHRoaXMuX2Vuc3VyZV9jb25uZWN0ZWQoKGVycikgPT4ge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGRlYnVnKCdleGVjdXRpbmcgZWFjaFJvdyBxdWVyeTogJXMgd2l0aCBwYXJhbXM6ICVqJywgcXVlcnksIHBhcmFtcyk7XG4gICAgdGhpcy5fcHJvcGVydGllcy5jcWwuZWFjaFJvdyhxdWVyeSwgcGFyYW1zLCBvcHRpb25zLCBvblJlYWRhYmxlLCBjYWxsYmFjayk7XG4gIH0pO1xufTtcblxuQmFzZU1vZGVsLl9leGVjdXRlX3RhYmxlX2VhY2hSb3cgPSBmdW5jdGlvbiBmKHF1ZXJ5LCBwYXJhbXMsIG9wdGlvbnMsIG9uUmVhZGFibGUsIGNhbGxiYWNrKSB7XG4gIGlmICh0aGlzLmlzX3RhYmxlX3JlYWR5KCkpIHtcbiAgICB0aGlzLmV4ZWN1dGVfZWFjaFJvdyhxdWVyeSwgcGFyYW1zLCBvcHRpb25zLCBvblJlYWRhYmxlLCBjYWxsYmFjayk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5pbml0KChlcnIpID0+IHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5leGVjdXRlX2VhY2hSb3cocXVlcnksIHBhcmFtcywgb3B0aW9ucywgb25SZWFkYWJsZSwgY2FsbGJhY2spO1xuICAgIH0pO1xuICB9XG59O1xuXG5CYXNlTW9kZWwuZWFjaFJvdyA9IGZ1bmN0aW9uIGYocXVlcnlPYmplY3QsIG9wdGlvbnMsIG9uUmVhZGFibGUsIGNhbGxiYWNrKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAzKSB7XG4gICAgY29uc3QgY2IgPSBvblJlYWRhYmxlO1xuICAgIG9uUmVhZGFibGUgPSBvcHRpb25zO1xuICAgIGNhbGxiYWNrID0gY2I7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG4gIGlmICh0eXBlb2Ygb25SZWFkYWJsZSAhPT0gJ2Z1bmN0aW9uJykgdGhyb3cgKG5ldyBFcnJvcignbm8gdmFsaWQgb25SZWFkYWJsZSBmdW5jdGlvbiB3YXMgcHJvdmlkZWQnKSk7XG4gIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHRocm93IChuZXcgRXJyb3IoJ25vIHZhbGlkIGNhbGxiYWNrIGZ1bmN0aW9uIHdhcyBwcm92aWRlZCcpKTtcblxuICBjb25zdCBkZWZhdWx0cyA9IHtcbiAgICByYXc6IGZhbHNlLFxuICAgIHByZXBhcmU6IHRydWUsXG4gIH07XG5cbiAgb3B0aW9ucyA9IF8uZGVmYXVsdHNEZWVwKG9wdGlvbnMsIGRlZmF1bHRzKTtcblxuICBvcHRpb25zLnJldHVybl9xdWVyeSA9IHRydWU7XG4gIGNvbnN0IHNlbGVjdFF1ZXJ5ID0gdGhpcy5maW5kKHF1ZXJ5T2JqZWN0LCBvcHRpb25zKTtcblxuICBjb25zdCBxdWVyeU9wdGlvbnMgPSB7IHByZXBhcmU6IG9wdGlvbnMucHJlcGFyZSB9O1xuICBpZiAob3B0aW9ucy5jb25zaXN0ZW5jeSkgcXVlcnlPcHRpb25zLmNvbnNpc3RlbmN5ID0gb3B0aW9ucy5jb25zaXN0ZW5jeTtcbiAgaWYgKG9wdGlvbnMuZmV0Y2hTaXplKSBxdWVyeU9wdGlvbnMuZmV0Y2hTaXplID0gb3B0aW9ucy5mZXRjaFNpemU7XG4gIGlmIChvcHRpb25zLmF1dG9QYWdlKSBxdWVyeU9wdGlvbnMuYXV0b1BhZ2UgPSBvcHRpb25zLmF1dG9QYWdlO1xuICBpZiAob3B0aW9ucy5oaW50cykgcXVlcnlPcHRpb25zLmhpbnRzID0gb3B0aW9ucy5oaW50cztcbiAgaWYgKG9wdGlvbnMucGFnZVN0YXRlKSBxdWVyeU9wdGlvbnMucGFnZVN0YXRlID0gb3B0aW9ucy5wYWdlU3RhdGU7XG4gIGlmIChvcHRpb25zLnJldHJ5KSBxdWVyeU9wdGlvbnMucmV0cnkgPSBvcHRpb25zLnJldHJ5O1xuICBpZiAob3B0aW9ucy5zZXJpYWxDb25zaXN0ZW5jeSkgcXVlcnlPcHRpb25zLnNlcmlhbENvbnNpc3RlbmN5ID0gb3B0aW9ucy5zZXJpYWxDb25zaXN0ZW5jeTtcblxuICB0aGlzLl9leGVjdXRlX3RhYmxlX2VhY2hSb3coc2VsZWN0UXVlcnkucXVlcnksIHNlbGVjdFF1ZXJ5LnBhcmFtcywgcXVlcnlPcHRpb25zLCAobiwgcm93KSA9PiB7XG4gICAgaWYgKCFvcHRpb25zLnJhdykge1xuICAgICAgY29uc3QgTW9kZWxDb25zdHJ1Y3RvciA9IHRoaXMuX3Byb3BlcnRpZXMuZ2V0X2NvbnN0cnVjdG9yKCk7XG4gICAgICByb3cgPSBuZXcgTW9kZWxDb25zdHJ1Y3Rvcihyb3cpO1xuICAgIH1cbiAgICBvblJlYWRhYmxlKG4sIHJvdyk7XG4gIH0sIChlcnIsIHJlc3VsdCkgPT4ge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIGNhbGxiYWNrKGJ1aWxkRXJyb3IoJ21vZGVsLmZpbmQuZGJlcnJvcicsIGVycikpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjYWxsYmFjayhlcnIsIHJlc3VsdCk7XG4gIH0pO1xufTtcblxuQmFzZU1vZGVsLmV4ZWN1dGVfc3RyZWFtID0gZnVuY3Rpb24gZihxdWVyeSwgcGFyYW1zLCBvcHRpb25zLCBvblJlYWRhYmxlLCBjYWxsYmFjaykge1xuICB0aGlzLl9lbnN1cmVfY29ubmVjdGVkKChlcnIpID0+IHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBjYWxsYmFjayhlcnIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkZWJ1ZygnZXhlY3V0aW5nIHN0cmVhbSBxdWVyeTogJXMgd2l0aCBwYXJhbXM6ICVqJywgcXVlcnksIHBhcmFtcyk7XG4gICAgdGhpcy5fcHJvcGVydGllcy5jcWwuc3RyZWFtKHF1ZXJ5LCBwYXJhbXMsIG9wdGlvbnMpLm9uKCdyZWFkYWJsZScsIG9uUmVhZGFibGUpLm9uKCdlbmQnLCBjYWxsYmFjayk7XG4gIH0pO1xufTtcblxuQmFzZU1vZGVsLl9leGVjdXRlX3RhYmxlX3N0cmVhbSA9IGZ1bmN0aW9uIGYocXVlcnksIHBhcmFtcywgb3B0aW9ucywgb25SZWFkYWJsZSwgY2FsbGJhY2spIHtcbiAgaWYgKHRoaXMuaXNfdGFibGVfcmVhZHkoKSkge1xuICAgIHRoaXMuZXhlY3V0ZV9zdHJlYW0ocXVlcnksIHBhcmFtcywgb3B0aW9ucywgb25SZWFkYWJsZSwgY2FsbGJhY2spO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuaW5pdCgoZXJyKSA9PiB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuZXhlY3V0ZV9zdHJlYW0ocXVlcnksIHBhcmFtcywgb3B0aW9ucywgb25SZWFkYWJsZSwgY2FsbGJhY2spO1xuICAgIH0pO1xuICB9XG59O1xuXG5CYXNlTW9kZWwuc3RyZWFtID0gZnVuY3Rpb24gZihxdWVyeU9iamVjdCwgb3B0aW9ucywgb25SZWFkYWJsZSwgY2FsbGJhY2spIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDMpIHtcbiAgICBjb25zdCBjYiA9IG9uUmVhZGFibGU7XG4gICAgb25SZWFkYWJsZSA9IG9wdGlvbnM7XG4gICAgY2FsbGJhY2sgPSBjYjtcbiAgICBvcHRpb25zID0ge307XG4gIH1cbiAgaWYgKHR5cGVvZiBvblJlYWRhYmxlICE9PSAnZnVuY3Rpb24nKSB0aHJvdyAobmV3IEVycm9yKCdubyB2YWxpZCBvblJlYWRhYmxlIGZ1bmN0aW9uIHdhcyBwcm92aWRlZCcpKTtcbiAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykgdGhyb3cgKG5ldyBFcnJvcignbm8gdmFsaWQgY2FsbGJhY2sgZnVuY3Rpb24gd2FzIHByb3ZpZGVkJykpO1xuXG4gIGNvbnN0IGRlZmF1bHRzID0ge1xuICAgIHJhdzogZmFsc2UsXG4gICAgcHJlcGFyZTogdHJ1ZSxcbiAgfTtcblxuICBvcHRpb25zID0gXy5kZWZhdWx0c0RlZXAob3B0aW9ucywgZGVmYXVsdHMpO1xuXG4gIG9wdGlvbnMucmV0dXJuX3F1ZXJ5ID0gdHJ1ZTtcbiAgY29uc3Qgc2VsZWN0UXVlcnkgPSB0aGlzLmZpbmQocXVlcnlPYmplY3QsIG9wdGlvbnMpO1xuXG4gIGNvbnN0IHF1ZXJ5T3B0aW9ucyA9IHsgcHJlcGFyZTogb3B0aW9ucy5wcmVwYXJlIH07XG4gIGlmIChvcHRpb25zLmNvbnNpc3RlbmN5KSBxdWVyeU9wdGlvbnMuY29uc2lzdGVuY3kgPSBvcHRpb25zLmNvbnNpc3RlbmN5O1xuICBpZiAob3B0aW9ucy5mZXRjaFNpemUpIHF1ZXJ5T3B0aW9ucy5mZXRjaFNpemUgPSBvcHRpb25zLmZldGNoU2l6ZTtcbiAgaWYgKG9wdGlvbnMuYXV0b1BhZ2UpIHF1ZXJ5T3B0aW9ucy5hdXRvUGFnZSA9IG9wdGlvbnMuYXV0b1BhZ2U7XG4gIGlmIChvcHRpb25zLmhpbnRzKSBxdWVyeU9wdGlvbnMuaGludHMgPSBvcHRpb25zLmhpbnRzO1xuICBpZiAob3B0aW9ucy5wYWdlU3RhdGUpIHF1ZXJ5T3B0aW9ucy5wYWdlU3RhdGUgPSBvcHRpb25zLnBhZ2VTdGF0ZTtcbiAgaWYgKG9wdGlvbnMucmV0cnkpIHF1ZXJ5T3B0aW9ucy5yZXRyeSA9IG9wdGlvbnMucmV0cnk7XG4gIGlmIChvcHRpb25zLnNlcmlhbENvbnNpc3RlbmN5KSBxdWVyeU9wdGlvbnMuc2VyaWFsQ29uc2lzdGVuY3kgPSBvcHRpb25zLnNlcmlhbENvbnNpc3RlbmN5O1xuXG4gIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gIHRoaXMuX2V4ZWN1dGVfdGFibGVfc3RyZWFtKHNlbGVjdFF1ZXJ5LnF1ZXJ5LCBzZWxlY3RRdWVyeS5wYXJhbXMsIHF1ZXJ5T3B0aW9ucywgZnVuY3Rpb24gZjEoKSB7XG4gICAgY29uc3QgcmVhZGVyID0gdGhpcztcbiAgICByZWFkZXIucmVhZFJvdyA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHJvdyA9IHJlYWRlci5yZWFkKCk7XG4gICAgICBpZiAoIXJvdykgcmV0dXJuIHJvdztcbiAgICAgIGlmICghb3B0aW9ucy5yYXcpIHtcbiAgICAgICAgY29uc3QgTW9kZWxDb25zdHJ1Y3RvciA9IHNlbGYuX3Byb3BlcnRpZXMuZ2V0X2NvbnN0cnVjdG9yKCk7XG4gICAgICAgIHJldHVybiBuZXcgTW9kZWxDb25zdHJ1Y3Rvcihyb3cpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJvdztcbiAgICB9O1xuICAgIG9uUmVhZGFibGUocmVhZGVyKTtcbiAgfSwgKGVycikgPT4ge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIGNhbGxiYWNrKGJ1aWxkRXJyb3IoJ21vZGVsLmZpbmQuZGJlcnJvcicsIGVycikpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjYWxsYmFjaygpO1xuICB9KTtcbn07XG5cbkJhc2VNb2RlbC5maW5kID0gZnVuY3Rpb24gZihxdWVyeU9iamVjdCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIgJiYgdHlwZW9mIG9wdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG4gIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicgJiYgIW9wdGlvbnMucmV0dXJuX3F1ZXJ5KSB7XG4gICAgdGhyb3cgKG5ldyBFcnJvcignbm8gdmFsaWQgY2FsbGJhY2sgZnVuY3Rpb24gd2FzIHByb3ZpZGVkJykpO1xuICB9XG5cbiAgY29uc3QgZGVmYXVsdHMgPSB7XG4gICAgcmF3OiBmYWxzZSxcbiAgICBwcmVwYXJlOiB0cnVlLFxuICB9O1xuXG4gIG9wdGlvbnMgPSBfLmRlZmF1bHRzRGVlcChvcHRpb25zLCBkZWZhdWx0cyk7XG5cbiAgLy8gc2V0IHJhdyB0cnVlIGlmIHNlbGVjdCBpcyB1c2VkLFxuICAvLyBiZWNhdXNlIGNhc3RpbmcgdG8gbW9kZWwgaW5zdGFuY2VzIG1heSBsZWFkIHRvIHByb2JsZW1zXG4gIGlmIChvcHRpb25zLnNlbGVjdCkgb3B0aW9ucy5yYXcgPSB0cnVlO1xuXG4gIGxldCBxdWVyeVBhcmFtcyA9IFtdO1xuXG4gIGxldCBxdWVyeTtcbiAgdHJ5IHtcbiAgICBjb25zdCBmaW5kUXVlcnkgPSB0aGlzLl9jcmVhdGVfZmluZF9xdWVyeShxdWVyeU9iamVjdCwgb3B0aW9ucyk7XG4gICAgcXVlcnkgPSBmaW5kUXVlcnkucXVlcnk7XG4gICAgcXVlcnlQYXJhbXMgPSBxdWVyeVBhcmFtcy5jb25jYXQoZmluZFF1ZXJ5LnBhcmFtcyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYWxsYmFjayhlKTtcbiAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gICAgdGhyb3cgKGUpO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMucmV0dXJuX3F1ZXJ5KSB7XG4gICAgcmV0dXJuIHsgcXVlcnksIHBhcmFtczogcXVlcnlQYXJhbXMgfTtcbiAgfVxuXG4gIGNvbnN0IHF1ZXJ5T3B0aW9ucyA9IHsgcHJlcGFyZTogb3B0aW9ucy5wcmVwYXJlIH07XG4gIGlmIChvcHRpb25zLmNvbnNpc3RlbmN5KSBxdWVyeU9wdGlvbnMuY29uc2lzdGVuY3kgPSBvcHRpb25zLmNvbnNpc3RlbmN5O1xuICBpZiAob3B0aW9ucy5mZXRjaFNpemUpIHF1ZXJ5T3B0aW9ucy5mZXRjaFNpemUgPSBvcHRpb25zLmZldGNoU2l6ZTtcbiAgaWYgKG9wdGlvbnMuYXV0b1BhZ2UpIHF1ZXJ5T3B0aW9ucy5hdXRvUGFnZSA9IG9wdGlvbnMuYXV0b1BhZ2U7XG4gIGlmIChvcHRpb25zLmhpbnRzKSBxdWVyeU9wdGlvbnMuaGludHMgPSBvcHRpb25zLmhpbnRzO1xuICBpZiAob3B0aW9ucy5wYWdlU3RhdGUpIHF1ZXJ5T3B0aW9ucy5wYWdlU3RhdGUgPSBvcHRpb25zLnBhZ2VTdGF0ZTtcbiAgaWYgKG9wdGlvbnMucmV0cnkpIHF1ZXJ5T3B0aW9ucy5yZXRyeSA9IG9wdGlvbnMucmV0cnk7XG4gIGlmIChvcHRpb25zLnNlcmlhbENvbnNpc3RlbmN5KSBxdWVyeU9wdGlvbnMuc2VyaWFsQ29uc2lzdGVuY3kgPSBvcHRpb25zLnNlcmlhbENvbnNpc3RlbmN5O1xuXG4gIHRoaXMuX2V4ZWN1dGVfdGFibGVfcXVlcnkocXVlcnksIHF1ZXJ5UGFyYW1zLCBxdWVyeU9wdGlvbnMsIChlcnIsIHJlc3VsdHMpID0+IHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBjYWxsYmFjayhidWlsZEVycm9yKCdtb2RlbC5maW5kLmRiZXJyb3InLCBlcnIpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFvcHRpb25zLnJhdykge1xuICAgICAgY29uc3QgTW9kZWxDb25zdHJ1Y3RvciA9IHRoaXMuX3Byb3BlcnRpZXMuZ2V0X2NvbnN0cnVjdG9yKCk7XG4gICAgICByZXN1bHRzID0gcmVzdWx0cy5yb3dzLm1hcCgocmVzKSA9PiB7XG4gICAgICAgIGRlbGV0ZSAocmVzLmNvbHVtbnMpO1xuICAgICAgICByZXR1cm4gbmV3IE1vZGVsQ29uc3RydWN0b3IocmVzKTtcbiAgICAgIH0pO1xuICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdHMgPSByZXN1bHRzLnJvd3MubWFwKChyZXMpID0+IHtcbiAgICAgICAgZGVsZXRlIChyZXMuY29sdW1ucyk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgICB9KTtcbiAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdHMpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHt9O1xufTtcblxuQmFzZU1vZGVsLmZpbmRPbmUgPSBmdW5jdGlvbiBmKHF1ZXJ5T2JqZWN0LCBvcHRpb25zLCBjYWxsYmFjaykge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMiAmJiB0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNhbGxiYWNrID0gb3B0aW9ucztcbiAgICBvcHRpb25zID0ge307XG4gIH1cbiAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJyAmJiAhb3B0aW9ucy5yZXR1cm5fcXVlcnkpIHtcbiAgICB0aHJvdyAobmV3IEVycm9yKCdubyB2YWxpZCBjYWxsYmFjayBmdW5jdGlvbiB3YXMgcHJvdmlkZWQnKSk7XG4gIH1cblxuICBxdWVyeU9iamVjdC4kbGltaXQgPSAxO1xuXG4gIHJldHVybiB0aGlzLmZpbmQocXVlcnlPYmplY3QsIG9wdGlvbnMsIChlcnIsIHJlc3VsdHMpID0+IHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBjYWxsYmFjayhlcnIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAocmVzdWx0cy5sZW5ndGggPiAwKSB7XG4gICAgICBjYWxsYmFjayhudWxsLCByZXN1bHRzWzBdKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2FsbGJhY2soKTtcbiAgfSk7XG59O1xuXG5CYXNlTW9kZWwudXBkYXRlID0gZnVuY3Rpb24gZihxdWVyeU9iamVjdCwgdXBkYXRlVmFsdWVzLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMyAmJiB0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNhbGxiYWNrID0gb3B0aW9ucztcbiAgICBvcHRpb25zID0ge307XG4gIH1cblxuICBjb25zdCBzY2hlbWEgPSB0aGlzLl9wcm9wZXJ0aWVzLnNjaGVtYTtcblxuICBjb25zdCBkZWZhdWx0cyA9IHtcbiAgICBwcmVwYXJlOiB0cnVlLFxuICB9O1xuXG4gIG9wdGlvbnMgPSBfLmRlZmF1bHRzRGVlcChvcHRpb25zLCBkZWZhdWx0cyk7XG5cbiAgbGV0IHF1ZXJ5UGFyYW1zID0gW107XG5cbiAgY29uc3QgdXBkYXRlQ2xhdXNlQXJyYXkgPSBbXTtcblxuICBsZXQgZXJyb3JIYXBwZW5lZCA9IE9iamVjdC5rZXlzKHVwZGF0ZVZhbHVlcykuc29tZSgoa2V5KSA9PiB7XG4gICAgaWYgKHNjaGVtYS5maWVsZHNba2V5XSA9PT0gdW5kZWZpbmVkIHx8IHNjaGVtYS5maWVsZHNba2V5XS52aXJ0dWFsKSByZXR1cm4gZmFsc2U7XG5cbiAgICAvLyBjaGVjayBmaWVsZCB2YWx1ZVxuICAgIGNvbnN0IGZpZWxkdHlwZSA9IHNjaGVtZXIuZ2V0X2ZpZWxkX3R5cGUoc2NoZW1hLCBrZXkpO1xuICAgIGxldCBmaWVsZHZhbHVlID0gdXBkYXRlVmFsdWVzW2tleV07XG5cbiAgICBpZiAoZmllbGR2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBmaWVsZHZhbHVlID0gdGhpcy5fZ2V0X2RlZmF1bHRfdmFsdWUoa2V5KTtcbiAgICAgIGlmIChmaWVsZHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHNjaGVtYS5rZXkuaW5kZXhPZihrZXkpID49IDAgfHwgc2NoZW1hLmtleVswXS5pbmRleE9mKGtleSkgPj0gMCkge1xuICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGJ1aWxkRXJyb3IoJ21vZGVsLnVwZGF0ZS51bnNldGtleScsIGtleSkpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93IGJ1aWxkRXJyb3IoJ21vZGVsLnVwZGF0ZS51bnNldGtleScsIGtleSk7XG4gICAgICAgIH0gZWxzZSBpZiAoc2NoZW1hLmZpZWxkc1trZXldLnJ1bGUgJiYgc2NoZW1hLmZpZWxkc1trZXldLnJ1bGUucmVxdWlyZWQpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhidWlsZEVycm9yKCdtb2RlbC51cGRhdGUudW5zZXRyZXF1aXJlZCcsIGtleSkpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93IGJ1aWxkRXJyb3IoJ21vZGVsLnVwZGF0ZS51bnNldHJlcXVpcmVkJywga2V5KTtcbiAgICAgICAgfSBlbHNlIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoIXNjaGVtYS5maWVsZHNba2V5XS5ydWxlIHx8ICFzY2hlbWEuZmllbGRzW2tleV0ucnVsZS5pZ25vcmVfZGVmYXVsdCkge1xuICAgICAgICAvLyBkaWQgc2V0IGEgZGVmYXVsdCB2YWx1ZSwgaWdub3JlIGRlZmF1bHQgaXMgbm90IHNldFxuICAgICAgICBpZiAodGhpcy52YWxpZGF0ZShrZXksIGZpZWxkdmFsdWUpICE9PSB0cnVlKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FsbGJhY2soYnVpbGRFcnJvcignbW9kZWwudXBkYXRlLmludmFsaWRkZWZhdWx0dmFsdWUnLCBmaWVsZHZhbHVlLCBrZXksIGZpZWxkdHlwZSkpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93IGJ1aWxkRXJyb3IoJ21vZGVsLnVwZGF0ZS5pbnZhbGlkZGVmYXVsdHZhbHVlJywgZmllbGR2YWx1ZSwga2V5LCBmaWVsZHR5cGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGZpZWxkdmFsdWUgPT09IG51bGwgfHwgZmllbGR2YWx1ZSA9PT0gY3FsLnR5cGVzLnVuc2V0KSB7XG4gICAgICBpZiAoc2NoZW1hLmtleS5pbmRleE9mKGtleSkgPj0gMCB8fCBzY2hlbWEua2V5WzBdLmluZGV4T2Yoa2V5KSA+PSAwKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBjYWxsYmFjayhidWlsZEVycm9yKCdtb2RlbC51cGRhdGUudW5zZXRrZXknLCBrZXkpKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBidWlsZEVycm9yKCdtb2RlbC51cGRhdGUudW5zZXRrZXknLCBrZXkpO1xuICAgICAgfSBlbHNlIGlmIChzY2hlbWEuZmllbGRzW2tleV0ucnVsZSAmJiBzY2hlbWEuZmllbGRzW2tleV0ucnVsZS5yZXF1aXJlZCkge1xuICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgY2FsbGJhY2soYnVpbGRFcnJvcignbW9kZWwudXBkYXRlLnVuc2V0cmVxdWlyZWQnLCBrZXkpKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBidWlsZEVycm9yKCdtb2RlbC51cGRhdGUudW5zZXRyZXF1aXJlZCcsIGtleSk7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICB0cnkge1xuICAgICAgbGV0ICRhZGQgPSBmYWxzZTtcbiAgICAgIGxldCAkYXBwZW5kID0gZmFsc2U7XG4gICAgICBsZXQgJHByZXBlbmQgPSBmYWxzZTtcbiAgICAgIGxldCAkcmVwbGFjZSA9IGZhbHNlO1xuICAgICAgbGV0ICRyZW1vdmUgPSBmYWxzZTtcbiAgICAgIGlmIChfLmlzUGxhaW5PYmplY3QoZmllbGR2YWx1ZSkpIHtcbiAgICAgICAgaWYgKGZpZWxkdmFsdWUuJGFkZCkge1xuICAgICAgICAgIGZpZWxkdmFsdWUgPSBmaWVsZHZhbHVlLiRhZGQ7XG4gICAgICAgICAgJGFkZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAoZmllbGR2YWx1ZS4kYXBwZW5kKSB7XG4gICAgICAgICAgZmllbGR2YWx1ZSA9IGZpZWxkdmFsdWUuJGFwcGVuZDtcbiAgICAgICAgICAkYXBwZW5kID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChmaWVsZHZhbHVlLiRwcmVwZW5kKSB7XG4gICAgICAgICAgZmllbGR2YWx1ZSA9IGZpZWxkdmFsdWUuJHByZXBlbmQ7XG4gICAgICAgICAgJHByZXBlbmQgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKGZpZWxkdmFsdWUuJHJlcGxhY2UpIHtcbiAgICAgICAgICBmaWVsZHZhbHVlID0gZmllbGR2YWx1ZS4kcmVwbGFjZTtcbiAgICAgICAgICAkcmVwbGFjZSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAoZmllbGR2YWx1ZS4kcmVtb3ZlKSB7XG4gICAgICAgICAgZmllbGR2YWx1ZSA9IGZpZWxkdmFsdWUuJHJlbW92ZTtcbiAgICAgICAgICAkcmVtb3ZlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBkYlZhbCA9IHRoaXMuX2dldF9kYl92YWx1ZV9leHByZXNzaW9uKGtleSwgZmllbGR2YWx1ZSk7XG5cbiAgICAgIGlmIChfLmlzUGxhaW5PYmplY3QoZGJWYWwpICYmIGRiVmFsLnF1ZXJ5X3NlZ21lbnQpIHtcbiAgICAgICAgaWYgKFsnbWFwJywgJ2xpc3QnLCAnc2V0J10uaW5kZXhPZihmaWVsZHR5cGUpID4gLTEpIHtcbiAgICAgICAgICBpZiAoJGFkZCB8fCAkYXBwZW5kKSB7XG4gICAgICAgICAgICBkYlZhbC5xdWVyeV9zZWdtZW50ID0gdXRpbC5mb3JtYXQoJ1wiJXNcIiArICVzJywga2V5LCBkYlZhbC5xdWVyeV9zZWdtZW50KTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCRwcmVwZW5kKSB7XG4gICAgICAgICAgICBpZiAoZmllbGR0eXBlID09PSAnbGlzdCcpIGRiVmFsLnF1ZXJ5X3NlZ21lbnQgPSB1dGlsLmZvcm1hdCgnJXMgKyBcIiVzXCInLCBkYlZhbC5xdWVyeV9zZWdtZW50LCBrZXkpO1xuICAgICAgICAgICAgZWxzZSB0aHJvdyAodXRpbC5mb3JtYXQoJyVzIGRhdGF0eXBlcyBkb2VzIG5vdCBzdXBwb3J0ICRwcmVwZW5kLCB1c2UgJGFkZCBpbnN0ZWFkJywgZmllbGR0eXBlKSk7XG4gICAgICAgICAgfSBlbHNlIGlmICgkcmVtb3ZlKSB7XG4gICAgICAgICAgICBkYlZhbC5xdWVyeV9zZWdtZW50ID0gdXRpbC5mb3JtYXQoJ1wiJXNcIiAtICVzJywga2V5LCBkYlZhbC5xdWVyeV9zZWdtZW50KTtcbiAgICAgICAgICAgIGlmIChmaWVsZHR5cGUgPT09ICdtYXAnKSBkYlZhbC5wYXJhbWV0ZXIgPSBPYmplY3Qua2V5cyhkYlZhbC5wYXJhbWV0ZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgkcmVwbGFjZSkge1xuICAgICAgICAgIGlmIChmaWVsZHR5cGUgPT09ICdtYXAnKSB7XG4gICAgICAgICAgICB1cGRhdGVDbGF1c2VBcnJheS5wdXNoKHV0aWwuZm9ybWF0KCdcIiVzXCJbP109JXMnLCBrZXksIGRiVmFsLnF1ZXJ5X3NlZ21lbnQpKTtcbiAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VLZXlzID0gT2JqZWN0LmtleXMoZGJWYWwucGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VWYWx1ZXMgPSBfLnZhbHVlcyhkYlZhbC5wYXJhbWV0ZXIpO1xuICAgICAgICAgICAgaWYgKHJlcGxhY2VLZXlzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICBxdWVyeVBhcmFtcy5wdXNoKHJlcGxhY2VLZXlzWzBdKTtcbiAgICAgICAgICAgICAgcXVlcnlQYXJhbXMucHVzaChyZXBsYWNlVmFsdWVzWzBdKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRocm93IChuZXcgRXJyb3IoJyRyZXBsYWNlIGluIG1hcCBkb2VzIG5vdCBzdXBwb3J0IG1vcmUgdGhhbiBvbmUgaXRlbScpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGZpZWxkdHlwZSA9PT0gJ2xpc3QnKSB7XG4gICAgICAgICAgICB1cGRhdGVDbGF1c2VBcnJheS5wdXNoKHV0aWwuZm9ybWF0KCdcIiVzXCJbP109JXMnLCBrZXksIGRiVmFsLnF1ZXJ5X3NlZ21lbnQpKTtcbiAgICAgICAgICAgIGlmIChkYlZhbC5wYXJhbWV0ZXIubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zLnB1c2goZGJWYWwucGFyYW1ldGVyWzBdKTtcbiAgICAgICAgICAgICAgcXVlcnlQYXJhbXMucHVzaChkYlZhbC5wYXJhbWV0ZXJbMV0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhyb3cgKG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICAnJHJlcGxhY2UgaW4gbGlzdCBzaG91bGQgaGF2ZSBleGFjdGx5IDIgaXRlbXMsIGZpcnN0IG9uZSBhcyB0aGUgaW5kZXggYW5kIHRoZSBzZWNvbmQgb25lIGFzIHRoZSB2YWx1ZSdcbiAgICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IChuZXcgRXJyb3IoXG4gICAgICAgICAgICAgIHV0aWwuZm9ybWF0KCclcyBkYXRhdHlwZXMgZG9lcyBub3Qgc3VwcG9ydCAkcmVwbGFjZScsIGZpZWxkdHlwZSlcbiAgICAgICAgICAgICkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1cGRhdGVDbGF1c2VBcnJheS5wdXNoKHV0aWwuZm9ybWF0KCdcIiVzXCI9JXMnLCBrZXksIGRiVmFsLnF1ZXJ5X3NlZ21lbnQpKTtcbiAgICAgICAgICBxdWVyeVBhcmFtcy5wdXNoKGRiVmFsLnBhcmFtZXRlcik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVwZGF0ZUNsYXVzZUFycmF5LnB1c2godXRpbC5mb3JtYXQoJ1wiJXNcIj0lcycsIGtleSwgZGJWYWwpKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNhbGxiYWNrKGJ1aWxkRXJyb3IoJ21vZGVsLnVwZGF0ZS5pbnZhbGlkdmFsdWUnLCBmaWVsZHZhbHVlLCBrZXkpKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICB0aHJvdyBidWlsZEVycm9yKCdtb2RlbC51cGRhdGUuaW52YWxpZHZhbHVlJywgZmllbGR2YWx1ZSwga2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9KTtcblxuICBpZiAoZXJyb3JIYXBwZW5lZCkgcmV0dXJuIHt9O1xuXG4gIGxldCBxdWVyeSA9ICdVUERBVEUgXCIlc1wiJztcbiAgbGV0IHdoZXJlID0gJyc7XG4gIGlmIChvcHRpb25zLnR0bCkgcXVlcnkgKz0gdXRpbC5mb3JtYXQoJyBVU0lORyBUVEwgJXMnLCBvcHRpb25zLnR0bCk7XG4gIHF1ZXJ5ICs9ICcgU0VUICVzICVzJztcbiAgdHJ5IHtcbiAgICBjb25zdCB3aGVyZUNsYXVzZSA9IHRoaXMuX2NyZWF0ZV93aGVyZV9jbGF1c2UocXVlcnlPYmplY3QpO1xuICAgIHdoZXJlID0gd2hlcmVDbGF1c2UucXVlcnk7XG4gICAgcXVlcnlQYXJhbXMgPSBxdWVyeVBhcmFtcy5jb25jYXQod2hlcmVDbGF1c2UucGFyYW1zKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNhbGxiYWNrKGUpO1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICB0aHJvdyAoZSk7XG4gIH1cbiAgcXVlcnkgPSB1dGlsLmZvcm1hdChxdWVyeSwgdGhpcy5fcHJvcGVydGllcy50YWJsZV9uYW1lLCB1cGRhdGVDbGF1c2VBcnJheS5qb2luKCcsICcpLCB3aGVyZSk7XG5cbiAgaWYgKG9wdGlvbnMuY29uZGl0aW9ucykge1xuICAgIGNvbnN0IHVwZGF0ZUNvbmRpdGlvbnNBcnJheSA9IFtdO1xuXG4gICAgZXJyb3JIYXBwZW5lZCA9IE9iamVjdC5rZXlzKG9wdGlvbnMuY29uZGl0aW9ucykuc29tZSgoa2V5KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBkYlZhbCA9IHRoaXMuX2dldF9kYl92YWx1ZV9leHByZXNzaW9uKGtleSwgb3B0aW9ucy5jb25kaXRpb25zW2tleV0pO1xuICAgICAgICBpZiAoXy5pc1BsYWluT2JqZWN0KGRiVmFsKSAmJiBkYlZhbC5xdWVyeV9zZWdtZW50KSB7XG4gICAgICAgICAgdXBkYXRlQ29uZGl0aW9uc0FycmF5LnB1c2godXRpbC5mb3JtYXQoJ1wiJXNcIj0lcycsIGtleSwgZGJWYWwucXVlcnlfc2VnbWVudCkpO1xuICAgICAgICAgIHF1ZXJ5UGFyYW1zLnB1c2goZGJWYWwucGFyYW1ldGVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1cGRhdGVDb25kaXRpb25zQXJyYXkucHVzaCh1dGlsLmZvcm1hdCgnXCIlc1wiPSVzJywga2V5LCBkYlZhbCkpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBjYWxsYmFjayhidWlsZEVycm9yKCdtb2RlbC51cGRhdGUuaW52YWxpZHZhbHVlJywgb3B0aW9ucy5jb25kaXRpb25zW2tleV0sIGtleSkpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IChidWlsZEVycm9yKCdtb2RlbC51cGRhdGUuaW52YWxpZHZhbHVlJywgb3B0aW9ucy5jb25kaXRpb25zW2tleV0sIGtleSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG4gICAgaWYgKGVycm9ySGFwcGVuZWQpIHJldHVybiB7fTtcblxuICAgIHF1ZXJ5ICs9IHV0aWwuZm9ybWF0KCcgSUYgJXMnLCB1cGRhdGVDb25kaXRpb25zQXJyYXkuam9pbignIEFORCAnKSk7XG4gIH1cbiAgaWYgKG9wdGlvbnMuaWZfZXhpc3RzKSBxdWVyeSArPSAnIElGIEVYSVNUUyc7XG5cbiAgcXVlcnkgKz0gJzsnO1xuXG4gIGlmIChvcHRpb25zLnJldHVybl9xdWVyeSkge1xuICAgIHJldHVybiB7IHF1ZXJ5LCBwYXJhbXM6IHF1ZXJ5UGFyYW1zIH07XG4gIH1cblxuICBjb25zdCBxdWVyeU9wdGlvbnMgPSB7IHByZXBhcmU6IG9wdGlvbnMucHJlcGFyZSB9O1xuICBpZiAob3B0aW9ucy5jb25zaXN0ZW5jeSkgcXVlcnlPcHRpb25zLmNvbnNpc3RlbmN5ID0gb3B0aW9ucy5jb25zaXN0ZW5jeTtcbiAgaWYgKG9wdGlvbnMuZmV0Y2hTaXplKSBxdWVyeU9wdGlvbnMuZmV0Y2hTaXplID0gb3B0aW9ucy5mZXRjaFNpemU7XG4gIGlmIChvcHRpb25zLmF1dG9QYWdlKSBxdWVyeU9wdGlvbnMuYXV0b1BhZ2UgPSBvcHRpb25zLmF1dG9QYWdlO1xuICBpZiAob3B0aW9ucy5oaW50cykgcXVlcnlPcHRpb25zLmhpbnRzID0gb3B0aW9ucy5oaW50cztcbiAgaWYgKG9wdGlvbnMucGFnZVN0YXRlKSBxdWVyeU9wdGlvbnMucGFnZVN0YXRlID0gb3B0aW9ucy5wYWdlU3RhdGU7XG4gIGlmIChvcHRpb25zLnJldHJ5KSBxdWVyeU9wdGlvbnMucmV0cnkgPSBvcHRpb25zLnJldHJ5O1xuICBpZiAob3B0aW9ucy5zZXJpYWxDb25zaXN0ZW5jeSkgcXVlcnlPcHRpb25zLnNlcmlhbENvbnNpc3RlbmN5ID0gb3B0aW9ucy5zZXJpYWxDb25zaXN0ZW5jeTtcblxuICAvLyBzZXQgZHVtbXkgaG9vayBmdW5jdGlvbiBpZiBub3QgcHJlc2VudCBpbiBzY2hlbWFcbiAgaWYgKHR5cGVvZiBzY2hlbWEuYmVmb3JlX3VwZGF0ZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHNjaGVtYS5iZWZvcmVfdXBkYXRlID0gZnVuY3Rpb24gZjEocXVlcnlPYmosIHVwZGF0ZVZhbCwgb3B0aW9uc09iaiwgbmV4dCkge1xuICAgICAgbmV4dCgpO1xuICAgIH07XG4gIH1cblxuICBpZiAodHlwZW9mIHNjaGVtYS5hZnRlcl91cGRhdGUgIT09ICdmdW5jdGlvbicpIHtcbiAgICBzY2hlbWEuYWZ0ZXJfdXBkYXRlID0gZnVuY3Rpb24gZjEocXVlcnlPYmosIHVwZGF0ZVZhbCwgb3B0aW9uc09iaiwgbmV4dCkge1xuICAgICAgbmV4dCgpO1xuICAgIH07XG4gIH1cblxuICBzY2hlbWEuYmVmb3JlX3VwZGF0ZShxdWVyeU9iamVjdCwgdXBkYXRlVmFsdWVzLCBvcHRpb25zLCAoZXJyb3IpID0+IHtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY2FsbGJhY2soYnVpbGRFcnJvcignbW9kZWwudXBkYXRlLmJlZm9yZS5lcnJvcicsIGVycm9yKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRocm93IGJ1aWxkRXJyb3IoJ21vZGVsLnVwZGF0ZS5iZWZvcmUuZXJyb3InLCBlcnJvcik7XG4gICAgfVxuXG4gICAgdGhpcy5fZXhlY3V0ZV90YWJsZV9xdWVyeShxdWVyeSwgcXVlcnlQYXJhbXMsIHF1ZXJ5T3B0aW9ucywgKGVyciwgcmVzdWx0cykgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgY2FsbGJhY2soYnVpbGRFcnJvcignbW9kZWwudXBkYXRlLmRiZXJyb3InLCBlcnIpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2NoZW1hLmFmdGVyX3VwZGF0ZShxdWVyeU9iamVjdCwgdXBkYXRlVmFsdWVzLCBvcHRpb25zLCAoZXJyb3IxKSA9PiB7XG4gICAgICAgICAgaWYgKGVycm9yMSkge1xuICAgICAgICAgICAgY2FsbGJhY2soYnVpbGRFcnJvcignbW9kZWwudXBkYXRlLmFmdGVyLmVycm9yJywgZXJyb3IxKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdHMpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoZXJyKSB7XG4gICAgICAgIHRocm93IGJ1aWxkRXJyb3IoJ21vZGVsLnVwZGF0ZS5kYmVycm9yJywgZXJyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNjaGVtYS5hZnRlcl91cGRhdGUocXVlcnlPYmplY3QsIHVwZGF0ZVZhbHVlcywgb3B0aW9ucywgKGVycm9yMSkgPT4ge1xuICAgICAgICAgIGlmIChlcnJvcjEpIHtcbiAgICAgICAgICAgIHRocm93IGJ1aWxkRXJyb3IoJ21vZGVsLnVwZGF0ZS5hZnRlci5lcnJvcicsIGVycm9yMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIHt9O1xufTtcblxuQmFzZU1vZGVsLmRlbGV0ZSA9IGZ1bmN0aW9uIGYocXVlcnlPYmplY3QsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyICYmIHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuXG4gIGNvbnN0IGRlZmF1bHRzID0ge1xuICAgIHByZXBhcmU6IHRydWUsXG4gIH07XG5cbiAgb3B0aW9ucyA9IF8uZGVmYXVsdHNEZWVwKG9wdGlvbnMsIGRlZmF1bHRzKTtcblxuICBsZXQgcXVlcnlQYXJhbXMgPSBbXTtcblxuICBsZXQgcXVlcnkgPSAnREVMRVRFIEZST00gXCIlc1wiICVzOyc7XG4gIGxldCB3aGVyZSA9ICcnO1xuICB0cnkge1xuICAgIGNvbnN0IHdoZXJlQ2xhdXNlID0gdGhpcy5fY3JlYXRlX3doZXJlX2NsYXVzZShxdWVyeU9iamVjdCk7XG4gICAgd2hlcmUgPSB3aGVyZUNsYXVzZS5xdWVyeTtcbiAgICBxdWVyeVBhcmFtcyA9IHF1ZXJ5UGFyYW1zLmNvbmNhdCh3aGVyZUNsYXVzZS5wYXJhbXMpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY2FsbGJhY2soZSk7XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIHRocm93IChlKTtcbiAgfVxuXG4gIHF1ZXJ5ID0gdXRpbC5mb3JtYXQocXVlcnksIHRoaXMuX3Byb3BlcnRpZXMudGFibGVfbmFtZSwgd2hlcmUpO1xuXG4gIGlmIChvcHRpb25zLnJldHVybl9xdWVyeSkge1xuICAgIHJldHVybiB7IHF1ZXJ5LCBwYXJhbXM6IHF1ZXJ5UGFyYW1zIH07XG4gIH1cblxuICBjb25zdCBxdWVyeU9wdGlvbnMgPSB7IHByZXBhcmU6IG9wdGlvbnMucHJlcGFyZSB9O1xuICBpZiAob3B0aW9ucy5jb25zaXN0ZW5jeSkgcXVlcnlPcHRpb25zLmNvbnNpc3RlbmN5ID0gb3B0aW9ucy5jb25zaXN0ZW5jeTtcbiAgaWYgKG9wdGlvbnMuZmV0Y2hTaXplKSBxdWVyeU9wdGlvbnMuZmV0Y2hTaXplID0gb3B0aW9ucy5mZXRjaFNpemU7XG4gIGlmIChvcHRpb25zLmF1dG9QYWdlKSBxdWVyeU9wdGlvbnMuYXV0b1BhZ2UgPSBvcHRpb25zLmF1dG9QYWdlO1xuICBpZiAob3B0aW9ucy5oaW50cykgcXVlcnlPcHRpb25zLmhpbnRzID0gb3B0aW9ucy5oaW50cztcbiAgaWYgKG9wdGlvbnMucGFnZVN0YXRlKSBxdWVyeU9wdGlvbnMucGFnZVN0YXRlID0gb3B0aW9ucy5wYWdlU3RhdGU7XG4gIGlmIChvcHRpb25zLnJldHJ5KSBxdWVyeU9wdGlvbnMucmV0cnkgPSBvcHRpb25zLnJldHJ5O1xuICBpZiAob3B0aW9ucy5zZXJpYWxDb25zaXN0ZW5jeSkgcXVlcnlPcHRpb25zLnNlcmlhbENvbnNpc3RlbmN5ID0gb3B0aW9ucy5zZXJpYWxDb25zaXN0ZW5jeTtcblxuICAvLyBzZXQgZHVtbXkgaG9vayBmdW5jdGlvbiBpZiBub3QgcHJlc2VudCBpbiBzY2hlbWFcbiAgY29uc3Qgc2NoZW1hID0gdGhpcy5fcHJvcGVydGllcy5zY2hlbWE7XG4gIGlmICh0eXBlb2Ygc2NoZW1hLmJlZm9yZV9kZWxldGUgIT09ICdmdW5jdGlvbicpIHtcbiAgICBzY2hlbWEuYmVmb3JlX2RlbGV0ZSA9IGZ1bmN0aW9uIGYxKHF1ZXJ5T2JqLCBvcHRpb25zT2JqLCBuZXh0KSB7XG4gICAgICBuZXh0KCk7XG4gICAgfTtcbiAgfVxuXG4gIGlmICh0eXBlb2Ygc2NoZW1hLmFmdGVyX2RlbGV0ZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHNjaGVtYS5hZnRlcl9kZWxldGUgPSBmdW5jdGlvbiBmMShxdWVyeU9iaiwgb3B0aW9uc09iaiwgbmV4dCkge1xuICAgICAgbmV4dCgpO1xuICAgIH07XG4gIH1cblxuICBzY2hlbWEuYmVmb3JlX2RlbGV0ZShxdWVyeU9iamVjdCwgb3B0aW9ucywgKGVycm9yKSA9PiB7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNhbGxiYWNrKGJ1aWxkRXJyb3IoJ21vZGVsLmRlbGV0ZS5iZWZvcmUuZXJyb3InLCBlcnJvcikpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aHJvdyBidWlsZEVycm9yKCdtb2RlbC5kZWxldGUuYmVmb3JlLmVycm9yJywgZXJyb3IpO1xuICAgIH1cblxuICAgIHRoaXMuX2V4ZWN1dGVfdGFibGVfcXVlcnkocXVlcnksIHF1ZXJ5UGFyYW1zLCBxdWVyeU9wdGlvbnMsIChlcnIsIHJlc3VsdHMpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIGNhbGxiYWNrKGJ1aWxkRXJyb3IoJ21vZGVsLmRlbGV0ZS5kYmVycm9yJywgZXJyKSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNjaGVtYS5hZnRlcl9kZWxldGUocXVlcnlPYmplY3QsIG9wdGlvbnMsIChlcnJvcjEpID0+IHtcbiAgICAgICAgICBpZiAoZXJyb3IxKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhidWlsZEVycm9yKCdtb2RlbC5kZWxldGUuYWZ0ZXIuZXJyb3InLCBlcnJvcjEpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0cyk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChlcnIpIHtcbiAgICAgICAgdGhyb3cgYnVpbGRFcnJvcignbW9kZWwuZGVsZXRlLmRiZXJyb3InLCBlcnIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2NoZW1hLmFmdGVyX2RlbGV0ZShxdWVyeU9iamVjdCwgb3B0aW9ucywgKGVycm9yMSkgPT4ge1xuICAgICAgICAgIGlmIChlcnJvcjEpIHtcbiAgICAgICAgICAgIHRocm93IGJ1aWxkRXJyb3IoJ21vZGVsLmRlbGV0ZS5hZnRlci5lcnJvcicsIGVycm9yMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIHt9O1xufTtcblxuQmFzZU1vZGVsLmRyb3BfbXZpZXdzID0gZnVuY3Rpb24gZihtdmlld3MsIGNhbGxiYWNrKSB7XG4gIGFzeW5jLmVhY2gobXZpZXdzLCAodmlldywgdmlld0NhbGxiYWNrKSA9PiB7XG4gICAgY29uc3QgcXVlcnkgPSB1dGlsLmZvcm1hdCgnRFJPUCBNQVRFUklBTElaRUQgVklFVyBJRiBFWElTVFMgXCIlc1wiOycsIHZpZXcpO1xuICAgIHRoaXMuX2V4ZWN1dGVfZGVmaW5pdGlvbl9xdWVyeShxdWVyeSwgW10sIHZpZXdDYWxsYmFjayk7XG4gIH0sIChlcnIpID0+IHtcbiAgICBpZiAoZXJyKSBjYWxsYmFjayhlcnIpO1xuICAgIGVsc2UgY2FsbGJhY2soKTtcbiAgfSk7XG59O1xuXG5CYXNlTW9kZWwuZHJvcF9pbmRleGVzID0gZnVuY3Rpb24gZihpbmRleGVzLCBjYWxsYmFjaykge1xuICBhc3luYy5lYWNoKGluZGV4ZXMsIChpbmRleCwgaW5kZXhDYWxsYmFjaykgPT4ge1xuICAgIGNvbnN0IHF1ZXJ5ID0gdXRpbC5mb3JtYXQoJ0RST1AgSU5ERVggSUYgRVhJU1RTIFwiJXNcIjsnLCBpbmRleCk7XG4gICAgdGhpcy5fZXhlY3V0ZV9kZWZpbml0aW9uX3F1ZXJ5KHF1ZXJ5LCBbXSwgaW5kZXhDYWxsYmFjayk7XG4gIH0sIChlcnIpID0+IHtcbiAgICBpZiAoZXJyKSBjYWxsYmFjayhlcnIpO1xuICAgIGVsc2UgY2FsbGJhY2soKTtcbiAgfSk7XG59O1xuXG5CYXNlTW9kZWwuYWx0ZXJfdGFibGUgPSBmdW5jdGlvbiBmKG9wZXJhdGlvbiwgZmllbGRuYW1lLCB0eXBlLCBjYWxsYmFjaykge1xuICBjb25zdCBwcm9wZXJ0aWVzID0gdGhpcy5fcHJvcGVydGllcztcbiAgY29uc3QgdGFibGVOYW1lID0gcHJvcGVydGllcy50YWJsZV9uYW1lO1xuXG4gIGlmIChvcGVyYXRpb24gPT09ICdBTFRFUicpIHR5cGUgPSB1dGlsLmZvcm1hdCgnVFlQRSAlcycsIHR5cGUpO1xuICBlbHNlIGlmIChvcGVyYXRpb24gPT09ICdEUk9QJykgdHlwZSA9ICcnO1xuXG4gIGNvbnN0IHF1ZXJ5ID0gdXRpbC5mb3JtYXQoJ0FMVEVSIFRBQkxFIFwiJXNcIiAlcyBcIiVzXCIgJXM7JywgdGFibGVOYW1lLCBvcGVyYXRpb24sIGZpZWxkbmFtZSwgdHlwZSk7XG4gIHRoaXMuX2V4ZWN1dGVfZGVmaW5pdGlvbl9xdWVyeShxdWVyeSwgW10sIGNhbGxiYWNrKTtcbn07XG5cbkJhc2VNb2RlbC5kcm9wX3RhYmxlID0gZnVuY3Rpb24gZihjYWxsYmFjaykge1xuICBjb25zdCBwcm9wZXJ0aWVzID0gdGhpcy5fcHJvcGVydGllcztcbiAgY29uc3QgdGFibGVOYW1lID0gcHJvcGVydGllcy50YWJsZV9uYW1lO1xuXG4gIGNvbnN0IHF1ZXJ5ID0gdXRpbC5mb3JtYXQoJ0RST1AgVEFCTEUgSUYgRVhJU1RTIFwiJXNcIjsnLCB0YWJsZU5hbWUpO1xuICB0aGlzLl9leGVjdXRlX2RlZmluaXRpb25fcXVlcnkocXVlcnksIFtdLCBjYWxsYmFjayk7XG59O1xuXG5CYXNlTW9kZWwucHJvdG90eXBlLl9nZXRfZGF0YV90eXBlcyA9IGZ1bmN0aW9uIGYoKSB7XG4gIHJldHVybiBjcWwudHlwZXM7XG59O1xuXG5CYXNlTW9kZWwucHJvdG90eXBlLl9nZXRfZGVmYXVsdF92YWx1ZSA9IGZ1bmN0aW9uIGYoZmllbGRuYW1lKSB7XG4gIGNvbnN0IHByb3BlcnRpZXMgPSB0aGlzLmNvbnN0cnVjdG9yLl9wcm9wZXJ0aWVzO1xuICBjb25zdCBzY2hlbWEgPSBwcm9wZXJ0aWVzLnNjaGVtYTtcblxuICBpZiAoXy5pc1BsYWluT2JqZWN0KHNjaGVtYS5maWVsZHNbZmllbGRuYW1lXSkgJiYgc2NoZW1hLmZpZWxkc1tmaWVsZG5hbWVdLmRlZmF1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgIGlmICh0eXBlb2Ygc2NoZW1hLmZpZWxkc1tmaWVsZG5hbWVdLmRlZmF1bHQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBzY2hlbWEuZmllbGRzW2ZpZWxkbmFtZV0uZGVmYXVsdC5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hLmZpZWxkc1tmaWVsZG5hbWVdLmRlZmF1bHQ7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbkJhc2VNb2RlbC5wcm90b3R5cGUudmFsaWRhdGUgPSBmdW5jdGlvbiBmKHByb3BlcnR5TmFtZSwgdmFsdWUpIHtcbiAgdmFsdWUgPSB2YWx1ZSB8fCB0aGlzW3Byb3BlcnR5TmFtZV07XG4gIHRoaXMuX3ZhbGlkYXRvcnMgPSB0aGlzLl92YWxpZGF0b3JzIHx8IHt9O1xuICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5fdmFsaWRhdGUodGhpcy5fdmFsaWRhdG9yc1twcm9wZXJ0eU5hbWVdIHx8IFtdLCB2YWx1ZSk7XG59O1xuXG5CYXNlTW9kZWwucHJvdG90eXBlLnNhdmUgPSBmdW5jdGlvbiBmbihvcHRpb25zLCBjYWxsYmFjaykge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSAmJiB0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNhbGxiYWNrID0gb3B0aW9ucztcbiAgICBvcHRpb25zID0ge307XG4gIH1cblxuICBjb25zdCBpZGVudGlmaWVycyA9IFtdO1xuICBjb25zdCB2YWx1ZXMgPSBbXTtcbiAgY29uc3QgcHJvcGVydGllcyA9IHRoaXMuY29uc3RydWN0b3IuX3Byb3BlcnRpZXM7XG4gIGNvbnN0IHNjaGVtYSA9IHByb3BlcnRpZXMuc2NoZW1hO1xuXG4gIGNvbnN0IGRlZmF1bHRzID0ge1xuICAgIHByZXBhcmU6IHRydWUsXG4gIH07XG5cbiAgb3B0aW9ucyA9IF8uZGVmYXVsdHNEZWVwKG9wdGlvbnMsIGRlZmF1bHRzKTtcblxuICBjb25zdCBxdWVyeVBhcmFtcyA9IFtdO1xuXG4gIGNvbnN0IGVycm9ySGFwcGVuZWQgPSBPYmplY3Qua2V5cyhzY2hlbWEuZmllbGRzKS5zb21lKChmKSA9PiB7XG4gICAgaWYgKHNjaGVtYS5maWVsZHNbZl0udmlydHVhbCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gY2hlY2sgZmllbGQgdmFsdWVcbiAgICBjb25zdCBmaWVsZHR5cGUgPSBzY2hlbWVyLmdldF9maWVsZF90eXBlKHNjaGVtYSwgZik7XG4gICAgbGV0IGZpZWxkdmFsdWUgPSB0aGlzW2ZdO1xuXG4gICAgaWYgKGZpZWxkdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZmllbGR2YWx1ZSA9IHRoaXMuX2dldF9kZWZhdWx0X3ZhbHVlKGYpO1xuICAgICAgaWYgKGZpZWxkdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoc2NoZW1hLmtleS5pbmRleE9mKGYpID49IDAgfHwgc2NoZW1hLmtleVswXS5pbmRleE9mKGYpID49IDApIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhidWlsZEVycm9yKCdtb2RlbC5zYXZlLnVuc2V0a2V5JywgZikpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93IGJ1aWxkRXJyb3IoJ21vZGVsLnNhdmUudW5zZXRrZXknLCBmKTtcbiAgICAgICAgfSBlbHNlIGlmIChzY2hlbWEuZmllbGRzW2ZdLnJ1bGUgJiYgc2NoZW1hLmZpZWxkc1tmXS5ydWxlLnJlcXVpcmVkKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FsbGJhY2soYnVpbGRFcnJvcignbW9kZWwuc2F2ZS51bnNldHJlcXVpcmVkJywgZikpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93IGJ1aWxkRXJyb3IoJ21vZGVsLnNhdmUudW5zZXRyZXF1aXJlZCcsIGYpO1xuICAgICAgICB9IGVsc2UgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIGlmICghc2NoZW1hLmZpZWxkc1tmXS5ydWxlIHx8ICFzY2hlbWEuZmllbGRzW2ZdLnJ1bGUuaWdub3JlX2RlZmF1bHQpIHtcbiAgICAgICAgLy8gZGlkIHNldCBhIGRlZmF1bHQgdmFsdWUsIGlnbm9yZSBkZWZhdWx0IGlzIG5vdCBzZXRcbiAgICAgICAgaWYgKHRoaXMudmFsaWRhdGUoZiwgZmllbGR2YWx1ZSkgIT09IHRydWUpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhidWlsZEVycm9yKCdtb2RlbC5zYXZlLmludmFsaWRkZWZhdWx0dmFsdWUnLCBmaWVsZHZhbHVlLCBmLCBmaWVsZHR5cGUpKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aHJvdyBidWlsZEVycm9yKCdtb2RlbC5zYXZlLmludmFsaWRkZWZhdWx0dmFsdWUnLCBmaWVsZHZhbHVlLCBmLCBmaWVsZHR5cGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGZpZWxkdmFsdWUgPT09IG51bGwgfHwgZmllbGR2YWx1ZSA9PT0gY3FsLnR5cGVzLnVuc2V0KSB7XG4gICAgICBpZiAoc2NoZW1hLmtleS5pbmRleE9mKGYpID49IDAgfHwgc2NoZW1hLmtleVswXS5pbmRleE9mKGYpID49IDApIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGNhbGxiYWNrKGJ1aWxkRXJyb3IoJ21vZGVsLnNhdmUudW5zZXRrZXknLCBmKSk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgYnVpbGRFcnJvcignbW9kZWwuc2F2ZS51bnNldGtleScsIGYpO1xuICAgICAgfSBlbHNlIGlmIChzY2hlbWEuZmllbGRzW2ZdLnJ1bGUgJiYgc2NoZW1hLmZpZWxkc1tmXS5ydWxlLnJlcXVpcmVkKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBjYWxsYmFjayhidWlsZEVycm9yKCdtb2RlbC5zYXZlLnVuc2V0cmVxdWlyZWQnLCBmKSk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgYnVpbGRFcnJvcignbW9kZWwuc2F2ZS51bnNldHJlcXVpcmVkJywgZik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWRlbnRpZmllcnMucHVzaCh1dGlsLmZvcm1hdCgnXCIlc1wiJywgZikpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRiVmFsID0gdGhpcy5jb25zdHJ1Y3Rvci5fZ2V0X2RiX3ZhbHVlX2V4cHJlc3Npb24oZiwgZmllbGR2YWx1ZSk7XG4gICAgICBpZiAoXy5pc1BsYWluT2JqZWN0KGRiVmFsKSAmJiBkYlZhbC5xdWVyeV9zZWdtZW50KSB7XG4gICAgICAgIHZhbHVlcy5wdXNoKGRiVmFsLnF1ZXJ5X3NlZ21lbnQpO1xuICAgICAgICBxdWVyeVBhcmFtcy5wdXNoKGRiVmFsLnBhcmFtZXRlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZXMucHVzaChkYlZhbCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjYWxsYmFjayhidWlsZEVycm9yKCdtb2RlbC5zYXZlLmludmFsaWR2YWx1ZScsIGZpZWxkdmFsdWUsIGYsIGZpZWxkdHlwZSkpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHRocm93IGJ1aWxkRXJyb3IoJ21vZGVsLnNhdmUuaW52YWxpZHZhbHVlJywgZmllbGR2YWx1ZSwgZiwgZmllbGR0eXBlKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9KTtcblxuICBpZiAoZXJyb3JIYXBwZW5lZCkgcmV0dXJuIHt9O1xuXG4gIGxldCBxdWVyeSA9IHV0aWwuZm9ybWF0KFxuICAgICdJTlNFUlQgSU5UTyBcIiVzXCIgKCAlcyApIFZBTFVFUyAoICVzICknLFxuICAgIHByb3BlcnRpZXMudGFibGVfbmFtZSxcbiAgICBpZGVudGlmaWVycy5qb2luKCcgLCAnKSxcbiAgICB2YWx1ZXMuam9pbignICwgJylcbiAgKTtcblxuICBpZiAob3B0aW9ucy5pZl9ub3RfZXhpc3QpIHF1ZXJ5ICs9ICcgSUYgTk9UIEVYSVNUUyc7XG4gIGlmIChvcHRpb25zLnR0bCkgcXVlcnkgKz0gdXRpbC5mb3JtYXQoJyBVU0lORyBUVEwgJXMnLCBvcHRpb25zLnR0bCk7XG5cbiAgcXVlcnkgKz0gJzsnO1xuXG4gIGlmIChvcHRpb25zLnJldHVybl9xdWVyeSkge1xuICAgIHJldHVybiB7IHF1ZXJ5LCBwYXJhbXM6IHF1ZXJ5UGFyYW1zIH07XG4gIH1cblxuICBjb25zdCBxdWVyeU9wdGlvbnMgPSB7IHByZXBhcmU6IG9wdGlvbnMucHJlcGFyZSB9O1xuICBpZiAob3B0aW9ucy5jb25zaXN0ZW5jeSkgcXVlcnlPcHRpb25zLmNvbnNpc3RlbmN5ID0gb3B0aW9ucy5jb25zaXN0ZW5jeTtcbiAgaWYgKG9wdGlvbnMuZmV0Y2hTaXplKSBxdWVyeU9wdGlvbnMuZmV0Y2hTaXplID0gb3B0aW9ucy5mZXRjaFNpemU7XG4gIGlmIChvcHRpb25zLmF1dG9QYWdlKSBxdWVyeU9wdGlvbnMuYXV0b1BhZ2UgPSBvcHRpb25zLmF1dG9QYWdlO1xuICBpZiAob3B0aW9ucy5oaW50cykgcXVlcnlPcHRpb25zLmhpbnRzID0gb3B0aW9ucy5oaW50cztcbiAgaWYgKG9wdGlvbnMucGFnZVN0YXRlKSBxdWVyeU9wdGlvbnMucGFnZVN0YXRlID0gb3B0aW9ucy5wYWdlU3RhdGU7XG4gIGlmIChvcHRpb25zLnJldHJ5KSBxdWVyeU9wdGlvbnMucmV0cnkgPSBvcHRpb25zLnJldHJ5O1xuICBpZiAob3B0aW9ucy5zZXJpYWxDb25zaXN0ZW5jeSkgcXVlcnlPcHRpb25zLnNlcmlhbENvbnNpc3RlbmN5ID0gb3B0aW9ucy5zZXJpYWxDb25zaXN0ZW5jeTtcblxuICAvLyBzZXQgZHVtbXkgaG9vayBmdW5jdGlvbiBpZiBub3QgcHJlc2VudCBpbiBzY2hlbWFcbiAgaWYgKHR5cGVvZiBzY2hlbWEuYmVmb3JlX3NhdmUgIT09ICdmdW5jdGlvbicpIHtcbiAgICBzY2hlbWEuYmVmb3JlX3NhdmUgPSBmdW5jdGlvbiBmKGluc3RhbmNlLCBvcHRpb24sIG5leHQpIHtcbiAgICAgIG5leHQoKTtcbiAgICB9O1xuICB9XG5cbiAgaWYgKHR5cGVvZiBzY2hlbWEuYWZ0ZXJfc2F2ZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHNjaGVtYS5hZnRlcl9zYXZlID0gZnVuY3Rpb24gZihpbnN0YW5jZSwgb3B0aW9uLCBuZXh0KSB7XG4gICAgICBuZXh0KCk7XG4gICAgfTtcbiAgfVxuXG4gIHNjaGVtYS5iZWZvcmVfc2F2ZSh0aGlzLCBvcHRpb25zLCAoZXJyb3IpID0+IHtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY2FsbGJhY2soYnVpbGRFcnJvcignbW9kZWwuc2F2ZS5iZWZvcmUuZXJyb3InLCBlcnJvcikpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aHJvdyBidWlsZEVycm9yKCdtb2RlbC5zYXZlLmJlZm9yZS5lcnJvcicsIGVycm9yKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnN0cnVjdG9yLl9leGVjdXRlX3RhYmxlX3F1ZXJ5KHF1ZXJ5LCBxdWVyeVBhcmFtcywgcXVlcnlPcHRpb25zLCAoZXJyLCByZXN1bHQpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIGNhbGxiYWNrKGJ1aWxkRXJyb3IoJ21vZGVsLnNhdmUuZGJlcnJvcicsIGVycikpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzY2hlbWEuYWZ0ZXJfc2F2ZSh0aGlzLCBvcHRpb25zLCAoZXJyb3IxKSA9PiB7XG4gICAgICAgICAgaWYgKGVycm9yMSkge1xuICAgICAgICAgICAgY2FsbGJhY2soYnVpbGRFcnJvcignbW9kZWwuc2F2ZS5hZnRlci5lcnJvcicsIGVycm9yMSkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYWxsYmFjayhudWxsLCByZXN1bHQpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoZXJyKSB7XG4gICAgICAgIHRocm93IGJ1aWxkRXJyb3IoJ21vZGVsLnNhdmUuZGJlcnJvcicsIGVycik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzY2hlbWEuYWZ0ZXJfc2F2ZSh0aGlzLCBvcHRpb25zLCAoZXJyb3IxKSA9PiB7XG4gICAgICAgICAgaWYgKGVycm9yMSkge1xuICAgICAgICAgICAgdGhyb3cgYnVpbGRFcnJvcignbW9kZWwuc2F2ZS5hZnRlci5lcnJvcicsIGVycm9yMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIHt9O1xufTtcblxuQmFzZU1vZGVsLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiBmKG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxICYmIHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuXG4gIGNvbnN0IHNjaGVtYSA9IHRoaXMuY29uc3RydWN0b3IuX3Byb3BlcnRpZXMuc2NoZW1hO1xuICBjb25zdCBkZWxldGVRdWVyeSA9IHt9O1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2NoZW1hLmtleS5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGZpZWxkS2V5ID0gc2NoZW1hLmtleVtpXTtcbiAgICBpZiAoZmllbGRLZXkgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBmaWVsZEtleS5sZW5ndGg7IGorKykge1xuICAgICAgICBkZWxldGVRdWVyeVtmaWVsZEtleVtqXV0gPSB0aGlzW2ZpZWxkS2V5W2pdXTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZGVsZXRlUXVlcnlbZmllbGRLZXldID0gdGhpc1tmaWVsZEtleV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IuZGVsZXRlKGRlbGV0ZVF1ZXJ5LCBvcHRpb25zLCBjYWxsYmFjayk7XG59O1xuXG5CYXNlTW9kZWwucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgY29uc3Qgb2JqZWN0ID0ge307XG4gIGNvbnN0IHNjaGVtYSA9IHRoaXMuY29uc3RydWN0b3IuX3Byb3BlcnRpZXMuc2NoZW1hO1xuXG4gIE9iamVjdC5rZXlzKHNjaGVtYS5maWVsZHMpLmZvckVhY2goKGZpZWxkKSA9PiB7XG4gICAgb2JqZWN0W2ZpZWxkXSA9IHRoaXNbZmllbGRdO1xuICB9KTtcblxuICByZXR1cm4gb2JqZWN0O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBCYXNlTW9kZWw7XG4iXX0=