<!DOCTYPE html>
<html lang="en">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="description" content="Nodejs Driver for DataStax Enterprise">
    <meta name="author" content="DataStax">

    <title>DataStax Enterprise Node.js Driver - Getting started</title>

    <link rel="icon" href="../../favicon.ico">
    <link rel="apple-touch-icon" href="../../favicon.png">
    <link href="../../css/style.css" rel="stylesheet">
    <link href="../../css/pygments.css" rel="stylesheet">
    <link href="../../css/hotkeys.css" rel="stylesheet">

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body ng-app="docs">
    <div class="navbar">
      <div class="container-fluid">
        <div class="row row-offcanvas row-offcanvas-left">
          <div class="col-sm-3 text-center">
            <a class="ds-home" href="../"><img alt="Brand" src="../../img/logo.png"></a>
            <ul class="list-inline ds-sites" role="nav">
              <li><a href="https://academy.datastax.com/" class="navbar-link">DataStax Academy</a></li>
              <li><a href="http://www.datastax.com/dev/blog" class="navbar-link">Tech Blog</a></li>
              <li><a href="http://www.datastax.com/what-we-offer/products-services/support" class="navbar-link">Support</a></li>
            </ul>
          </div>
          <div class="col-md-5">
            <p class="lead pubtitle">DataStax Enterprise Node.js Driver</p>
            
            <div class="text-info">
              <span class="text-warning">Attention:</span> Viewing documentation for version
              <div class="btn-group">
                <button id="current-version" class="btn btn-default btn-sm dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  1.0
                  <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu" aria-labelledby="current-version">
                
                  <li><a href="../../getting-started/">1.1</a></li>
                
                  <li class="disabled"><a href="./">1.0</a></li>
                
                </ul>
              </div>
            </div>
            
          </div>
          <div class="col-md-4">
            <form id="search" class="form-search dropdown visible-lg-inline-block" ng-controller="search" ng-class="{open: hasResults}" role="search" ng-submit="submit()" data-spy="affix" data-offset-top="130">
              <div class="form-group has-feedback">
                <input type="search" class="form-control input-sm mousetrap" placeholder="Search..." ng-model="q" ng-change="search('1.0')" ng-disabled="!searchReady" disabled data-hotkey="{down: moveDown, up: moveUp, esc: reset}" data-search>
              </div>
              <ul class="dropdown-menu search-results" role="menu">
                <li ng-repeat="result in results" ng-class="{'bg-warning': $index == current}"><a ng-href="{{basePath}}{{result.path}}"><span ng-bind-html="summary(result)"></span></a></li>
              </ul>
            </form>
            <a href="http://www.datastax.com/download" class="btn btn-primary btn-sm">Download</a>
          </div>
        </div>
      </div>
    </div>

    <div class="container-fluid" id="content">
      <div class="row">
        <div class="col-md-3">
          <div id="navigation" class="side-nav" role="tablist" aria-multiselectable="true">
            <h3><a href="../">Contents</a></h3>
            <ul class="nav nav-pills nav-stacked">
  
  
  <li class="active">
    <a href="./" class="current">
      Getting started <small>page</small>
      
    </a>
    <ul class="nav nav-pills nav-stacked">
  
</ul>

  </li>
  
  
  <li>
    <a href="../features/">
      Features <small>page</small>
      
      
      <span class="glyphicon glyphicon-plus-sign pull-right" aria-hidden="true"></span>
      
      
    </a>
    
  </li>
  
  
  <li>
    <a href="../faq/">
      Frequently Asked Questions <small>page</small>
      
    </a>
    
  </li>
  
</ul>

          </div>
        </div>
        <div class="col-md-9 content">
          <div class="crumbs-wrapper">
            <nav id="crumbs" data-spy="affix" data-offset-top="130">
              <ol class="breadcrumb">
                
                
                
                <li><a href="../">Home</a></li>
                
                
                
                
                
                <li class="active">Getting started</li>
                
                
                
              </ol>
            </nav>
          </div>
          

<p><em>This is the documentation for the DataStax Enterprise Node.js Driver for <a href="http://www.datastax.com/products/datastax-enterprise">DSE</a>. This driver is built on top of the
<a href="https://github.com/datastax/nodejs-driver-dse">DataStax Node.js driver for Apache Cassandra</a> and enhanced for the adaptive data management and mixed
workload capabilities provided by <a href="http://www.datastax.com/products/datastax-enterprise">DataStax Enterprise</a>. Therefore a lot of the underlying concepts are the same
and to keep this documentation focused we will be linking to the relevant sections of the <a href="http://datastax.github.io/nodejs-driver/">DataStax Node.js driver
for Apache Cassandra</a> documentation where necessary.</em></p>

<h1 id="getting-started" class="target">Getting started<a class="anchor" href="#getting-started" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
</h1>

<p>Getting started with the Node.js driver for DataStax Enterprise.</p>

<h2 id="upgrading-from-the-core-driver" class="target">Upgrading from the core driver<a class="anchor" href="#upgrading-from-the-core-driver" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
</h2>

<p>Upgrading from <code>cassandra-driver</code> to <code>dse-driver</code> can be as simple as changing the import statement to point to the
dse package:</p>
<pre class="highlight"><code><span class="kr">const</span> <span class="nx">cassandra</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'cassandra-driver'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">cassandra</span><span class="p">.</span><span class="nx">Client</span><span class="p">({</span> <span class="na">contactPoints</span><span class="p">:</span> <span class="p">[</span><span class="s1">'host1'</span><span class="p">]</span> <span class="p">});</span>
</code></pre>
<p>Becomes:</p>
<pre class="highlight"><code><span class="kr">const</span> <span class="nx">dse</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'dse-driver'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">dse</span><span class="p">.</span><span class="nx">Client</span><span class="p">({</span> <span class="na">contactPoints</span><span class="p">:</span> <span class="p">[</span><span class="s1">'host1'</span><span class="p">]</span> <span class="p">});</span>
</code></pre>
<p>All CQL features in the Cassandra driver (see the <a href="http://datastax.github.io/nodejs-driver/features/">core driver features</a>) are available in the
DSE driver.</p>

<h2 id="connecting-to-a-dse-cluster" class="target">Connecting to a DSE cluster<a class="anchor" href="#connecting-to-a-dse-cluster" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
</h2>

<p>To connect to a DSE cluster, you need to provide at least 1 node of the cluster, if there are more nodes than
the ones provided, the driver will automatically discover all the nodes in the cluster after it connects to the
first node.</p>

<p>Typically you create only 1 <code>Client</code> instance for a given Cassandra cluster and use it across your application.</p>
<pre class="highlight"><code><span class="kr">const</span> <span class="nx">dse</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'dse-driver'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">dse</span><span class="p">.</span><span class="nx">Client</span><span class="p">({</span> <span class="na">contactPoints</span><span class="p">:</span> <span class="p">[</span><span class="s1">'host1'</span><span class="p">]</span> <span class="p">});</span>
<span class="nx">client</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">assert</span><span class="p">.</span><span class="nx">ifError</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<p>At this point, the driver will be connected to one of the contact points and discovered the rest of the nodes in your
cluster.  </p>

<p>See <a href="http://datastax.github.io/nodejs-driver/getting-started/">Getting started with DataStax Node.js driver for more information</a>.</p>

<h2 id="working-with-mixed-workloads" class="target">Working with mixed workloads<a class="anchor" href="#working-with-mixed-workloads" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
</h2>

<p>The driver features <a href="../features/execution-profiles/">Execution Profiles</a> that provide a mechanism to group together
a set of configuration options and reuse them across different query executions.</p>

<p><a href="../features/execution-profiles/">Execution Profiles</a> are specially useful when dealing with different workloads like
Graph and CQL workloads, allowing you to use a single <code>Client</code> instance for all workloads, for example:</p>
<pre class="highlight"><code><span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">({</span> 
  <span class="na">contactPoints</span><span class="p">:</span> <span class="p">[</span><span class="s1">'host1'</span><span class="p">],</span> 
  <span class="na">profiles</span><span class="p">:</span> <span class="p">[</span>
    <span class="k">new</span> <span class="nx">ExecutionProfile</span><span class="p">(</span><span class="s1">'time-series'</span><span class="p">,</span> <span class="p">{</span>
      <span class="na">consistency</span><span class="p">:</span> <span class="nx">consistency</span><span class="p">.</span><span class="nx">localOne</span>
      <span class="na">readTimeout</span><span class="p">:</span> <span class="mi">30000</span><span class="p">,</span>
      <span class="na">serialConsistency</span><span class="p">:</span> <span class="nx">consistency</span><span class="p">.</span><span class="nx">localSerial</span>
    <span class="p">}),</span>
    <span class="k">new</span> <span class="nx">ExecutionProfile</span><span class="p">(</span><span class="s1">'graph'</span><span class="p">,</span> <span class="p">{</span>
      <span class="na">loadBalancing</span><span class="p">:</span> <span class="k">new</span> <span class="nx">DseLoadBalancingPolicy</span><span class="p">(</span><span class="s1">'graph-us-west'</span><span class="p">)</span>
      <span class="na">consistency</span><span class="p">:</span> <span class="nx">consistency</span><span class="p">.</span><span class="nx">localQuorum</span>
      <span class="na">readTimeout</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
      <span class="na">graphOptions</span><span class="p">:</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="s1">'myGraph'</span> <span class="p">}</span>
    <span class="p">})</span>
  <span class="p">]</span>
<span class="p">});</span>

<span class="c1">// Use an execution profile for a CQL query</span>
<span class="nx">client</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="s1">'SELECT * FROM system.local'</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="p">{</span> <span class="na">executionProfile</span><span class="p">:</span> <span class="s1">'time-series'</span> <span class="p">},</span> <span class="nx">callback</span><span class="p">);</span>

<span class="c1">// Use an execution profile for a gremlin query</span>
<span class="nx">client</span><span class="p">.</span><span class="nx">executeGraph</span><span class="p">(</span><span class="s1">'g.V().count()'</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="p">{</span> <span class="na">executionProfile</span><span class="p">:</span> <span class="s1">'graph'</span> <span class="p">},</span> <span class="nx">callback</span><span class="p">);</span>
</code></pre>


        </div>
      </div>
    </div>

    
    <footer class="container text-muted">
      <ul class="list-inline">
      
        
        <li>
          <a href="https://github.com/datastax/nodejs-driver/">Code</a>
        </li>
      
        <li>·</li>
        <li>
          <a href="https://datastax-oss.atlassian.net/projects/NODEJS/issues">Issues</a>
        </li>
      
        <li>·</li>
        <li>
          <a href="https://groups.google.com/a/lists.datastax.com/forum/#!forum/nodejs-driver-user">Mailing List</a>
        </li>
      
        <li>·</li>
        <li>
          <a href="irc://irc.freenode.net/datastax-drivers">IRC Channel</a>
        </li>
      
        <li>·</li>
        <li>
          <a href="https://www.npmjs.org/package/dse-driver">Npm</a>
        </li>
      
      </ul>
    </footer>
    

    <script src="../../js/jquery.js"></script>
    <script src="../../js/bootstrap.js"></script>
    <script src="../../js/angular.js"></script>
    <script src="../../js/mousetrap.js"></script>
    <script src="../../js/hotkeys.js"></script>
    <script src="../../js/ZeroClipboard.js"></script>
    <script src="../../js/lunr.js"></script>
    <script src="../../js/app.js"></script>
  </body>
</html>
